{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../src/components/FlagSignifier.svelte","../../src/components/Link.svelte","../../src/components/utils.js","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/transition/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/parsers/ep5Parser.js","../../src/stores.js","../../src/components/LogWindow.svelte","../../src/pages/HomePage.svelte","../../src/components/async-script-loader.js","../../src/parsers/payParser.js","../../src/parsers/nightsAFParser.js","../../src/parsers/router.js","../../src/components/DropZone.svelte","../../src/components/MonthStatus.svelte","../../src/components/MissionCountries.svelte","../../src/components/DownloadTablePDF.svelte","../../src/components/MissionActivities.svelte","../../src/pages/MissionPage.svelte","../../src/components/PayTable.svelte","../../src/pages/PayPage.svelte","../../src/pages/Help.md","../../src/components/SWUpdate.svelte","../../src/pages/HelpPage.svelte","../../src/components/TaxYearSelect.svelte","../../src/components/Navbar.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.31.0' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","<script>\n  //https://www.jayfreestone.com/writing/bulletproof-flag\n  // style props: \"\", \"large-icon\", \"large-title\"; \"large-icon; large-title\"\n  export let style = 'large-icon';\n  const styles = style.split().map(v => v.trim());\n  export let title;\n</script>\n\n<div class=\"flag\">{#if false}<slot />{/if}\n    <div\n        class=\"flag__signifier\"\n        class:flag--large-icon={styles.includes('large-icon')}\n        class:flag--no-title={!title}\n        class:flag--large-title={title && styles.includes('large-title')}>\n        <slot name=\"icon\"></slot>\n    </div>\n    <div class=\"flag__title\">\n        <h2>{title}</h2>\n    </div>\n    <div class=\"flag__content\">\n        <slot name=\"content\"></slot>\n    </div>\n</div>\n\n<style>\n\n:global(.flag + .flag) {\n    margin-top: 3rem;\n}\n:global(.flag) {\n    display: grid;\n    grid-column-gap: var(--flag-gap, 1em);\n    grid-template-columns: auto 1fr;\n    grid-template-rows: repeat(3, minmax(min-content, max-content)) 1fr;\n    grid-template-areas: \"signifier .\" \"signifier title\" \"signifier content\" \". content\";\n}\n:global(.flag__title) {\n    grid-area: title;\n    align-self: center;\n    display: flex;\n    align-items: center;\n}\n:global(.flag__title:empty) {\n  grid-column: 1;\n  grid-row: 2;\n}\n:global(.flag__title:empty:after) {\n    content: \"x\";\n    visibility: hidden;\n}\n:global(.flag__title:empty ~ .flag__content) {\n    grid-row-start: 2;\n}\n:global(.flag__signifier) {\n    grid-area: signifier;\n    display: flex;\n    align-self: center;\n}\n:global(.flag__content) {\n    grid-area: content;\n}\n:global(.flag--large-icon svg) {\n    width: 4rem;\n    height: 4rem;\n}\n:global(.flag--no-title) {\n  font-size: 1.1rem;\n}\n:global(.flag--no-title p) {\n  margin: 0;\n}\n:global(.flag--large-title) h2 {\n  font-size: 2.8rem;\n}\n</style>","<script>\n    export let href;\n    const isExternal = href && !href.startsWith('#');\n    const props = (isExternal) ? Object.assign({rel: \"noreferrer\", target: \"_blank\"}, $$restProps): $$restProps;\n</script>\n<!-- svelte-ignore a11y-missing-attribute -->\n<a {href} {...props}><slot></slot></a>","export class Deferred {\n    constructor() {\n        this.promise = new Promise((resolve, reject)=> {\n            this.reject = reject\n            this.resolve = resolve\n        })\n    }\n}\nexport const htmlLogo = '<span class=\"logo\">Fly<span>Tax</span></span>';\nexport const navigatorLocale = (typeof navigator !== \"undefined\" && navigator.languages) ? Intl.DateTimeFormat.supportedLocalesOf(Intl.NumberFormat.supportedLocalesOf(navigator.languages)).shift() : undefined;\nexport const months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\nexport const months14 = ['00', ...months, '13'];\nexport const monthsfr = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'];\nexport const localeFormat = (numberOrString, options={}) => {\n    if (navigatorLocale !== undefined) {\n        const res = new Intl.NumberFormat(navigatorLocale, options).format(numberOrString);\n        if (options.style === 'currency') return res.replace(/\\s/gu, '\\u202f');\n        return res;\n    } else {\n        const numberValue = (numberOrString.toFixed) ? numberOrString : parseFloat(numberOrString);\n        if (options.style==='currency') {\n            return numberValue.toFixed(options.maximumFractionDigits||2) + \"\\u202f\" + options.currency;\n        }else{\n            return (options.maximumFractionDigits===undefined || options.maximumFractionDigits !==  options.minimumFractionDigits) ? numberValue.toString(): numberValue.toFixed(options.maximumFractionDigits);\n        }\n    }\n}\nexport const localeCurrency = (value, digits=2) => localeFormat(value, {\"style\": \"currency\", \"currency\": \"EUR\", \"minimumFractionDigits\": digits});\nexport const localeRate = (value) => localeFormat(value, {\"style\": \"decimal\", \"minimumFractionDigits\": 4, \"maximumFractionDigits\": 4});\nexport const localeDateFormat = (isoString, options={}) => {\n    if (navigatorLocale !== undefined) {\n        const fakeUTCDate = new Date(Date.parse(isoString.substring(0, 10) + \"T00:00Z\"));\n        const opts = Object.assign({\"timezone\": \"UTC\"}, options);\n        return new Intl.DateTimeFormat(navigatorLocale, opts).format(fakeUTCDate);\n    } else {\n        return isoString.substring(0, 10);\n    }\n}\n","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicInOut, linear, cubicOut } from '../easing/index.mjs';\nimport { is_function, assign } from '../internal/index.mjs';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear }) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut }) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut }) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import airportsData from \"../../data/airports.json\";\nimport {localeFormat, months14} from \"../components/utils\";\n\nexport const WITHIN_BASE_TEXT = \"rotation sur base\";\nexport const NIGHT_OVERFLOW_TEXT = \"Erreur: nuitées > nb de jours\";\nexport const CONTINUATION_MARK = \"...\";\nexport const REFNOTE1 = \"\\u202f¹\";\nexport const FORMULA_ERROR = \"!ERREUR!\"\n//months as written in EP5\nconst EP5MONTHS = ['JANVIER', 'FEVRIER', 'MARS', 'AVRIL', 'MAI', 'JUIN', 'JUILLET', 'AOUT', 'SEPTEMBRE', 'OCTOBRE', 'NOVEMBRE', 'DECEMBRE'];\n\n//converts EP5 time hh,dd to hh:mmZ\n//returns a string\nexport const ep5Time2iso = (text) => {\n    const [hours, cs] = text.split(\",\");\n    const minutes = (parseFloat(cs) * 0.6).toFixed(0).padStart(2, '0');\n    return `${hours}:${minutes}Z`;\n}\n\n//https://stackoverflow.com/questions/222309/calculate-last-day-of-month-in-javascript\n//months must be 1 based (1->12)\nconst getDaysInMonth = (m, y) => {\n    return m===2 ? y & 3 || !(y%25) && y & 15 ? 28 : 29 : 30 + (m+(m>>3)&1);\n}\n\nexport const lastDayInMonthISO = (mString, yString) => {\n    const day = getDaysInMonth(parseInt(mString, 10), parseInt(yString, 10));\n    // 28<=day<=31, so no paddding needed\n    return `${yString}-${mString}-${day}`;\n}\n\n//return intervals between to ISO dates, in hours and in days\nexport const numberOfDays = (startISO, endISO) => {\n    const diff = Date.parse(endISO.replace(\"24:00\", \"23:59\")) - Date.parse(startISO.replace(/\\d\\d:\\d\\d/, \"00:00\"));\n    return Math.floor(diff/ 86400000);\n};\nexport const diffHours = (startISO, endISO) => {\n    return (Date.parse(endISO) - Date.parse(startISO)) / 3600000;\n};\n\n// Converts timezone\n// 2020-11-01T00:00Z -> 2020-11-01+01:00 for \"Europe/Paris\"\n// 2020-11-01T00:00+01:00 -> 2020-11-01+01:00 for \"Europe/Paris\"\nexport const iso2TZ = (timeZone, isoString, deltaDays=0) => {\n    if (isoString === undefined) return timeZone; // This is used in buildRots to check browser compatibility\n    let event = new Date(Date.parse(isoString));\n    if (deltaDays) event.setUTCDate(event.getUTCDate() + deltaDays);\n    // British English uses day/month/year order and 24-hour time without AM/PM\n    const loc = event.toLocaleString(\"en-GB\", {timeZone});\n    const re = /(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d), (\\d\\d):(\\d\\d):\\d\\d/\n    let match;\n    if (null !== (match = re.exec(loc))) {\n        const [, day, month, year, hour, minute] = match;\n        let baseIsoString = `${year}-${month}-${day}T${hour}:${minute}`;\n        const baseEvent = new Date(Date.parse(baseIsoString + \"Z\"));\n        const delta = (baseEvent - event)/3600000;\n        let tzOffset = Math.trunc(delta);\n        let minutes = Math.round((Math.abs(delta) - Math.abs(tzOffset))*60/100);\n        if (tzOffset === 0) {\n            return baseIsoString + \"Z\";\n        }\n        baseIsoString += (tzOffset >= 0) ? '+' : '-';\n        baseIsoString += Math.abs(tzOffset).toString().padStart(2, \"0\") + \":\" + minutes.toString().padStart(2, \"0\");\n        return baseIsoString;\n    } else {\n        throw new Error(`Can not convert ${isoString} to timeZone ${timeZone}`);\n    }\n}\nexport const iso2FR = iso2TZ.bind(null, \"Europe/Paris\");\n\nconst rotSummary = (rot) => {\n    // construct a summary (nights not repeated)\n    // [YVR, YVR, PPT, PPT, YVR, YVR] => [YVR, PPT, YVR]\n    const stopovers = rot.nights.reduce((accumulator, current) => {\n        if (current !== accumulator[accumulator.length - 1]) {\n            accumulator.push(current); // add a new entry\n        }\n        return accumulator;\n    }, []);\n    return [rot.dep, ...stopovers, rot.arr].join('-')\n            .replace('-'+ CONTINUATION_MARK, CONTINUATION_MARK)\n            .replace(CONTINUATION_MARK +'-', CONTINUATION_MARK);\n}\n\nexport const buildRots = (flights, {tzConverter, base, iataMap}) => {\n    // Using parsed flights build up rots & places of stay\n    \n    //verify browser compatibility\n    const converterTZ = tzConverter();\n    try {\n        new Date().toLocaleString(\"en-GB\", {\"timeZone\": converterTZ, \"timeZoneName\": \"short\"});\n    } catch (e) {\n        throw new Error(`Date.toLocaleString(\"en-GB\", {\"timeZone\": \"${converterTZ}\"}) not supported`);\n    }\n    const isBase = (iata) => (base.indexOf(iata)!== -1);\n    let rots = [];\n    let rot = null;\n    let rotFlights;\n    let rotStays;\n    \n    for (const [i, flightGMT] of flights.entries()) {\n        const year = flightGMT.start.substring(0,4);\n        const month = flightGMT.start.substring(5, 7);\n        const flight = Object.assign({}, flightGMT);\n        if (tzConverter) {\n            Object.assign(flight, {\"start\": tzConverter(flightGMT.start), \"end\": tzConverter(flightGMT.end)});\n        }\n        if (rot === null) { //reset to a new rot\n            rotFlights = [];\n            rotStays = [];\n            rot = {\"isComplete\": \"<>\", \"nights\": [], \"start\": flight.start};\n        }\n        if (i === 0 && ((isBase(flight.dep) && flight.stop === \"0,00\") || !isBase(flight.dep))) {\n            rot.isComplete = '>';\n            rot.start = `${year}-${month}-01T00:00Z`;\n            if (tzConverter) rot.start = tzConverter(rot.start);\n            const days = numberOfDays(rot.start, flight.start) + 1;\n            if (!isBase(flight.dep)) { //stopovers from first day of month\n                for (let j=0; j<days-1; j++) {\n                    rot.nights.push(flight.dep);\n                    rotStays.push(flight.dep)\n                }\n            }\n            // extra stopover for the flight\n            if (isBase(flight.dep)) {\n                // do not push flight.arr (already counted on previous month)\n            }else if (isBase(flight.arr)) {\n                rot.nights.push(flight.dep);\n            }else if (numberOfDays(flight.start, flight.end)>0){\n                rot.nights.push(flight.dep);\n            }\n            //other cases will be covered below\n        }\n        const nextFlight = (flights[i + 1]) ? Object.assign({}, flights[i + 1]) : undefined;\n        if(tzConverter && nextFlight) {\n            Object.assign(nextFlight, {\"start\": tzConverter(flights[i + 1].start), \"end\": tzConverter(flights[i + 1].end)});\n        }\n        if (nextFlight !== undefined) {\n            const standbyHours = diffHours(flight.end, nextFlight.start);\n            // on compte une nuit par jour civil en escale\n            let standbyDays = 0;\n            //First line was needed by 10 ON YVR PPT YVR in rots.test\n            //To check if isBase test was needed, added 7ON SVO in straddling.test and it is.\n            standbyDays += (numberOfDays(rot.start, flight.start) === 0 && isBase(flight.dep)) ? numberOfDays(flight.start, flight.end) : 0; // for flights straddling day on first day\n            standbyDays += numberOfDays(flight.end, nextFlight.start);\n            standbyDays += numberOfDays(nextFlight.start, nextFlight.end); // for flights like LAX-PPT\n            standbyDays = Math.max(standbyDays, 1); // for single day rot\n            if (standbyHours >= 7 && !isBase(flight.arr)) {\n                //console.log(numberOfDays(flight.end, nextFlight.start), standbyHours, localDays, flight.arr);\n                //escale hors base de plus de 7h\n                for (let j=0; j<standbyDays; j++) {\n                    rot.nights.push(flight.arr);\n                }\n                for (let j=0; j <numberOfDays(flight.end, nextFlight.start); j++){\n                    rotStays.push(flight.arr);\n                }\n                rotFlights.push(flightGMT);\n                continue; //do not push new rot yet\n            } else if (isBase(flight.arr) && isBase(nextFlight.dep) && standbyHours >= 12) {\n                // Arrivée base, départ Base avec standby > 12h\n                // will push new rot\n            } else {\n                rotFlights.push(flightGMT);\n                continue; //do not push new rot yet\n            }\n        } else {\n            // last flight of the month ending Base\n            if (isBase(flight.arr)) {\n                if (flight.end.substring(5,7) !== month) {\n                    // flight is accross civil month\n                    if (flightGMT.end.substring(11) === \"24:00Z\") {\n                        // uncomplete rot not ending at Base\n                        rot.isComplete = '<';\n                        // if flight continues after 24z, next day will be counted next month\n                        // so we need to adjust nights by omitting one\n                        rot.days = numberOfDays(rot.start, flight.end);\n                    }\n                }\n                // last flight, will push new rot\n            } else {\n                // last flight of the month NOT ending Base\n                rot.isComplete = '<';\n                const lastDay = lastDayInMonthISO(month, year) + \"T24:00Z\";\n                if (tzConverter) {\n                    rot.end = tzConverter(lastDay);\n                } else {\n                    rot.end = lastDay;\n                }\n                const days = numberOfDays(flight.end, rot.end) + 1;\n                for (let j=0; j<days; j++) {\n                    rot.nights.push(flight.arr);\n                    if (j>0) rotStays.push(flight.arr);\n                }\n                if (rot.end.substring(5,7) !== month) {\n                    // also adjust night count if flight.end is on current month\n                    if (flight.end.substring(5,7) === month){\n                        rot.nights.pop();\n                    }\n                    rot.days = numberOfDays(rot.start, rot.end); //omit one\n                }\n                // last flight, will push new rot\n            }\n        }\n        rotFlights.push(flightGMT);\n        if (rot.isComplete !== '<>') {\n            rot.flights = rotFlights; // needed for merge\n            rot.base = base;\n        }\n        // some defaults if not already set\n        // a ||= b; only is ES2021 and node 15 <=> a || (a = b);\n        rot.end || (rot.end = flight.end);\n        rot.days|| (rot.days = numberOfDays(rot.start, rot.end) + 1); // 0 days <=> 1ON\n\n        // construct a summary (nights not repeated)\n        let dep = base[0];\n        let arr = base[0];\n        if (!rot.isComplete.startsWith('<')) {\n            dep = CONTINUATION_MARK;\n        } else if (rotFlights.length > 0) {\n            dep = rotFlights[0].dep;\n        }\n        if (!rot.isComplete.endsWith('>')) {\n            arr = CONTINUATION_MARK;\n        } else if (rotFlights.length > 0) {\n            arr = rotFlights[rotFlights.length - 1].arr;\n        }\n        rot.dep = dep;\n        rot.arr = arr;\n        rot.summary = rotSummary(rot);\n        // adjust number of nights to match number of days\n        const nightsCount = rot.nights.length;\n        const missing = rot.days - nightsCount;\n        const fillingNight = (rot.nights.length > 0) ? rot.nights[nightsCount - 1] : (dep !== CONTINUATION_MARK) ? dep : (arr !== CONTINUATION_MARK) ? arr : base[0];\n        for (let j=0; j<missing; j++) {\n            rot.nights.push(fillingNight);\n        }\n        const nightInFlight = (numberOfDays(flight.start, flight.end) === 1 || flightGMT.start.endsWith('T00:00Z'));\n        const mayNeedOptimization = (missing === 1 && nightInFlight);\n        if (mayNeedOptimization && rot.isComplete === '<>') {\n            // We have to check if we can have a better night repartition\n            [rot.nights,] = optimizeNightsRepartition(rot, rotStays);\n        }\n        \n        //outOfBase is > 0 if rot have at least one stopover out of base\n        //If not outOfBase, indemnities are zero so we reset nights\n        const outOfBase = rotFlights.reduce((a, c) => a + ((!isBase(c.dep) || !isBase(c.arr)) ? 1 : 0), 0);\n        if (outOfBase === 0) rot.nights = [];\n\n        // add countries\n        if (iataMap) rot.countries = rot.nights.map((iata) => iataMap(iata));\n        //push rot and continue\n        rots.push(rot);\n        rot = null;\n    }\n    return rots\n};\n\nexport const optimizeNightsRepartition = (rot, stays) => {\n    const nights = rot.nights;\n    const countries = rot.countries; // optional\n    if (Array.isArray(stays)) {\n        const stayTuples = stays.reduce((accumulator, current) => {\n            const index = accumulator.length - 1;\n            if (index > -1 && current === accumulator[index][0]) {\n                accumulator[index][1] += 1;\n            }else{\n                accumulator.push([current, 1]); // add a new entry\n            }\n            return accumulator;\n        }, []);\n        const nightTuples = nights.reduce((accumulator, current) => {\n            const index = accumulator.length - 1;\n            if (index > -1 && current === accumulator[index][0]) {\n                accumulator[index][1] += 1;\n            }else{\n                accumulator.push([current, 1]); // add a new entry\n            }\n            return accumulator;\n        }, []);\n        // We look for rots with 2 stays and with indentical stay length\n        // and with a diff of two nights\n        if (stayTuples.length === 2 && stayTuples[0][1] === stayTuples[1][1] && nightTuples.length === 2 && (nightTuples[1][1] - nightTuples[0][1] === 2)){\n            const optimized = [].concat(nights[0], ...nights.slice(0,-1));\n            let optimizedCountries = countries; \n            if (countries!== undefined) {\n                optimizedCountries = [].concat(countries[0], ...countries.slice(0,-1));\n            }\n            console.log(`Optimisation des nuits sur ${rot.summary} du ${rot.start.substring(0,10).split('-').reverse().join('/')}\\n(conformément à l'exemple 13 du mémento fiscal)\\n${nights} -> ${optimized}`);\n            return [optimized, optimizedCountries];\n        }\n    }\n    return [nights, countries];   \n};\n\nexport const iata2country = (iata) => {\n    const index = airportsData.indexOf(iata + ':');\n    return (index >= 0) ? airportsData.substring(index + 4, index + 6): iata;\n}\n\n// Also we ensure at build time there is no possible errors\n// due to inconsistency between airportsData, countriesData and exrData,\n// we are still handling AmountError in findAmount* functions.\nclass AmountError extends Error {};\n\nexport const findAmountEuros = (countryData, isoDate, exrData) => {\n    const [amount, currency] = findAmount(countryData, isoDate);\n    const exr = exrData[currency];\n    if (exr) {\n        const rate = parseFloat(exr[2]);\n        const euros = parseFloat((parseFloat(amount) / rate).toFixed(2));\n        return euros;\n    } else {\n        throw new AmountError(`Taux de change inconnu pour ${currency}`);\n    }\n};\n\nexport const findAmount = (countryData, isoDate) => {\n    for (const [date, currency, amount] of countryData.a) {\n        if (date.localeCompare(isoDate) <= 0) {\n            return [amount, currency];\n        }\n    }\n    if (countryData) {\n        throw new AmountError(`Pas d'indemnité définie pour ${countryData.n} au ${isoDate}`);\n    } else {\n        throw new AmountError(`Indemnité manquante`);\n    }\n};\n\nexport const addIndemnities = (taxYear, rots, taxData, tzConverter) => {\n    const results = [];\n    const countriesData = taxData.countries;\n    const exrData = taxData.exr;\n    const MC_REMOVAL = 0.5;\n    const nextYear = (parseInt(taxYear, 10) + 1).toString();\n    const previousYear = (parseInt(taxYear, 10) - 1).toString();\n    let hasError = false;\n    for (const rot of rots) {\n        const indemnities = [];\n        // check if we count all nights of if we have to substract 0.5\n        let toRemove = MC_REMOVAL; // by default remove 0.5 night\n\n        // Sum up the indemnities day by day in the rot\n        let total = 0; // default is zero if it fails\n\n        if (rot.nights.length === 0) {\n            rot.formula = WITHIN_BASE_TEXT;\n        } else if  (rot.nights.length > rot.days || rot.countries.length > rot.days) {\n            rot.formula = NIGHT_OVERFLOW_TEXT;\n            hasError = true;\n        } else {\n            // if at least one of the stopover is LC, count all nights\n            for (const country of rot.countries) {\n                const data = countriesData[country];\n                if (data && data.z !== 1) {\n                    toRemove = 0;\n                    break;\n                }\n            }\n            let taxStopCount = rot.countries.length; // taxStopCount is used to detect fiscal year truncate\n            const taxStops = rot.countries.reduce((accumulator, current) => {\n                const index = accumulator.length - 1;\n                if (index > -1 && current === accumulator[index][1]) {\n                    accumulator[index][0] += 1; // increase previous count\n                }else{\n                    accumulator.push([1, current]); // add a new entry\n                }\n                return accumulator;\n            }, []);\n            let validTaxStops = []; // used to recompute the formula after filtering stops to the current taxYear\n            let validTaxStopCount = 0; // validTaxStopCount is compared at the end with taxStopCount\n            // Apply removal to taxStops if needed\n            if (toRemove !== 0 && taxStops.length > 0){\n                taxStops[taxStops.length - 1][0] -= toRemove; //performs removal\n                taxStopCount -= toRemove;\n            }\n\n            // we need to find the date for each day of the rot\n            // to cover the case where daily tax amount change\n            let deltaDays = 0;\n            for (const [count, country] of taxStops) {\n                let validCount = count;\n                let data = countriesData[country];\n                if (data && data.f === 1) data = countriesData[\"EU\"]\n                let amount = 0; // default is zero in case of error\n                const countryIndemnities = []; // contains the extended formula with euro amounts\n                if(data) {\n                    try {\n                        const stopIndemnities = []; // we need to reverse them after the loop\n                        // detects if we need to apply MC_REMOVAL (3 > 2.5)\n                        const doRemove = Math.ceil(count) > count;\n                        //The forloop is constructed so that when i=0 we are on the last days\n                        //This is simpler to filter data for taxYear\n                        for (let i=0; i<Math.ceil(count); i++){\n                            const delta = (deltaDays - i) + Math.ceil(count) - i - 1;\n                            const isoDate = tzConverter(rot.start, delta);\n                            const year = isoDate.substring(0,4);\n                            if (year === taxYear) {\n                                const euros = findAmountEuros(data, isoDate.substring(0, 10), exrData);\n                                amount += (i===0 && doRemove) ? MC_REMOVAL * euros : euros;\n                                stopIndemnities.push([(i===0 && doRemove) ? MC_REMOVAL : 1, findAmount(data, isoDate.substring(0, 10)).join('')]);\n                            }else if (year === nextYear && rot.isComplete === '>') {\n                                //pass\n                            }else if (year === previousYear && rot.isComplete === '<') {\n                                //pass\n                            }else{\n                                validCount -= (i===0 && doRemove) ? MC_REMOVAL : 1;\n                            }\n                            deltaDays += 1;\n                        }\n                        validTaxStopCount += validCount;\n                        if (validCount >= 0) validTaxStops.push([validCount, country]);\n                        if(stopIndemnities.length > 0) countryIndemnities.push(...stopIndemnities.reverse());\n                    } catch (err) {\n                        hasError = true;\n                        if (err instanceof AmountError) {\n                            console.error(err.message);\n                        } else {\n                            console.error(err);\n                        }\n                    }\n                } else {\n                    hasError = true;\n                    if (country.length === 2) {\n                        console.error(`Données pays manquantes pour ${country}`);\n                    } else {\n                        console.error(`Code IATA inconnu ${country}`);\n                    }\n                }\n                if(countryIndemnities.length > 0) {\n                    indemnities.push(countryIndemnities.reduce((accumulator, current) => {\n                        const index = accumulator.length - 1;\n                        if (index > -1 && current[1] === accumulator[index][1]) {\n                            accumulator[index][0] += current[0]; // increase previous count\n                        }else{\n                            accumulator.push(current); // add a new entry\n                        }\n                        return accumulator;\n                    }, []));\n                }\n                total += amount;\n            }\n            validTaxStops = validTaxStops.reduce((a, c) => {\n                if (c[0] > 0) {\n                    return a.concat([[localeFormat(c[0], {\"style\": \"decimal\", \"minFractionDigits\": 0, \"maxFractionDigits\": 1}), c[1]]]);\n                }\n                return a;\n            }, []);\n            rot.formula = validTaxStops.map(a => a.join(\" x \")).join(' + ');\n            rot.formula += (!hasError && taxStopCount !== validTaxStopCount) ? REFNOTE1 : \"\";\n            rot.formula += (hasError || taxStopCount < rot.days -MC_REMOVAL ) ? ` ${FORMULA_ERROR}` : \"\";\n            // indemnities = [[[times, amount1Stop1],[times, amount2Stop1]], [[times, amount1Stop2]])\n            const stops = [];\n            for (const stop of indemnities) {\n                const stopLocalized = stop.reduce((a, c) => {\n                    return a.concat([[localeFormat(c[0], {\"style\": \"decimal\", \"minFractionDigits\": 0, \"maxFractionDigits\": 1}), c[1]]]);\n                }, []);\n                const stopFormula = stopLocalized.map(a => a.join(' x ')).join(' + ');\n                (stop.length > 1) ? stops.push(`(${stopFormula})`) : stops.push(stopFormula);\n            }\n            rot.currencyFormula = stops.join(' + ');\n            if(validTaxStops.length <= 0 && taxStops.length !== 0 && !hasError) continue; // taxStops=0 => indemnity=0 and is valid for base only rots\n        }\n        rot.indemnity = (hasError) ? 0 : parseFloat(total.toFixed(2));\n        rot.error = hasError;\n        results.push(rot);\n    }\n    return results;\n}\n// ep5 iterable\nexport function* ep5Iterator(data){\n    for (const m of months14) {\n        const monthData = data[m];\n        if (monthData) {\n            yield* monthData.rots;\n        }\n    }\n};\n// in tests we use array to pass rots\nexport function* testIterator(data) {\n    for (const a of data) {\n        yield* a;\n    }\n};\n\nexport const mergeFlights = (flights1, flights2) => {\n    const f1 = [...flights1];\n    const f2 = [...flights2];\n    if (f2.length>0) {\n        if (f2[0].stop==='0,00' && f1.length>0) {\n            const flight2 = f2.shift();\n            const flight1 = {...f1.pop()};\n            flight1.end = flight2.end;\n            return f1.concat(flight1, [...f2]);\n        }\n    }\n    return f1.concat(f2);\n};\n//merge Rot without needing to copy the EP5 structure\nexport const mergeRots = (data, taxYear, taxData, tzConverter) => {\n    const currentIt = Array.isArray(data) ? testIterator(data) : ep5Iterator(data);\n    const nextIt = Array.isArray(data) ? testIterator(data) : ep5Iterator(data);\n    nextIt.next();\n    const mergedRots = [];\n    for (const rot of currentIt) {\n        const next = nextIt.next().value;\n        if (next && rot.isComplete === '<' && next.isComplete === '>' && rot.end.substring(0, 7) === next.end.substring(0, 7)) {\n            const [merged] = buildRots(mergeFlights(rot.flights, next.flights), {base:rot.base, tzConverter, \"iataMap\": iata2country});\n            const [mergedWithIndemnities] = addIndemnities(taxYear,[merged], taxData, tzConverter);\n            mergedRots.push(mergedWithIndemnities);\n            // skip next\n            currentIt.next();\n            nextIt.next();\n        } else {\n            mergedRots.push(rot);\n        }\n    } \n    return mergedRots;\n};\n\nexport const ep5Parser = (text, fileName, fileOrder, taxYear, taxData, base, tzConverter) => {\n    const result = {\"type\": \"ep5\", fileName, fileOrder};\n    const previousTaxYear = (parseInt(taxYear, 10) - 1).toString();\n    const nextTaxYear = (parseInt(taxYear, 10) + 1).toString();\n    let match;\n    let pattern;\n    let month;\n    let year;\n    // search EP5 Date like JANVIER 2020\n    pattern = /\\s(\\S+?)\\s+?(20\\d{2})/;\n    if (null !== (match = pattern.exec(text))) {\n        const monthIndex = EP5MONTHS.indexOf(match[1]);\n        if ( monthIndex !== -1) {\n            month = (monthIndex + 1).toString(10).padStart(2, '0');\n            year = match[2];\n        } else {\n            throw new Error('EP5 parser: Invalid month ' + match[1] + `in ${fileName}`);\n        }\n    }else{\n        throw new Error(`EP5 parser:  Date not found in ${fileName}`);\n    }\n    \n    //search EP5 for flights\n    if (month === \"01\" && year === nextTaxYear) {\n        result.date = `${taxYear}-13`;\n    }else if (month === \"12\" && year === previousTaxYear) {\n        result.date = `${taxYear}-00`;\n    } else {\n        result.date = `${year}-${month}`;\n    }\n\n    //0,00 T-77W  GSQY 0 PEK  01 00,00 CDG  01 04,03\n    //Ce pattern ne prend pas les simus\n    //1 : temps d'arrêt précédent 0,00 si à cheval sur mois precedent\n    //2 : type avion ou espace si mep\n    //3 : immatriculation\n    //4 : type activité (0)\n    //5 : escale départ\n    //6 : jour départ\n    //7 : heure decimale tu départ (00,00 si début de mois)\n    //8 : escale arrivée\n    //9 : jour arrivée\n    //10: heure decimale tu arrivée  (24,00 si fin de mois et à cheval)\n    pattern = /([0-9,]+)\\s(?:.{5})\\s{2}(?:\\S{4})\\s(?:.+?)\\s(\\S{3})\\s+(\\d+)\\s+([0-9,]+)\\s+(\\S{3})\\s+(\\d+)\\s+([0-9,]+)/g;\n    const flights = [];\n    while (null !== (match = pattern.exec(text))) {\n        const [, stop, dep, depDay, depTime, arr, arrDay, arrTime] = match;\n        flights.push({stop, dep, \"start\": `${year}-${month}-${depDay}T${ep5Time2iso(depTime)}`, arr, \"end\": `${year}-${month}-${arrDay}T${ep5Time2iso(arrTime)}`});\n    }\n    // in case of multiple EP5 pages, ensure flights are sorted by start date\n    const sortedFlights = flights.sort((a, b) => a.start.localeCompare(b.start))\n    let rots = buildRots(sortedFlights, {base, tzConverter, \"iataMap\": iata2country});\n    rots = addIndemnities(taxYear, rots, taxData, tzConverter);\n    result.rots = rots;\n    return result;\n};","import { writable, readable, derived} from 'svelte/store';\nimport {iso2FR, mergeRots} from './parsers/ep5Parser';\n\nexport const BASES = [\n    {label: \"Marseille\", selected: false, value: ['MRS'], tzConverter: iso2FR},\n    {label: \"Nice\", selected: false, value: ['NCE'], tzConverter: iso2FR},\n    {label: \"Paris\", selected: true, value: ['CDG', 'ORY'], tzConverter: iso2FR},\n    {label: \"Toulouse\", selected: false, value: ['TLS'], tzConverter: iso2FR}\n].sort((a, b) => (a.label.localeCompare(b.label)));\n\nexport const DATASET = [\n    {label: \"2021\", selected: false, url: \"./data/data2020.json\"},\n    {label: \"2020\", selected: true, url: \"./data/data2020.json\"},\n    {label: \"2019\", selected: false, url: \"./data/data2019.json\"},\n    {label: \"2018\", selected: false, url: \"./data/data2018.json\"}\n].sort((a, b) => (b.label.localeCompare(a.label)));\n\nconst defaultYear = DATASET.filter(option => option.selected).pop().label;\n\nexport const base = writable(BASES.filter(option => option.selected).pop().value);\nexport const tzConverter = writable(BASES.filter(option => option.selected).pop().tzConverter);\n\nfunction resettable(resetValue) {\n    const { subscribe, set, update } = writable(resetValue);\n    return {\n        subscribe,\n        set,\n        update,\n        reset: () => set((typeof resetValue === 'object') ? {...resetValue} : Array.isArray(resetValue) ? [...resetValue] : resetValue)\n    };\n}\n\nconst patchLog = () => {\n    const { subscribe, set, update } = writable(new Array());\n    const push = (store, type, values) => store.push({type, values });\n    let nativeConsoleLog, nativeConsoleError;\n    if (typeof window !== \"undefined\" && console) { // patch only in browser\n        nativeConsoleLog = console.log;\n        nativeConsoleError = console.error;\n    }\n    const newConsoleLog = function () {\n        update((theStore) => {\n            push(theStore, 'log', [...arguments]);\n            return theStore;\n        });\n        if (nativeConsoleLog && console) nativeConsoleLog.apply(console, arguments);\n    };\n    const newConsoleError = function () {\n        update((theStore) => {\n            push(theStore, 'error', [...arguments]);\n            return theStore;\n        });\n        if (nativeConsoleError && console) nativeConsoleError.apply(console, arguments);\n    };\n    if (typeof window !== \"undefined\" && console) {\n        console.log = newConsoleLog;\n        console.error = newConsoleError;\n    }\n    return {\n        subscribe,\n        'log': newConsoleLog,\n        'error': newConsoleError,\n        'reset': () => set(new Array())\n    }\n}\n\nexport const log = patchLog();\nexport const ep5 = resettable({type: \"ep5\"});\nexport const paySlips = resettable({type: \"pay\"});\nexport const nuiteesInput = resettable();\nexport const nuiteesAF = resettable();\n\nconst empty = () => {\n    ep5.reset();\n    paySlips.reset();\n    log.reset();\n    nuiteesInput.reset();\n    nuiteesAF.reset();\n}\n\nexport const taxYear = writable(defaultYear);\nexport const taxData = derived(taxYear, ($taxYear, set) => {\n    //set(undefined);\n    empty();\n    fetch(DATASET.filter(option => option.label === $taxYear).pop().url)\n    .then(res => res.json())\n    .then(data => set(data));\n}, undefined);\n\nexport const pairings = derived(\n    [ep5, taxYear, taxData, tzConverter],\n    ([$ep5, $taxYear, $taxData, $tzConverter]) => {\n        if ($taxData === undefined) return [];\n        return mergeRots($ep5, $taxYear, $taxData, $tzConverter);\n    }\n);\nexport const fraisDeMission = derived(pairings, $pairings => Object.values($pairings).reduce((a, c) => a + c.indemnity, 0).toFixed(0));\n\nexport const online = readable({}, set => {\n    const update_network_status = () => {\n        set(navigator.onLine);\n    };\n\n    if (\n        (typeof navigator !== \"undefined\") &&\n        'onLine' in navigator\n    ) {\n        update_network_status();\n        window.addEventListener('offline', update_network_status);\n        window.addEventListener('online', update_network_status);\n    } else {\n        set(undefined);\n    }\n\n    return () => {\n        if (\n            (typeof navigator !== \"undefined\") &&\n            'onLine' in navigator\n        ) {\n            window.removeEventListener('offline', update_network_status);\n            window.removeEventListener('online', update_network_status);\n        }\n    };\n});\n\nexport const route = readable(null, set => {\n    let myTimeOut;\n    const hashchange = (e) => {\n        set(window.location.hash.substr(1) || \"/\");\n    };\n    hashchange();\n    window.addEventListener('hashchange', hashchange);\n\n    return () => {\n        window.removeEventListener('hashchange', hashchange);\n    };\n});\n\n","<script context=\"module\">\n    import {writable} from 'svelte/store';\n    export const viewLog = writable(false);\n    import {fade} from 'svelte/transition';\n</script>\n\n<script>\n    import { log } from \"../stores\";\n\n    const text2html = (text) => text.replace(/\\n/g, \"<br/>\");\n    const renderText = (text) => `<p>${text2html(text)}</p>`;\n    const renderStyledText = (logEvent) => {\n        const styles = logEvent.values.slice(1);\n        const message = logEvent.values[0];\n        const markerCount = message.match(/%c/g).length;\n        styles.length = markerCount;\n        const results = [];\n        const changeStyleColor = (text) => {\n            return text\n                .replace('color: darkorange;', 'color: var(--maximum-yellow-red);')\n                .replace('color: red;', 'color: var(--redaf);')\n                .replace('color: black;', 'color: var(--blueaf);')\n        }\n        for (const [i, text] of Object.entries(message.split(\"%c\"))) {\n            if (i > 0)\n                results.push(\n                    `<span style=\"${changeStyleColor(styles[i - 1])}\">${text2html(text)}</span>`\n                );\n        }\n        return `<p>${results.join(\"\")}</p>`;\n    };\n    const describe = (value) => {\n        if (value instanceof Error) {\n            return value.message;\n        } else if (\n            Object.prototype.toString.call(value) === \"[object String]\"\n        ) {\n            return value.toString();\n        } else if (value.toString) {\n            return value.toString();\n        } else {\n            return \"alerte visible dans la console du navigateur\";\n        }\n    };\n    const renderLogEvent = (logEvent) => {\n        try {\n            const results = [];\n            if (!Array.isArray(logEvent.values) || logEvent.values.lenght === 0)\n                return \"\";\n            if (Object.prototype.toString.call(logEvent.values[0]) === \"[object String]\" && logEvent.values[0].includes(\"%c\")) {\n                results.push(renderStyledText(logEvent));\n            } else {\n                for (const value of logEvent.values) {\n                    results.push(renderText(describe(value)));\n                }\n            }\n            return `<li class=\"${logEvent.type}\">${results.join(\"\")}</li>`;\n        } catch (err) {\n            return `<li class=\"error\"><p>Erreur dans la console: ${err.message}</p></li>`;\n        }\n    };\n    const clear = () => {\n        log.reset();\n        $viewLog = false;\n    };\n    const scrollToBottom = (node) => {\n        node.scrollTop = node.scrollHeight;\n    };\n\n</script>\n\n<style>\n    .window-wrapper {\n        width: 60ch;\n        max-width: 100%;\n        height: 50%;\n        position: fixed;\n        right: 0px;\n        z-index: 15;\n        opacity: 0.96;\n    }\n    .window {\n        height: 100%;\n        background: var(--background-color);\n        border: 3px solid var(--blueaf);\n        border-top: none;\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        overflow: auto;\n        border-bottom-left-radius: 5px;\n        border-bottom-right-radius: 5px;\n    }\n    .head {\n        background: var(--blueaf);\n        color: var(--background-color);\n        display: flex;\n        flex: 0 0 auto;\n        align-items: center;\n        padding: 5px 3px 5px 12px;\n        border-top-left-radius: 5px;\n        border-top-right-radius: 5px;\n    }\n    .head button {\n        margin: 0 0 0 20px;\n        padding: 0.2em 0.3em;\n    }\n\n    :global(.console) {\n        font-family: monospace;\n        font-size: small;\n        display: flex;\n        flex-direction: column;\n        min-height: min-content; /* needs vendor prefixes */\n    }\n    :global(.console ol){\n        list-style: none;\n        counter-reset: console-counter;\n        padding-inline-start: 0px;\n    }\n    :global(.console ol li) {\n        counter-increment: console-counter;\n        position: relative;\n    }\n    :global(.console ol li::before) {\n        content: counter(console-counter);\n        font-weight: bold;\n        font-size: 1rem;\n        right: 7px;\n        position: absolute;\n        top: 0;\n        color: rgba(var(--blueaf_rgb), 0.2);\n    }\n    :global(.console p, .console ol) {\n        margin-block-end: 0px;\n        margin-block-start: 0px;\n    }\n    :global(.console li) {\n        /* log & error */\n        padding: 5px 10px;\n        border-bottom: 1px solid #eee;\n    }\n    :global(.console .error) {\n        background-color: #ff000008;\n        color: var(--redaf);\n    }\n</style>\n{#if $viewLog}\n<div class=\"window-wrapper\" transition:fade=\"{{duration: 200}}\">\n    <div class=\"head\">\n        <div>Alertes reçues</div>\n        <button on:click={clear}>Effacer</button>\n        <span class=\"flexspace\" />\n        <button on:click={() => ($viewLog = false)}><b>Ｘ</b></button>\n    </div>\n    <div class=\"window\" use:scrollToBottom>\n        <div class=\"console\"><ol>\n            {#each $log as logEvent}\n                {@html renderLogEvent(logEvent)}\n            {/each}\n        </ol></div>\n    </div>\n</div>\n{/if}","<script>\n    import FlagSignifier from '../components/FlagSignifier.svelte';\n    import Link from '../components/Link.svelte';\n    import {htmlLogo, Deferred} from '../components/utils';\n    const fontObserver = (document.fonts) ? document.fonts.load(\"3em Abril Fatface\") : (new Deferred()).resolve(true);\n    import { fly } from 'svelte/transition';\n    import { viewLog } from '../components/LogWindow.svelte';\n</script>\n\n<main>\n    <div class=\"blockquote-wrapper\">\n        <div class=\"logo\">{@html htmlLogo}</div>\n        {#await fontObserver then value}\n        <div class=\"blockquote\" in:fly={{ x: ($viewLog) ? 0 : 600, duration: ($viewLog) ? 0 : 1000 }}>\n            <h1>\n                Simplifier <span style=\"color:var(--blueaf)\">les impôts des pilotes</span> en respectant <span style=\"color:var(--blueaf)\">la confidentialité.</span>\n            </h1>\n            <h4>&mdash;@flyingeek<br><em>pilote de ligne</em></h4>\n        </div>\n        {/await}\n    </div>\n\n    <section>\n        <FlagSignifier title=\"Un outil simple et rapide\">\n            <svg slot=\"icon\" width=\"47px\" height=\"47px\" viewBox=\"0 0 512 512\">\n                <rect x=\"27.689\" y=\"181\" width=\"58.8\" height=\"30\"/>\n                <rect x=\"27.689\" y=\"301\" width=\"58.8\" height=\"30\"/>\n                <rect y=\"241\" width=\"86.49\" height=\"30\"/>\n                <path d=\"M314.244,58.245c-109.042,0-197.755,88.713-197.755,197.755s88.712,197.755,197.755,197.755S512,365.042,512,256\n                    S423.287,58.245,314.244,58.245z M314.244,423.755c-92.5,0-167.755-75.255-167.755-167.755S221.744,88.245,314.244,88.245\n                    C406.745,88.245,482,163.5,482,256S406.745,423.755,314.244,423.755z\"/>\n                <polygon points=\"323.93,263.454 323.93,166.557 293.93,166.557 293.93,279.313 371.238,331.996 388.133,307.205\"/>\n            </svg>\n\n            <ol slot=\"content\">\n                <li>Récupérez vos EP4/EP5 et vos bulletins de salaire sur <Link href=\"https://www.mypeopledoc.com\">MyPeopleDoc</Link></li>\n                <li>Choisissez l’année en haut à droite sur <b>{@html htmlLogo}</b></li>\n                <li>Déposez vos fichiers dans <a href=\"#/mission\" >Frais de Mission</a>\n                    ou dans <a href=\"#/pay\" >Salaire</a></li>\n            </ol>\n\n        </FlagSignifier>\n        <FlagSignifier title=\"Une confidentialité préservée\">\n            <svg slot=\"icon\" width=\"47px\" height=\"47px\" viewBox=\"0 0 47 47\">\n                <path d=\"M34.451,18.851v-7.893C34.451,4.915,29.539,0,23.497,0c-6.04,0-10.952,4.915-10.952,10.958v7.893H7.471V47h32.059V18.851\n                H34.451z M18.026,10.958c0-3.023,2.452-5.481,5.47-5.481s5.47,2.458,5.47,5.481v7.893h-10.94V10.958z M21.817,41.934l-10.171-7.216\n                l3.188-5.985l7.277,6.119l10.479-10.27l2.761,4.82L21.817,41.934z\"/>\n            </svg>\n            <p slot=\"content\">Inutile de partager son calendrier ou d’envoyer des données sur Internet&#8239;: <b>{@html htmlLogo}</b> \n                fonctionne directement dans votre navigateur, aucun fichier n’est transmis sur le réseau, aucune donnée n’est collectée. </p>\n        </FlagSignifier>\n        <FlagSignifier title=\"Des sources fiables\">\n            <svg slot=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <ellipse cx=\"12\" cy=\"5\" rx=\"9\" ry=\"3\"></ellipse>\n                <path d=\"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3\"></path>\n                <path d=\"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5\"></path>\n            </svg>\n            <div slot=\"content\">\n                <p>Chaque année <b>{@html htmlLogo}</b> récupère les données à la source&#8239;: le montant des indemnités provient du\n                    <strong>Ministère de l’Économie</strong>, les taux de change sont ceux de la <strong>Banque de France</strong>,\n                    le forfait Euro est calculé en fonction des dernières informations de <strong>l’URSSAF</strong>.</p>\n                <p>Le programme en lui même inclus des tests permettant de fiabiliser les résultats \n                    et les erreurs détectées sont clairement affichées. Les exemples du <strong>Mémento fiscal du SNPL</strong>\n                    ont été utilisés pour tester et valider les résultats de l’application.</p>\n            </div>\n        </FlagSignifier>\n    </section>\n</main>\n\n<style>\n    /* For screen > 700px */\n    @media all and (min-width: 770px) {\n        .blockquote h1 {\n            font-size: 3rem;\n            line-height: 1.2;\n        }\n        .blockquote-wrapper {\n            flex-wrap: nowrap;\n            max-width: 1000px;\n            margin-left: auto;\n            margin-right: auto;\n            justify-content: left;\n        }\n        .logo {\n            margin-right: 30px; /* to emulate column gap*/\n            margin-top: 60px;\n            margin-left: 40px;\n        }\n        section {\n                padding: 0 40px;\n        }\n    }\n    div.logo {\n        font-size: 4em;\n        font-weight: 800;\n    }\n    section {\n        margin: 80px auto 0 auto;\n        max-width: 1000px;\n        text-align: justify;\n    }\n    section a {\n        white-space: nowrap;\n    }\n\n    ol {\n        list-style: none;\n        counter-reset: my-awesome-counter;\n        margin: 0;\n        padding: 0;\n    }\n    ol li {\n        counter-increment: my-awesome-counter;\n        margin-bottom: 0.5rem;\n    }\n    ol li::before {\n        content: counter(my-awesome-counter);\n        font-weight: bold;\n        font-size: 2rem;\n        margin-right: 0.5rem;\n        line-height: 2rem;\n        position: relative;\n        top: 0.3rem;\n    }\n/* center the blockquote in the page */\n:global(.blockquote-wrapper) {\n   display: flex;\n   flex-wrap: wrap;\n   /* column-gap: 30px; */ /* not yes supported by safari */\n   padding: 0 20px;\n   justify-content: center;\n}\n\n/* Blockquote main style */\n:global(.blockquote) {\n    position: relative;\n    /*font-family: 'Barlow Condensed', sans-serif;*/\n    max-width: 620px;\n    margin: 10px;\n    align-self: center;\n}\n\n/* Blockquote header */\n:global(.blockquote h1) {\n    font-family: 'Abril Fatface';\n    position: relative; /* for pseudos */\n    color: var(--redaf);\n    font-size: 2.8rem;\n    font-weight: normal;\n    line-height: 1;\n    margin: 0;\n    border: solid 2px;\n    border-color: var(--blueaf);\n    border-radius:20px;\n    padding: 25px;\n    text-transform: none;\n    text-align: left;\n}\n\n/* Blockquote right double quotes */\n:global(.blockquote h1:after) {\n    content:\"\";\n    position: absolute;\n    border: 2px solid var(--blueaf);\n    border-radius: 0 50px 0 0;\n    width: 60px;\n    height: 60px;\n    bottom: -62px;\n    left: 50px;\n    border-bottom: none;\n    border-left: none;\n    z-index: 3; \n\n}\n\n:global(.blockquote h1:before) {\n    content:\"\";\n    position: absolute;\n    width: 80px;\n    border: 6px solid var(--background-color);\n    bottom: -3px;\n    left: 50px;\n    z-index: 2;\n}\n\n/* Blockquote subheader */\n:global(.blockquote h4) {\n    position: relative;\n    color:var(--blueaf);\n    font-size: 1.3rem;\n    font-weight: 300;\n    line-height: 1.2;\n    margin: 0;\n    padding-top: 15px;\n    z-index: 1;\n    margin-left:150px;\n    padding-left:12px;\n    text-align: left;\n}\n\n:global(.blockquote h4:first-letter) {\n  margin-left:-12px;\n}\n</style>\n","export default function (urls, test, callback) {\n    let remaining = urls.length\n  \n    function maybeCallback () {\n      remaining = --remaining\n      if (remaining < 1) {\n        callback()\n      }\n    }\n  \n    if (!test()) {\n      urls.forEach(({ type, url, options = { async: true, defer: true }}) => {\n        const isScript = type === 'script'\n        const tag = document.createElement(isScript ? 'script': 'link')\n        if (url.startsWith('http') || url.startsWith('//')){\n          tag.crossOrigin = \"anonymous\";\n        }\n        let onload = true\n        if (isScript) {\n          tag.src = url\n          tag.async = options.async\n          tag.defer = options.defer\n        } else {\n            tag.href = url\n            if ('prefetch' in options){\n                tag.rel = \"prefetch\"\n                remaining -= 1\n                onload = false\n            } else if ('preload' in options) {\n                tag.rel = 'preload'\n                remaining -= 1\n                onload = false\n            } else {\n                tag.rel = 'stylesheet'\n                remaining -= 1\n                onload = false\n            }\n        }\n        if (onload) tag.onload = maybeCallback\n        document.body.appendChild(tag)\n      })\n    } else {\n      callback()\n    }\n  }","\n// decimal is text string representing a float number with two decimals like \"123.45\"\n//\n// cents is a number used to compute sum of decimals without rounding problems\n// decimal \"123.45\" is cents 12345\n//\n\n// convert a text number to a decimal (accepts \"12345,67 or 12345.67 or 12 345.67)\n// forces 2 precision digits\n// returns a string \nexport const decimal = (text) => {\n    const number = text.replace(',', '.').replace(' ', '');\n    const [left, right] = number.split(\".\");\n    return left + '.' + (right||\"00\").padEnd(2, \"0\");\n}\n// decimal to cents\n// returns a number\nexport const decimal2cents = (decimal) => {\n    const [left, right] = decimal.split(\".\");\n    return parseInt(left + (right||\"00\"), 10);\n}\n\n// cents to decimal\n// returns a string\nexport const cents2decimal = (cents) => {\n    const centsString = cents.toString(10);\n    const length = centsString.length;\n    switch (length) {\n        case 2:\n            return '0.' + centsString;\n        case 1:\n            return '0.0' + centsString;\n        default:\n            return centsString.slice(0, -2) + '.' + centsString.slice(-2);\n    }\n}\n\n// collect first group of all matches\n// returns Array of \"decimal\"\nconst matchAll = (text, re, bydefault) => {\n    const results = [];\n    let match;\n    while(null !== (match = re.exec(text))) {\n        results.push(decimal(match[1]));\n    }\n    const found = results.length;\n    if (found > 0) {\n        return results;\n    } else if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return [bydefault];\n    }\n};\n\n// returns first group of last match\n// Throws if no match found\n// returns string\nconst matchLast = (text, re, bydefault) => {\n    let match;\n    let lastMatch;\n    while (null !== (match = re.exec(text))) {\n        lastMatch = match;\n    }\n    if (lastMatch) return lastMatch[1];\n    if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return bydefault;\n    }\n};\n\nconst sum = (decimals) => cents2decimal(decimals.map(decimal2cents).reduce((a, b) => a + b));\n// Parse PaySlip\nexport const payParser = (text, fileName, fileOrder) => {\n    //console.log(text);\n    let result = {\"type\": \"pay\", fileName, fileOrder, errors: []};\n    let re = /(?:IND\\.REPAS_+|INDEMNITE REPAS_+)([\\-0-9, ]+)/g;\n    result.repas = matchAll(text, re, \"0\").map(decimal);\n    re = /(?:IND\\. TRANSPORT_+|FRAIS REELS TRANSP_+|R\\. FRAIS DE TRANSPORT_+)([\\-0-9, ]+)/g;\n    result.transport = matchAll(text, re, \"0\").map(decimal);\n    re = /(?:_I.DECOUCHERS F.PRO_+)([\\-0-9, ]+)/g;\n    result.decouchers_fpro = matchAll(text, re, \"0\").map(decimal);\n    try {\n        const net = matchAll(text, /_Mensuel_[\\-0-9, ]+_{1,2}([\\-0-9, ]+)_/g);\n        result.imposable = sum(net.map(decimal));\n        if (net.length > 1) result.errors.push({\"type\": \"warning\", \"message\":\"Plusieurs bulletins de salaire trouvés\"});\n    } catch (err) {\n        result.errors.push({\"type\": \"error\", \"message\":\"Net imposable non trouvé\"});\n        result.imposable = \"0\";\n    }\n    try {\n        result.cumul = decimal(matchLast(text, /_Annuel_[\\-0-9, ]+_{1,2}([\\-0-9, ]+)_/g));\n    } catch (err) {\n        result.errors.push({\"type\": \"error\", \"msg\":\"Cumul Net imposable non trouvé\"});\n        result.cumul = \"0\";\n    }\n    try {\n        result.date = matchLast(text, /PERIODE DU \\d{2}\\/(\\d{2}\\/\\d{4})/g).split('/').reverse().join('-');\n        if(result.date.endsWith(\"00\")) throw new Error(`Date invalide: ${result.date}`);\n    } catch (err) {\n        throw new Error(`Date non trouvée`);\n    }\n    return result;\n}","// returns first group of first match\n// Throws if no match found\n// returns string\nexport const matchFirst = (text, re, bydefault) => {\n    let match;\n    if (null !== (match = re.exec(text))) {\n        return match[1];\n    }\n    if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return bydefault;\n    }\n};\n\n// Parse Attestation de décompte des nuitées AF\nexport const nightsAFParser = (text, fileName, fileOrder, taxYear) => {\n    let result = {\"type\": \"nights\", fileName, fileOrder, errors: []};\n    let total;\n    try {\n        total = matchFirst(text, /compte s'élève à:\\s([\\-0-9,. ]+)\\sEuros/);\n        total = parseFloat(total.replace(/\\s+/g, '').replace(',', '.'));\n    }catch(err) {\n        result.errors.push({\"type\": \"error\", \"message\":\"Montant des nuitées AF non trouvé\"})\n    }\n    result.total = total;\n    result.date = taxYear;\n    return result;\n};","import {payParser} from \"./payParser\";\nimport {ep5Parser} from \"./ep5Parser\";\nimport {nightsAFParser} from \"./nightsAFParser\";\n\n// Based on PDF text content, performs task(s)\n// Return array of result\nexport const router = (text, fileName, fileOrder, taxYear, taxData, base, tzConverter) => {\n    const results = [];\n    if (text.match(/BULLETIN DE PAIE_(AIR FRANCE|BASE)/)) {\n        try  {\n            const result = payParser(text, fileName, fileOrder);\n            if (result.errors) {\n                for (const error of result.errors) {\n                    results.push({\"type\": error.type, \"msg\": error.message, fileName, fileOrder, \"content\": text});\n                }\n            }\n            results.push(result);\n        } catch (err) {\n            results.push({\"type\": \"error\", \"msg\":`${err.message}`, fileName, fileOrder, \"content\": err});\n        }\n    }else{\n        const isNuiteesAF = text.indexOf(`ATTESTATION DE DECOMPTE DES NUITEES POUR L'ANNEE ${taxYear}`) !== -1;\n        if(text.indexOf('CARNET _DE _VOL _- _EP _5')!== -1) {\n            if(isNuiteesAF) {\n                results.push(nightsAFParser(text, fileName, fileOrder, taxYear));\n            }else{\n                results.push(ep5Parser(text, fileName, fileOrder, taxYear, taxData, base, tzConverter));\n            }\n        }else if(isNuiteesAF) {\n            results.push(nightsAFParser(text, fileName, fileOrder, taxYear));\n        }\n    }\n    if (results.length === 0) {\n        if(text.indexOf(\"ATTESTATION DE DECOMPTE DES NUITEES POUR L'ANNEE \") !== -1) {\n            results.push({\"type\": \"warning\", \"msg\":`type [nuitées] mais année ≠ ${taxYear}`, fileName, fileOrder, \"content\": text})\n        } else {\n            results.push({\"type\": \"error\", \"msg\":\"fichier non reconnu\", fileName, fileOrder, \"content\": text});\n        }\n    }\n    return results;\n}\n","<script context=\"module\">\n    import loader from \"./async-script-loader.js\";\n    import { Deferred } from \"./utils.js\";\n    import { onMount} from \"svelte\";\n    import {nuiteesAF} from '../stores';\n    const pdfjsWorkerSrc = \"CONF_PDFJS_WORKER_JS\";\n    let pdfWorker;\n    let seqOrder = 0;\n    const preloadFiles = [\n        { type: \"script\", url: \"CONF_PDFJS_JS\" }\n    ];\n\n    const getPageText = async (pdf, pageNo, separator = \"\") => {\n        const page = await pdf.getPage(pageNo);\n        const tokenizedText = await page.getTextContent();\n        return tokenizedText.items.map((token) => token.str).join(separator);\n    };\n\n    const getPDFText = async (source, separator = \"\") => {\n        const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n        const pdfPages = [];\n        const pdf = await pdfjsLib.getDocument(source).promise;\n        const maxPages = pdf.numPages;\n        for (let pageNo = 1; pageNo <= maxPages; pageNo += 1) {\n            const pageText = await getPageText(pdf, pageNo, separator);\n            pdfPages.push(pageText);\n        }\n        return pdfPages.join(\"\\n\");\n    };\n</script>\n\n<script>\n    import {taxYear, taxData, base, tzConverter, ep5, paySlips} from '../stores';\n    import {router} from '../parsers/router';\n    const acceptedType = 'application/pdf'; \n    let disabled = false; // locally during file processing\n    let ready = new Deferred();\n    let name = \"file\";\n    let dropzoneHasFocus = false;\n\n    function preload() {\n        loader(\n            preloadFiles,\n            () => !!window[\"pdfjs-dist/build/pdf\"],\n            () => {\n                const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n                pdfjsLib.GlobalWorkerOptions.workerSrc = pdfjsWorkerSrc;\n                if (!pdfWorker || pdfWorker.destroyed) {\n                    pdfWorker = new pdfjsLib.PDFWorker({verbosity: 0});\n                }\n                ready.resolve(true);\n            }\n        );\n    }\n    class Warning extends Error {};\n\n    const getPDF = (file, fileName) => {\n        const reader = new FileReader();\n        return new Promise((resolve, reject) => {\n            reader.onload = (ev) => {\n                if (!pdfWorker || pdfWorker.destroyed) {\n                    const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n                    pdfWorker = new pdfjsLib.PDFWorker({verbosity: 0});\n                }\n                getPDFText({ data: ev.target.result , verbosity: 0, worker: pdfWorker}, \"_\").then(\n                    (text) => {\n                        if (text) {\n                            resolve(text);\n                        } else {\n                            const err = new Warning(`%c${fileName}\\n%cabsence de texte dans le PDF`);\n                            reject(err);\n                        }\n                    },\n                    (err) => reject(err)\n                );\n            };\n            reader.onerror = (err) => {\n                reject(new Warning(`%c${fileName}\\n%cfichier illisible !`));\n            };\n            reader.readAsArrayBuffer(file);\n        });\n    };\n    async function processFiles(files, target) {\n        disabled = true;\n        await ready.promise.then(() => {\n            const promises = [];\n            const basename = (file) => file.name.split(/([\\\\/])/g).pop();\n            let batchPaySlips = {};\n            let batchEp5 = {};\n            for (let i = 0; i < files.length; i++) {\n                const file = files[i];\n                if (file) {\n                    const fileName = basename(file);\n                    promises.push(\n                        getPDF(file, fileName).then((text) => {\n                            const results = router(text, fileName, i + seqOrder, $taxYear, $taxData, $base, $tzConverter);\n                            results.forEach(result => {\n                                if (result.type === 'error') {\n                                    console.log(`%c${fileName}\\n%c${result.msg}`, 'font-family: monospace;', 'color: red;');\n                                    //console.log(result);\n                                    return;\n                                } else if (result.type === 'warning') {\n                                    console.log(`%c${fileName}\\n%c${result.msg}`, 'font-family: monospace;', 'color: darkorange;');\n                                    return;\n                                } else {\n                                    const [year, month] = result.date.split('-');\n                                    if (year !== $taxYear) {\n                                        console.log(`%c${fileName}\\n%ctype [${result.type}] %cannée ${year} iso ${$taxYear}`, 'font-family: monospace;', 'color: black;', 'color: darkorange;');\n                                        return;\n                                    }\n                                    if (result.type === \"pay\") {\n                                        Object.assign(batchPaySlips, {[month]: result}); // this method of saving result does not refresh svelte\n                                    }else if (result.type === \"ep5\") {\n                                        Object.assign(batchEp5, {[month]: result}); // this method of saving result does not refresh svelte\n                                    }else if (result.type === \"nights\") {\n                                        $nuiteesAF = result.total;\n                                    }\n                                }\n                            });\n                        }).catch((err) => (err instanceof Warning) ? console.log(err.message, 'font-family: monospace;', 'color: red;') : console.error(err))\n                    );\n                }\n            }\n            seqOrder += files.length;\n            const afterLoad = () => {\n                disabled = false;\n                if (target) target.value = null; // reset file input\n                paySlips.update((theStore) => {\n                    return Object.assign(theStore, batchPaySlips);\n                });\n                batchPaySlips = {};\n                ep5.update((theStore) => {\n                    return Object.assign(theStore, batchEp5);\n                });\n                batchEp5 = {};\n            };\n            Promise.all(promises)\n                .then(() => {\n                    afterLoad();\n                }).catch((err) => {\n                    //should never be there but...\n                    afterLoad();\n                    console.error(err);\n                });\n        });\n    }\n    async function processChange(event) {\n        processFiles(event.target.files, event.target);\n    }\n\n    async function processDrop(event) {\n        dropzoneHasFocus = false;\n        disabled = true;\n        const files = [];\n        async function* getEntriesAsAsyncIterator(dirEntry) {\n            const reader = dirEntry.createReader();\n            const getNextBatch = () =>\n                new Promise((resolve, reject) => {\n                    reader.readEntries(resolve, reject);\n                });\n            let entries;  \n            do {\n                entries = await getNextBatch();\n                for (const entry of entries) {\n                    if (entry.isFile) yield entry;\n                }\n            } while (entries.length > 0);\n        }\n        async function fileAsPromise(entry) {\n            return new Promise((resolve, reject) => {\n                entry.file(resolve, reject);\n            });\n        }\n        const entries = [...event.dataTransfer.items].map(item => item.webkitGetAsEntry());\n        for (const entry of entries) {\n            if (entry.isDirectory) {\n                for await (const e of getEntriesAsAsyncIterator(entry)) {\n                    const file = await fileAsPromise(e);\n                    files.push(file);\n                }\n            } else {\n                const file = await fileAsPromise(entry);\n                files.push(file);\n            }\n        }\n        if ((acceptedType !== undefined && acceptedType !== null)) {\n            const isFirefox = navigator && navigator.userAgent && navigator.userAgent.indexOf(\"Firefox\") > -1;\n            processFiles(files.filter(f => f.type === acceptedType || (f.type === '' && isFirefox)));\n        } else {\n            processFiles(files);\n        }\n    }\n    onMount(async () => preload())\n</script>\n\n<!-- <svelte:window on:load={preload}/> -->\n<style>\n\n:global(.dropzone) {\n  border: 2px dashed var(--blueaf);\n  border-radius: 5px;\n  background: var(--dropzone-background-color);\n  width: 80%;\n  margin: 0 auto 2em auto;\n  position: relative;\n}\n:global(.dropzone figure) {\n    width: 60px;\n    height: 60px;\n    display: block;\n    margin: 0 auto;\n}\n:global(.dropzone figure svg) {\n    width: 100%;\n    height: 100%;\n    opacity: 0.5;\n}\n:global(.dropzone figure svg use) {\n    width: 100%;\n    height: 100%;\n}\n:global(.dropzone input[type=file]) {\n    opacity: 0;\n    overflow: hidden;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    z-index: 1;\n}\n:global(.dropzone label) {\n    z-index: -1;\n}\n:global(.dropzone.focus){\n    border-color: var(--green);\n}\n:global(.dropzone.focus svg){\n    fill:var(--green);\n    opacity: 1;\n}\n:global(.dropzone.focus input[type=file]:disabled + label svg) {\n    fill:var(--redaf);\n    opacity: 1;\n}\n:global(.dropzone input[type=file]:hover) {\n    cursor: pointer;\n}\n:global(.dropzone input[type=file]:disabled) {\n    cursor: not-allowed;\n}\n:global( .dropzone div[slot]) {\n    padding: 20px\n}\n:global(.dropzone div[slot=top]) {\n    text-transform: uppercase;\n    font-weight: 200;\n    font-size: 1.5rem;\n}\n:global(.dropzone div[slot=top] strong) {\n    font-weight: 200;\n}\n</style>\n<div class=\"dropzone\" class:focus={dropzoneHasFocus}>\n    {#if false}<slot />{/if}\n    <input\n    id={name}\n    {name}\n    type=\"file\"\n    multiple\n    accept=\"{acceptedType}\"\n    disabled={disabled || !$taxData}\n    on:change={processChange}\n    on:click|once={preload}\n    on:drop|preventDefault={processDrop}\n    on:dragenter={() => dropzoneHasFocus = true}\n    on:dragleave={() => dropzoneHasFocus = false}\n    />\n    <label for={name}>\n        <slot name=\"top\"></slot>\n        <figure>\n            <svg><use xlink:href=\"#upload\"/></svg>\n        </figure>\n        <slot name=\"bottom\"></slot>\n    </label>\n\n</div>\n","<script>\n    import {months, monthsfr} from \"./utils\";\n    import {taxYear, tzConverter} from '../stores';\n    export let data = [];\n    export let name = \"Mois\";\n    let nameLabel;\n    const label = (month) => {\n        switch(month) {\n            case \"13\":\n                return \"01\"\n            case \"00\":\n                return \"12\"\n            default:\n                return month;\n        }\n    };\n    const computeNameLabel = (requested) => {\n        const year = $taxYear;\n        if (!year) return name;\n        if (data.type===\"ep5\") {\n            const prev = (parseInt(year, 10) -1).toString();\n            const next = (parseInt(year, 10) +1).toString();\n            return `${name} de ${monthsfr[11]} ${prev} à ${(requested.length>13) ? monthsfr[0] + ' ' + next : monthsfr[11] + ' ' + year}`;\n        } else {\n            return `${name} de ${monthsfr[0]} ${year} à ${monthsfr[11]} ${year}`;\n        }\n    }\n    const computeRequestedMonths = (dat) => {\n        if (dat.type===\"ep5\") {\n            const tz = ($tzConverter)  ? $tzConverter(\"2020-11-01T00:00Z\").slice(-6) : \"+01:00\";\n            let requestedMonthsDefault;\n            if (tz === \"+00:00\") {\n                requestedMonthsDefault = months.map(m => [m, true]);\n            }else if (tz[0] === '+'){\n                requestedMonthsDefault = ['00', ...months].map(m => [m, true]); // TODO this is the only one working in the logic below\n            }else {\n                requestedMonthsDefault = [...months, '13'].map(m => [m, true]);\n            }\n            let requested = [];\n            if (Object.keys(dat).length === 1) { //key type is always present\n                requested = [...requestedMonthsDefault];\n            }else{\n                for (let i=0; i < 14; i++) {\n                    const m = i.toString().padStart(2, '0');\n                    const n = (i + 1).toString().padStart(2, '0');\n                    const p = (i - 1).toString().padStart(2, '0');\n                    if (dat[n]&& dat[n].rots && dat[n].rots.length > 0 && dat[n].rots[0].isComplete===\">\"){\n                        requested.push([m, false]);\n                    }else if (dat[p] && dat[p].rots && dat[p].rots.length > 0 && dat[p].rots[dat[p].rots.length - 1].isComplete===\"<\"){\n                        requested.push([m, false]);\n                    }else if (i!==13){\n                        requested.push([m, true]);\n                    }else if (i===13 && dat[m] !== undefined){\n                        requested.push([m, true]); \n                    }\n                }\n            }\n            nameLabel = computeNameLabel(requested);\n            return requested;\n        }else{\n            nameLabel = computeNameLabel();\n            return months.map(m => [m, false]);\n        }\n    };\n    $: requestedMonths = computeRequestedMonths(data);\n</script>\n<div>\n    <div>{nameLabel}<slot></slot></div>\n    <ul>\n    {#each requestedMonths as [month, optional]}\n    <li class:loaded=\"{data[month] !== undefined}\" class:optional=\"{optional === true}\">{label(month)}</li>\n    {/each}\n    </ul>\n</div>\n\n<style>\n    ul {\n        display: block;\n        margin: 0.5em 0 0 0;\n        padding: 0;\n    }\n    li {\n        --size: 2em;\n        display: inline-block;\n        border-radius: 5px; /*50%;*/\n        width: var(--size);\n        height: var(--size);\n        line-height: var(--size);\n        text-align: center;\n        background-color:var(--redaf);\n        color: var(--white);\n        margin: 2px 5px;\n    }\n    li.loaded {\n        background-color: var(--green) !important;\n    }\n    li.optional {\n        background-color: var(--color);/*orange;*/\n    }\n</style>","<script>\n    import {localeRate, localeDateFormat, localeCurrency} from './utils';\n    import {taxData, pairings} from '../stores';\n    export let tableId = \"Indemnities\";\n\n    function* getCountriesData(dat){\n        const list = [\"EU\"]; // add forfait EU\n        for (const rot of dat) {\n            list.push(...rot.countries);\n        }\n        const sortedList = Array.from(new Set(list)).sort((a, b) => a.localeCompare(b));\n        for (const key of sortedList) {\n            for (const countryData of getData(key)){\n                yield countryData;\n            }\n        };\n    };\n\n    function* getData(key) {\n        const value = $taxData.countries[key];\n        const amounts = (value.f === 1) ? $taxData.countries[\"EU\"].a : value.a;\n        for (const [validity, currency, amount] of amounts) {\n            const [startRate, endRate, averageRate] = $taxData.exr[currency];\n            yield {\n                \"name\": (key === \"EU\") ? value.n + \"¹\" : value.n,\n                \"code\": key,\n                validity,\n                amount,\n                currency,\n                startRate,\n                endRate,\n                averageRate,\n                \"euros\": (parseFloat(amount) / averageRate).toFixed(2),\n                \"zone\": (key === \"EU\") ? \"\" : (value.z === 1) ? \"Moyen\": \"Long\"\n            };\n        } \n\n    };\n    $: countriesData = ($taxData) ? [...getCountriesData($pairings)] : [];\n</script>\n\n{#if countriesData.length > 1}\n<table id={tableId} class=\"data\">\n    <thead>\n        <tr><th colspan=\"9\">Indemnités par pays {$taxData.year} </th></tr>\n        <tr><th colspan=\"2\">Pays</th><th>Validité</th><th>Montant</th><th>Taux</th><th>Taux</th><th>Taux moyen</th><th>Montant €</th><th>Zone</th></tr>\n        <tr><td colspan=\"2\"></td><td>(à compter du)</td><td></td><td>31/12/{parseInt($taxData.year, 10) - 1}</td><td>31/12/{$taxData.year}</td><td></td><td></td><td></td></tr>\n    </thead>\n    <tbody>\n        {#each countriesData as c}\n            <tr>\n                <td>{c.code}</td>\n                <td>{(c.name.length <= 21) ? c.name : c.name.substring(0, 20) + '…'}</td>\n                <td>{localeDateFormat(c.validity)}</td>\n                <td>{`${c.amount} ${c.currency}`}</td>\n                <td>{localeRate(c.startRate)}</td>\n                <td>{localeRate(c.endRate)}</td>\n                <td>{localeRate(c.averageRate)}</td>\n                <td>{localeCurrency(c.euros)}</td>\n                <td>{c.zone}</td></tr>\n        {/each}\n    </tbody>\n    <tfoot>\n        <tr><td colspan=\"9\">1. Le forfait Euro est appliqué dans ces pays: {$taxData.zoneForfaitEuro.join(', ')}</td></tr>\n    </tfoot>\n</table>\n{/if}\n\n<style>\n\n/* Hides Taux début, Taux fin in portrait mode on iPad */\n@media (max-width: 1024px) {\n    thead th:nth-child(4), thead th:nth-child(5),\n    td:nth-child(5), td:nth-child(6) {\n        display: none;\n    }\n}\nth, td {\n    text-align: right;\n}\nthead tr:nth-child(2) th {\n    border-bottom: none;\n    padding-top: 0.5em;\n    padding-bottom: 0;\n}\nthead td {\n    border-top: none;\n    font-weight: normal;\n    font-size: x-small;\n}\nthead tr:nth-child(3) {\n    height: 0.7em;\n    line-height: 0.1em;\n    padding-top: 0;\n    padding-bottom: 0;\n}\nthead tr:nth-child(2) th:nth-child(1), tbody td:nth-child(2), td:nth-child(1) {\n    text-align: left;\n}\n</style>","<script context=\"module\">\n    import loader from \"./async-script-loader.js\";\n    import { Deferred } from \"./utils.js\";\n    const preloadFiles = [\n        { type: \"script\", url: \"CONF_JSPDF_JS\" , async: false, defer: false }\n    ];\n    const preloadFiles2 = [\n        { type: \"script\", url: \"CONF_JSPDF_TABLE_JS\", async: false, defer: false }\n    ];\n</script>\n<script>\n    import { onMount} from 'svelte';\n    let ready = new Deferred();\n    let disabled = false;\n    export let label = \"Télécharger en PDF\";\n    export let filename = \"table.pdf\";\n    export let tableIds = ['#my-table'];\n    function preload() {\n        loader(\n            preloadFiles,\n            () => !!window[\"jspdf\"],\n            () => {\n                loader(preloadFiles2, () => !!window['jspdfext'], () => {\n                    window['jspdfext'] = \"autotable\";\n                    const fontName = \"CONF_JSPDF_FONT_TTF\".split('/').pop();\n                    if (!window['jspdffont']) {\n                        fetch(\"CONF_JSPDF_FONT_TTF\")\n                        .then( async (res) => {\n                            if (res.ok) {\n                                try{ \n                                    const blob = await res.blob();\n                                    const reader = new FileReader();\n                                    reader.onload = function(event){\n                                        window['jspdffont'] = event.target.result;\n                                        const callAddFont = function () {\n                                            this.addFileToVFS(fontName, window['jspdffont']);\n                                            this.addFont(fontName, fontName.split('.').shift(), 'normal');\n                                        };\n                                        window[\"jspdf\"].jsPDF.API.events.push(['addFonts', callAddFont]);\n                                        disabled = false;\n                                        ready.resolve(true);\n                                    };\n                                    reader.onerror = () => {\n                                        disabled = true;\n                                        ready.reject(`failed to read the downloaded font ${fontName}`);\n                                    }\n                                    reader.readAsBinaryString(blob);\n                                } catch (err) {\n                                    disabled = true;\n                                    ready.reject(err);\n                                }\n                            } else {\n                                disabled = true;\n                                ready.reject(`error loading ${fontName}: ${res.statusText}`);\n                            }\n                        }, err => { /* handles fetch error like no network */\n                            disabled = true;\n                            ready.reject(err);\n                        });\n                    }else{\n                        disabled = false;\n                        ready.resolve(true);\n                    }\n                });\n            }\n        );\n    }\n\n    const download = async (e) => {\n        if (disabled) {\n            e.preventDefault();\n            e.stopPropagation();\n            return false;\n        }\n        disabled = true;\n        try {\n            await ready.promise;\n            if (tableIds.includes('MissionTable')) {\n                const table = document.getElementById(`MissionTable`);\n                const elements = table.querySelectorAll(`summary`);\n                elements.forEach(e => {\n                    e.parentNode.parentNode.innerText = e.innerText;\n                });\n            }\n            for (const tableId of tableIds) {\n                const table = document.getElementById(tableId);\n                table.classList.add(\"print\");\n            }\n            const doc = new jspdf.jsPDF({orientation: \"landscape\"});\n            for (const [i, tableId] of tableIds.entries()) {\n                doc.autoTable({ \n                    html: '#' + tableId,\n                    styles: { font: 'HelveticaUTF8'},\n                    useCss: true, showHead: 'firstPage',\n                    showFoot: 'lastPage',\n                    pageBreak: (i === 0) ? 'auto': 'avoid',\n                    includeHiddenHtml: true\n                });\n            }\n            // doc.save(e.target.download);\n            // only \"application/octet-stream\" works on ipad\n            const filename = e.target.download;\n            const blob = new Blob( [doc.output('arraybuffer', {filename})], { type: \"application/octet-stream\" });\n            if (e.target.href.startsWith('blob:')) URL.revokeObjectURL(e.target.href);\n            e.target.href = URL.createObjectURL(blob);\n            if (tableIds.includes('MissionTable')) {\n                const table = document.getElementById(`MissionTable`);\n                const elements = table.querySelectorAll(`td[title]`);\n                elements.forEach(e => {\n                    e.innerHTML = `<details><summary>${e.innerText}</summary>${e.title}</details>`;\n                });\n            }\n            for (const tableId of tableIds) {\n                const table = document.getElementById(tableId);\n                table.classList.remove(\"print\");\n            }\n        }catch(err){\n            console.error(err);\n        }\n        disabled = false;\n    };\n    onMount(async () => {\n        preload();\n    });\n</script>\n<a href=\".\" class:disabled on:click={download} download={filename}>{label}</a>\n\n<style>\n    :global(a[download]) {\n        padding: 10px;\n        background-color: var(--blueaf);\n        display: inline-block;\n        color: var(--white);\n        border-radius: 5px;\n        text-decoration: none;\n    }\n    a[download].disabled {\n        display: none;\n    }\n</style>","<script>\n    import {localeCurrency} from './utils';\n    import MissionCountries from \"./MissionCountries.svelte\";\n    import DownloadTablePDF from './DownloadTablePDF.svelte';\n    import {taxYear, taxData, pairings, fraisDeMission} from '../stores';\n    import {REFNOTE1} from '../parsers/ep5Parser';\n    export let tableId = \"MissionTable\";\n    const tableIndemnitiesId = tableId + \"Indemnities\";\n</script>\n\n{#if $pairings.length > 0}\n    <DownloadTablePDF tableIds={[tableId, tableIndemnitiesId]} filename={`fraisdemission${$taxYear}.pdf`}/>\n    <table id=\"{tableId}\" class=\"data\">\n        <thead>\n            <tr><th colspan=\"5\">Frais de Mission {$taxYear} : <strong>{$fraisDeMission} €</strong></th></tr>\n            {#if $taxYear !== $taxData.year}\n                <tr class=\"warning\"><th colspan=\"5\">Attention les montants sont basés sur les données fiscales de {$taxData.year}</th></tr>\n            {/if}\n            <tr><th>Date</th><th>Type</th><th>Description</th><th>Formule</th><th>Montant</th></tr>\n        </thead>\n        <tbody>\n            {#each $pairings as rot}\n                <tr>\n                    <td>{rot.start.substring(8,10)}/{rot.start.substring(5,7)}</td>\n                    <td>{rot.days.toString().padStart(2, ' ')} ON</td>\n                    <td>{rot.summary}</td>\n                    <!-- Do not change markup below without editing DownloadTablePDF.svelte -->\n                    <td title=\"{rot.currencyFormula}\"><details><summary>{rot.formula}</summary>{rot.currencyFormula}</details></td>\n                    <td>{localeCurrency(rot.indemnity)}</td>\n                </tr>\n            {/each}\n        </tbody>\n        <tfoot>\n            {#if $pairings.reduce((a,c) => a | c.formula.includes(REFNOTE1), false)}\n                <tr><td colspan=\"5\">1. formule tronquée pour respecter l'année fiscale</td></tr>\n            {/if}\n        </tfoot>\n    </table>\n    <MissionCountries tableId={tableIndemnitiesId}/>\n{/if}\n\n\n<style>\ntd:nth-child(5), th:nth-child(5){\n    text-align: right;\n    white-space: nowrap;\n}\ntr.warning th{\n    color: white;\n    background-color: var(--red-af);\n    text-align: center;\n}\ndetails[open] summary{\n    margin-bottom: 2px;\n}\n/* Table title*/\n:global(table.data thead tr:nth-child(1) th) {\n    text-align: center;\n    font-size: large;\n    border: none;\n    text-transform: uppercase;\n    font-weight: 300;\n    background-color: var(--table-background-color);\n}\n:global(table.data tfoot tr, tfoot td){\n    border: none;\n    font-size: small;\n}\n:global(table.data tbody td) {\n    font-family: monospace;\n    font-size: 1.3rem;\n}\n:global(table.data) {\n    margin-top: 3em;\n    color: var(--table-color);\n}\n:global(table.data th, table.data td) {\n    border-color: var(--table-border-color);\n}\n\n:global( tbody tr:nth-child(even), thead tr:nth-child(2), thead tr:nth-child(3)) {\n    background-color: var(--table-highlight-color);\n}\n:global(tbody tr:nth-child(odd)) {\n    background-color: var(--table-background-color);\n}\n:global(summary:focus){\n    outline: none;\n}\n:global(table.data.print) {\n    color: black;\n}\n:global(table.data.print tfoot tr) {\n    background-color: white;\n}\n:global(table.data.print thead tr:nth-child(1) th) {\n    background-color: white;\n}\n:global(table.data.print tbody tr:nth-child(odd)) {\n    background-color: white;\n}\n:global(table.data.print tbody tr:nth-child(even), table.data.print thead tr:nth-child(2), table.data.print thead tr:nth-child(3)) {\n    background-color: var(--light-grey);\n}\n:global(table.data.print th, table.data.print td) {\n    border-color: #ccc;\n}\n</style>\n","<script>\n    import DropZone from '../components/DropZone.svelte';\n    import MonthStatus from \"../components/MonthStatus.svelte\";\n    import MissionActivities from '../components/MissionActivities.svelte';\n    import {ep5, base, tzConverter, BASES} from '../stores';\n\n    const baseChange = (e) => {\n        // we can change base on a month to month basis, so do not empty\n        const option = BASES.filter(option => option.label === e.target.value).pop();\n        $base = option.value;\n        $tzConverter = option.tzConverter;\n    };\n</script>\n<main>\n    <div class=\"wrapper\">\n        <div class='header'>\n            <label class=\"select\">Indiquez votre base\n                <!-- svelte-ignore a11y-no-onchange -->\n                <select on:change={baseChange}>\n                    {#each Object.values(BASES) as option}\n                        <option value={option.label} selected={$base.join('') === option.value.join('')}>{option.label}</option>\n                    {/each}\n                </select>\n            </label>\n        </div>\n        \n        <DropZone>\n            <div slot=\"top\">\n                Déposez vos <strong>EP5</strong> dans la zone ou Cliquez\n            </div>\n            <div slot=\"bottom\">\n            <MonthStatus data={$ep5} name=\"EP5\" />\n            </div>\n        </DropZone>\n        <MissionActivities />\n    </div>\n</main>\n<style>\n    .header{min-height: 50px}\n    .wrapper{max-width:1200px; margin: 0 auto;}\n</style>","<script>\n    import {decimal2cents, cents2decimal} from '../parsers/payParser';\n    import { taxYear, taxData, fraisDeMission, nuiteesInput, nuiteesAF} from '../stores';\n    import {months, monthsfr, localeCurrency} from './utils';\n    import DownloadTablePDF from './DownloadTablePDF.svelte';\n    import {fade} from 'svelte/transition';\n\n    export let data;\n    export let tableId=\"PayTable\";\n    const computeTotalImposable = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? decimal2cents(data[month].imposable) : 0;\n        }\n        return cents2decimal(total);\n    };\n    const computeTotalFrais = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? sumFrais(month) : 0;\n        }\n        return cents2decimal(total);\n    };\n    const computeTotalDecouchersFPRO = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? data[month].decouchers_fpro.map(decimal2cents).reduce((a, b) => a + b): 0;\n        }\n        return cents2decimal(total);\n    };\n    const updateNuiteesInput = (real, estimated) => {\n        if (real !== undefined) {\n            $nuiteesInput = real;\n        }else if (estimated){\n            $nuiteesInput = estimated;\n        }\n    } \n\n    const sumFrais = (month) => {\n        return data[month].repas.concat(data[month].transport).map(decimal2cents).reduce((a, b) => a + b);\n    };\n\n    $: totalFrais = computeTotalFrais(data);\n    $: totalImposable = computeTotalImposable(data);\n    $: cumulImposable12 = (data[\"12\"] && data[\"12\"].cumul !== \"0\") ? cents2decimal(decimal2cents(data[\"12\"].cumul)) : undefined;\n    $: abbattement = ($taxData && $taxData.maxForfait10) ? Math.min((cumulImposable12||totalImposable)*0.1, $taxData.maxForfait10) : 0;\n    $: totalDecouchersFPRO = computeTotalDecouchersFPRO(data);\n    $: nightsCostEstimate = (Math.ceil(parseFloat(totalDecouchersFPRO) * 3.31/100) * 100).toFixed(0);\n    $: updateNuiteesInput($nuiteesAF, nightsCostEstimate);\n    $: fraisReels = parseFloat($fraisDeMission) - parseFloat($nuiteesAF || $nuiteesInput || nightsCostEstimate) - parseFloat(totalFrais);\n\n\n</script>\n{#if Object.keys(data).length > 1}\n<DownloadTablePDF tableIds={[tableId]} filename={`revenus${$taxYear}.pdf`}/>\n{#if ($fraisDeMission > 0)}\n<table class=\"data summary\" id={tableId + 'Summary'}>\n    <col class=\"col1\" />\n    <col class=\"col2\" />\n    <col class=\"col3\" />\n<thead>\n    <tr>\n        <th colspan=\"3\">Comparatif {$taxYear}</th>\n    </tr>\n    <tr>\n        <th>Nuitées AF</th>\n        <th>Frais&nbsp;de&nbsp;Mission -&nbsp;Nuitées -&nbsp;Frais&nbsp;d'emploi</th>\n        <th>Abattement de 10% plafonné</th>\n    </tr>\n    {#if $taxYear !== $taxData.year}\n    <tr class=\"warning\"><th colspan=\"3\">Attention les montants sont basés sur les données fiscales de {$taxData.year}</th></tr>\n    {/if}\n</thead>\n<tbody>\n    <tr>\n        <td>\n            <input name=\"nuitees\" type=\"number\" disabled={!!$nuiteesAF} bind:value=\"{$nuiteesInput}\" min=\"0\" step=\"100\" placeholder=\"{($nuiteesAF) ? $nuiteesAF : nightsCostEstimate}\"/>\n            {#if (!$nuiteesInput || $nuiteesInput == nightsCostEstimate)}\n            <div class=\"estimate\" transition:fade|local><small>estimation des nuitées à ±10%</small></div>\n            {/if}\n        </td>\n        <td>{$fraisDeMission} - {parseFloat($nuiteesAF || $nuiteesInput || nightsCostEstimate).toFixed(0)} - {parseFloat(totalFrais).toFixed(0)} = {fraisReels.toFixed(0)} €</td>\n        <td>{abbattement.toFixed(0)} €</td>\n    </tr>\n</tbody>\n<tfoot>\n    <tr>\n        {#if (fraisReels >= abbattement)}\n        <td colspan=\"3\">Sans tenir compte de vos autres frais, vous serez déjà gagnant de <b>{(fraisReels - abbattement).toFixed(0)} €</b> en passant aux frais réels.</td>\n        {:else}\n        <td colspan=\"3\">Il faudra que vos autres frais atteignent <b>{(abbattement - fraisReels).toFixed(0)} €</b> pour qu'une déclaration aux frais réels soit plus avantageuse.</td>\n        {/if}\n    </tr>\n</tfoot>\n</table>\n{:else}\n<p>Merci de charger vos EP4/EP5 pour afficher le comparatif</p>\n{/if}\n<table class=\"data\" id={tableId}>\n    <thead>\n        <tr><th colspan=\"5\">Détails des salaires {$taxYear}</th></tr>\n        <tr><th>Mois</th><th>Montant imposable</th><th>Cumul imposable</th><th>Frais d'emploi ¹</th><th>Découchers F PRO ²</th></tr>\n    </thead>\n    <tbody>\n        {#each months as month, i}\n            <tr>\n                <td>{monthsfr[i]}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].imposable) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].cumul) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(cents2decimal(sumFrais(month))) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].decouchers_fpro) : \"\"}</td>\n            </tr>\n        {/each}\n        <tr>\n            <th>Total</th>\n            <th>{localeCurrency(totalImposable)}</th>\n            <th></th>\n            <th>{localeCurrency(totalFrais)}</th>\n            <th>{localeCurrency(totalDecouchersFPRO)}</th>\n        </tr>\n    </tbody>\n    <tfoot>\n        <tr>\n            <td colspan=\"5\">1. Les Frais d'emploi commprennent les lignes IND.REPAS, INDEMNITE REPAS, IND. TRANSPORT, FRAIS REELS TRANSP, R. FRAIS DE TRANSPORT du bulletin de paye.</td>\n        </tr>\n        <tr>\n            <td colspan=\"5\">2. Cette colonne doit être substituée par le décompte des frais réels engagés par AF pour les nuitées.</td>\n        </tr>\n    </tfoot>\n</table>\n{/if}\n\n<style>\n    table.data.summary {\n        table-layout: fixed;\n        position: relative;\n    }\n    :global(table.data.summary tfoot td) {\n        font-size: initial;\n    }\n    .col1 {\n        width: 130px;\n    }\n    .col2 {\n        width: 50%;\n    }\n    .estimate{\n        position: absolute;\n        top: 0px;\n        left: 0px;\n    }\n    .estimate small {\n        border-radius: 2px;\n        padding: 2px;\n        display: block;\n        color: var(--background-color);\n        background-color: var(--green);\n        font-size: small;\n        width: 126px;\n        text-align: center;\n    }\n    td input {\n        margin-bottom: 0;\n        width: 120px;\n    }\n    td input:disabled {\n        color: var(--green);\n        -webkit-text-fill-color: var(--green);\n        opacity: 0.85; /*ios*/\n    }\n    tbody th { /* Total bottom line */\n        font-family: monospace;\n        font-size: 1.3rem;\n    }\n    td:not(:nth-child(1)), th:not(:nth-child(1)){\n        text-align: right;\n    }\n    td:not(:nth-child(1)) {\n        white-space: nowrap;\n    }\n    tbody > tr:nth-child(12) > td:nth-child(3){ /*cumul mois 12 */\n        font-weight: bold;\n    } \n</style>","<script>\n    import DropZone from '../components/DropZone.svelte';\n    import MonthStatus from \"../components/MonthStatus.svelte\";\n    import PayTable from '../components/PayTable.svelte';\n    import {paySlips} from '../stores';\n</script>\n<main>\n    <div class=\"wrapper\">\n        <div class=\"header\">\n        </div>\n        <DropZone>\n            <div slot=\"top\">\n                Déposez vos <strong>bulletins</strong> dans la zone ou Cliquez\n            </div>\n            <div slot=\"bottom\">\n                <MonthStatus data={$paySlips} name=\"Bulletins de salaire\">, attestation de nuitées si disponible</MonthStatus>\n            </div>\n        </DropZone>\n        <PayTable data={$paySlips}/>\n    </div>\n</main>\n<style>\n    .header{min-height: 50px}\n    .wrapper{max-width:1200px; margin: 0 auto;}\n</style>","<script>\n    import Link from '../components/Link.svelte';\n    import { htmlLogo } from '../components/utils';\n</script>\n\n## Préambule\n\nCette application a été conçue pour le PilotPad. Elle nécessite des navigateurs récents pour fonctionner&#8239;: Safari 14 iOS/Mac, Firefox 86, Chrome 87 et Microsoft Edge 87 sont compatibles.\nLes PDF utilisés ne transitent sur aucun serveur, tout est calculé localement dans votre navigateur. L’app ne collecte aucune donnée. Tout est __100 % SECURE__.\n\n## Objectifs\n\nCalculer rapidement, facilement, et sans partage de données&#8239;:\n\n- Le décompte des frais de mission, conformément à la méthodologie et aux conventions de calcul du SNPL\n- Les frais d’emploi des PN qui doivent s’ajouter aux revenus\n- Une estimation du montant des nuitées payées par AF\n- La différence entre (Frais de Mission - Nuitées - Frais d’emploi) et un abattement de 10 % plafonné\n\n## Utilisation/astuces\n\n- Vous pouvez glisser-déposer un dossier ou des fichiers\n- Vous pouvez déposer les PDF indifféremment sur la page Salaire ou la page Frais de mission\n- Le symbole ▶ signale des informations additionnelles accessibles soit au survol de la souris, soit en cliquant sur la ligne\n- Changer d’année fiscale efface les résultats\n- L’application peut être installée sur l’écran d’accueil du PilotPad\n- __{@html htmlLogo}__ peut fonctionner en mode déconnecté après avoir effectué un premier calcul\n\nEn cas d’anomalie, un pictogramme rouge apparaîtra en haut à droite, le cliquer affichera les détails. Si un message d’erreur apparaissait dans la table des résultats, merci de me contacter.\n\n## Attestation des nuitées AF\n\nAir France fournit cette attestation soit dans le pdf de l’EP4 soit dans un fichier annexe. La publication se fait en général au mois de février,\nmais un correctif est susceptible d’être diffusé jusqu’en avril. En attendant ce document, __{@html htmlLogo}__ calcule une estimée du montant\nce qui permet de donner un ordre de grandeur. L’estimation est modifiable. Une fois votre attestation reçue, vous pouvez soit indiquer son\nmontant directement, soit glisser l’attestation dans la zone de dépôt. Merci sur vos retours concernant la fiabilité de l’estimation.\n\n## Choix de la base\n\nLa base peut être modifiée pour chaque mois&#8239;: on choisit une base, on dépose les EP5 de cette base&#8239;;\non change de base et l’on peut déposer les EP5 pour cette nouvelle base. En cas d’erreur, il est possible de changer de base et de recharger un EP5.\n\nLe choix de la base se fait au-dessus de la zone de dépôt sur la page Frais de mission.\n\n## Mise à jour\n\n__{@html htmlLogo}__ détecte les mises à jour automatiquement, normalement vous n’avez rien à faire. Éventuellement, un popup peut\napparaître 👨🏻‍✈️ vous demandant d’autoriser cette mise à jour. Installer la mise à jour efface les résultats.\n\n## Données fiscales\n\nSur <Link href=\"https://github.com/flyingeek/flytax\">GitHub</Link> vous trouverez les liens vers les barèmes au format csv et tsv (Excel/Numbers) mais aussi\nles données json. En installant le code source sur votre ordinateur, vous pourrez en plus générer ces fichiers. Lors\nde la compilation de l’application, les API de la Banque de France et des impôts sont utilisées.\n\n## Crédits\n\n- Le mémento fiscal du SNPL et Bernard Pédamon pour son aide sur son interprétation\n- <Link href=\"https://github.com/mborsetti/airportsdata\">airportsdata</Link> de Mike Borsetti\n- __{@html htmlLogo}__ est développé en JavaScript à l’aide du framework SVELTE\n- Éric Delord, CDB 777, est l’auteur. Le code source est disponible sur <Link href=\"https://github.com/flyingeek/flytax\">GitHub</Link>\n\nVous pouvez me contacter sur l’email AF (erdelord@…) ou sur mon compte Twitter @flyingeek.\n","<script context=\"module\">\n    import {writable} from 'svelte/store';\n    export const swDismiss = writable(false);\n</script>\n<script>\n    import { fade } from 'svelte/transition';\n    let installLabel = 'Installer';\n    $swDismiss = false;\n    const install = (reg) => {\n        let refreshing;\n        navigator.serviceWorker.addEventListener('controllerchange', () => {\n            if (refreshing) return;\n            refreshing = true;\n            window.location.reload();\n        });\n        installLabel = \"En cours...\"\n        reg.waiting.postMessage('SKIP_WAITING');\n    }\n</script>\n\n{#await window.isSWUpdateAvailable.promise then registration}\n{#if registration && !$swDismiss}\n<div class=\"toast\" transition:fade style=\"position: fixed; top: 0; right: 0;\">   \n    <div class=\"toast-header\">\n        <strong><span>👨🏻‍✈️</span>Mise à jour disponible</strong>\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" on:click={() => $swDismiss=true}>\n            <span aria-hidden=\"true\">&times;</span>\n        </button>\n    </div>\n    <div class=\"toast-body\">\n        <button on:click|once={() => install(registration)}>{installLabel}</button>\n    </div>\n</div>\n{/if}\n{/await}\n<style>\n    .toast {\n        opacity: 1;\n        z-index: 20;\n        max-width: 350px;\n        overflow: hidden;\n        font-size: .875rem;\n        background-color: rgba(255,255,255,.85);\n        background-clip: padding-box;\n        border: 1px solid rgba(0,0,0,.1);\n        box-shadow: 0 .25rem .75rem rgba(0,0,0,.1);\n        -webkit-backdrop-filter: blur(10px);\n        backdrop-filter: blur(10px);\n        border-radius: .25rem;\n    }\n    .toast-header {\n        display: -ms-flexbox;\n        display: flex;\n        -ms-flex-align: center;\n        align-items: center;\n        padding: .25rem .75rem;\n        color: #6c757d;\n        background-color: rgba(255,255,255,.85);\n        background-clip: padding-box;\n        border-bottom: 1px solid rgba(0,0,0,.05);\n    }\n    .toast-header strong {\n        margin-right: auto;\n    }\n    .toast-body {\n        padding: .75rem;\n        text-align: center;\n    }\n    .toast-body button{\n        color: var(--background-color);\n        background-color: var(--blueaf);\n        border-radius: 3px;\n    }\n    button.close {\n        float: right;\n        font-size: 1.5rem;\n        font-weight: 700;\n        line-height: 1;\n        color: #000;\n        text-shadow: 0 1px 0 #fff;\n        opacity: .5;\n        padding: 0;\n        background-color: transparent;\n        border: 0;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        margin-bottom: .25rem;\n        margin-left: 0.5rem;\n    }\n    strong>span {\n        padding-right: 1em;\n    }\n\n</style>","<script>\n    import Link from '../components/Link.svelte';\n    import HelpMarkup from '../pages/Help.md';\n    import { htmlLogo } from '../components/utils';\n    import {online} from '../stores';\n    import {swDismiss} from '../components/SWUpdate.svelte';\n    const version = \"APP_VERSION\";\n    let sw = window.serviceWorker;\n    let swRunning = true;\n\n    if (!sw && navigator.serviceWorker) {\n        navigator.serviceWorker.ready.then((reg) => {\n            sw = reg;\n            return reg;\n        }).catch(err => swRunning = false);\n    }\n    const defaultLabel = 'Vérifier Mise à jour';\n    let updateLabel = defaultLabel;\n\n    const getStatus = (reg) => {\n        if (!reg) return {'code': 0, 'msg': '🔺 unknown'};\n        if (reg.installing) return {'code': 1, 'msg': \"🔹 installing\"};\n        if (reg.waiting) return {'code': 2, 'msg': \"🔸 waiting\"};\n        if (reg.active) return {'code': 3, 'msg': \"🟢\"};\n    }\n    $: status = getStatus(sw);\n\n    const checkUpdate = () => {\n    updateLabel = \"Vérification... \";\n    $swDismiss = false;\n    sw.update().then((reg) => {\n        if (getStatus(reg).code !== 3)\n        {\n            updateLabel = \"\";\n            sw = sw; // force update\n        } else {\n            updateLabel = \"À jour\";\n        }\n    }).catch((err) => updateLabel = err);\n}\n</script>\n\n<main>\n    <section class='markdown'>\n        <h1>{@html htmlLogo} v{version}\n        {#if navigator && navigator.standalone && swRunning && $online}\n            <small>\n            {#if (status.code !== 0 && updateLabel === defaultLabel)}\n                <a href=\"#/\" on:click|preventDefault=\"{checkUpdate}\">{updateLabel}</a>\n            {:else}\n                {updateLabel}\n            {/if}\n            </small>\n        {/if}\n        </h1>\n        <HelpMarkup/>\n    </section>\n    <div class=\"footer\">\n        <p>Alert Icon via <Link href=\"https://commons.wikimedia.org/wiki/File:OOjs_UI_icon_alert_destructive.svg\">Wikimedia Commons</Link></p>\n        <p>Other Icons made by <Link href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</Link> from <Link href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</Link></p>\n    </div>\n</main>\n\n<style>\n    div.footer{\n        font-size: xx-small;\n        margin-top: 2rem;\n    }\n    h1 small {\n        font-weight: 200;\n        font-size: 0.8rem;\n        margin-left: 1em;\n    }\n    :global(section.markdown) {\n        margin: 0 auto;\n        max-width: 800px;\n        text-align: justify;\n    }\n    :global(section.markdown a) {\n        white-space: nowrap;\n    }\n    :global(section.markdown ul){\n        list-style-type: square;\n        padding-inline-start: 25px;\n    }\n    :global(section.markdown li){\n        margin: 3px 0;\n    }\n</style>","<script>\n    import {taxYear, DATASET, taxData} from \"../stores\";\n    const change = () => $taxData; //force preload\n</script>\n<label class=\"select\">\n<!-- svelte-ignore a11y-no-onchange -->\n<select bind:value={$taxYear} on:change|preventDefault={change}>\n    {#each Object.values(DATASET) as option}\n        <option value={option.label} selected={$taxYear === option.label}>{option.label}</option>\n    {/each}\n</select>\n</label>","<script>\n    import {route, log} from '../stores';\n    import {viewLog} from '../components/LogWindow.svelte';\n    import {htmlLogo} from '../components/utils';\n    import TaxYearSelect from '../components/TaxYearSelect.svelte';\n</script>\n<nav>\n    <a href=\"#/\" class:active={$route=='/'}>{@html htmlLogo}<sup>beta</sup></a>\n    <a href=\"#/mission\" class:active={$route=='/mission'}>Frais De Mission</a>\n    <a href=\"#/pay\" class:active={$route=='/pay'}>Salaire</a>\n    <a href=\"#/help\" class:active={$route=='/help'}>Aide</a>\n    <span class=\"flexspace\"></span>\n    {#if $log.length > 0}\n        <a href=\"#/log\" on:click|preventDefault={() => $viewLog = !$viewLog}>\n            <svg><use xlink:href=\"#alert\"/></svg><sup>{$log.length}</sup>\n        </a>\n    {/if}\n    <TaxYearSelect/>\n</nav>\n\n<style>\n    sup {\n        background-color: var(--redaf);\n        color: var(--background-color);\n        padding: 1px 3px;\n        border-radius: 3px;\n        font-weight: normal;\n        margin-left: 4px;\n        font-size: xx-small;\n    }\n    nav {\n        display: flex;\n        /* justify-content: flex-end; */\n        position: -webkit-sticky;\n        position: sticky;\n        top: 0;\n        background-color: var(--navbar-background-color);\n        --item-color: rgba(var(--blueaf_rgb), 0.5);\n        --active-color: rgba(var(--blueaf_rgb), 0.9);\n        z-index: 10;\n    }\n    a {\n        display: block;\n        padding: 10px;\n        color: var(--item-color);\n        text-decoration: none;\n    }\n    a.active {\n        color: var(--active-color);\n        border-bottom: 2px solid var(--redaf);\n    }\n\n    a:hover {\n        text-decoration: none;\n    }\n\n    a:visited {\n        color: var(--item-color);\n    }\n    a[href=\"#/\"] {\n        margin-right: 0;\n        font-weight: 700;\n    }\n    a[href=\"#/log\"] {\n        padding-right: 2px;\n        padding-top: 8px;\n        padding-bottom: 0;\n    }\n    :global(.flexspace) {\n        display: inline-block;\n        flex: 1;\n    }\n    :global(nav .select) {\n        display: flex;\n        align-items: center;\n        margin-right: 10px;\n    }\n    :global(nav .select select) {\n        background-color: var(--navbar-background-color);\n        border: none;\n    }\n    a[href=\"#/log\"] sup {\n        top: -1em;\n        position: relative;\n        left: -0.5em;\n    }\n    svg{\n        fill:var(--redaf);\n        opacity: 1;\n        width: 24px;\n        height: 24px;\n    }\n</style>","<script>\n    import HomePage from './pages/HomePage.svelte';\n    import MissionPage from './pages/MissionPage.svelte';\n    import PayPage from './pages/PayPage.svelte';\n    import HelpPage from './pages/HelpPage.svelte';\n    import LogWindow from './components/LogWindow.svelte';\n    import {route} from './stores';\n    import NavBar from './components/Navbar.svelte';\n    import SWUpdate from './components/SWUpdate.svelte';\n\n</script>\n\n<SWUpdate/>\n<NavBar/>\n<LogWindow />\n\n{#if $route === '/'}\n<HomePage/>\n{:else if $route === '/mission'}\n<MissionPage/>\n{:else if $route === '/pay'}\n<PayPage/>\n{:else if $route === '/help'}\n<HelpPage/>\n{:else}\n<!-- redirect -->\n{ window.location.hash = '#/'}\n{/if}\n\n<style>\n    :global(html, body) {\n        height: 100%;\n        min-height: 100%;\n        width: 100%;\n        position: relative;\n        --blueaf: #002157; /* --royal-blue-dark */\n        --blueaf_rgb: 9,34,84; /* rgba(var(--blueaf_rgb), 0.5) is valid */\n        --redaf:#FA3C35; /* --tart-orange */\n        --blood-red: #6B0504;\n        --green: #2CA58D; /* #28a745 */;\n        --snow: #FFFBFF;\n        --minion-yellow: #ECD444;\n        --light-grey: #eee; /* used to print tables */\n        --maximum-yellow-red: #FCBF49;\n        /*--light-blue: rgb(213,226,242);/*#4EA5D9*/\n        /* --pink: #e83e8c; */\n        /*--white: #ffFBff;*/\n        /* Other colors found on coolors.co */\n        /*--bisque: #F1DABF;*/\n        /*--maximum-yellow-red: #FCBF49;*/\n        /*--saffron: #EAC435;*/\n        /*--mustard: #FFE156;*/\n        /*--orange-yellow: #F3B700;*/\n        /*--bitter-lemon: #C2E812;*/\n        /*--june-bud: #C5D86D;*/\n        /*--emerald: #23CE6B;*/\n        /*--electric-blue: #87F1FF;*/\n        /*--dark-turquoise: #52DEE5;*/\n        /*--medium-turquoise: #75C9C8;*/\n        /*--star-command-blue: #0077B6;*/\n        /*--light-slate-gray: #698996;*/\n        /*--sea-green-crayola: #00FDDC;*/\n        --color: var(--blueaf);\n        --white: white; /* for button like label */\n        --background-color: var(--snow);\n        --navbar-background-color: var(--minion-yellow);\n        --dropzone-background-color: var(--background-color);\n        --table-background-color: var(--background-color);\n        --table-color: var(--color);\n        --table-highlight-color: #00215730; /* blueaf 30% alpha */\n        --table-border-color: #ccc;\n        color: var(--color);\n    }\n    :global(body) {\n        background-color: var(--background-color);\n        margin: 0;\n        box-sizing: border-box;\n        font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n    }\n    :global(main) {\n        text-align: center;\n        padding: 1em 1em 40px 1em;\n    }\n\n    /*********/\n    /* LINKS */\n    /*********/\n    :global(a) {\n        color: var(--redaf);\n        text-decoration: none;\n    }\n    :global(a:hover) {\n        text-decoration: underline;\n    }\n    :global(a:visited) {\n        color: var(--blood-red);\n    }\n    :global(a[href^=\"#\"]:visited) {\n        color: var(--redaf);\n    }\n    :global(a[href^=http]::after) {\n        content: \"⬀\";\n    }\n\n    /*********/\n    /* FORMS */\n    /*********/\n    :global(label) {\n        display: block;\n    }\n    :global(input, button, select, textarea) {\n        font-family: inherit;\n        font-size: inherit;\n        -webkit-padding: 0.4em 0;\n        padding: 0.4em;\n        margin: 0 0 0.5em 0;\n        box-sizing: border-box;\n        border: 1px solid #ccc;\n        border-radius: 2px;\n    }\n\n    :global(input:disabled) {\n        color: #ccc;\n    }\n\n    :global(button) {\n        color: #333;\n        background-color: #f4f4f4;\n        outline: none;\n        cursor: pointer;\n    }\n\n    :global(button:disabled) {\n        color: #999;\n        cursor: not-allowed;\n    }\n\n    :global(button:not(:disabled):active ){\n        background-color: #ddd;\n    }\n\n    :global(button:focus) {\n        border-color: #666;\n    }\n    :global(.select select){\n        color: var(--color);\n    }\n    :global(.select) {\n        display: inline-block;\n    }\n    :global(.select select){\n        -webkit-padding: 0.2em 0;\n        padding: 0.2em;\n        margin: 0 0 0 0.2em;\n    }\n    /**********/\n    /* TABLES */\n    /**********/\n    :global(table) {\n        border-collapse: collapse;\n        width: 100%;\n    }\n    :global(th, td) {\n        padding: 0.25rem;\n        text-align: left;\n        border: 1px solid #ccc;\n    }\n    /*******/\n    /* SVG */\n    /*******/\n    :global(svg) {\n        fill: var(--color);\n    }\n\n    :global(svg[fill=none]) {\n        fill: none;\n    }\n    /********/\n    /* LOGO */\n    /********/\n    :global(span.logo){\n        color: var(--blueaf);\n        text-transform: uppercase;\n    }\n    :global(span.logo > span){\n        color: var(--redaf);\n    }\n    :global(.no-transition){\n        animation: none !important;\n    }\n</style>","import App from './App.svelte';\nconst app = new App({\n    target: document.body,\n    props: {}\n});\n\nexport default app;"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","compute_rest_props","props","keys","rest","Set","has","set_store_value","ret","value","set","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","run_tasks","task","c","delete","f","size","loop","promise","Promise","fulfill","add","[object Object]","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","set_attributes","attributes","descriptors","getOwnPropertyDescriptors","__proto__","key","style","cssText","to_number","set_data","wholeText","set_input_value","input","set_style","important","setProperty","select_option","select","option","__value","selected","toggle_class","toggle","classList","HtmlTag","e","n","html","nodeName","t","h","innerHTML","Array","from","childNodes","active_docs","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","rule","str","hash","charCodeAt","doc","ownerDocument","stylesheet","__svelte_stylesheet","head","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","deleteRule","clear","set_current_component","get_current_component","Error","onMount","on_mount","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","flush","update","pop","fragment","before_update","after_update","wait","then","dispatch","direction","kind","dispatchEvent","type","detail","createEvent","initCustomEvent","custom_event","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_bidirectional_transition","params","intro","config","running_program","pending_program","animation_name","clear_animation","init","program","abs","start","end","group","go","easing","tick","css","handle_promise","info","token","index","resolved","child_ctx","current","needs_flush","blocks","m","mount","error","catch","hasCatch","pending","create_component","mount_component","new_on_destroy","map","destroy_component","make_dirty","fill","instance","create_fragment","not_equal","parent_component","prop_values","bound","context","Map","skip_bound","ready","hydrate","nodes","children","l","SvelteComponent","$destroy","splice","$$props","obj","$$set","includes","styles","v","trim","title","levels","updates","to_null_out","accounted_for","href","startsWith","rel","$$restProps","result","Deferred","reject","htmlLogo","navigatorLocale","navigator","languages","Intl","DateTimeFormat","supportedLocalesOf","NumberFormat","shift","months","months14","monthsfr","localeFormat","numberOrString","res","format","replace","numberValue","parseFloat","toFixed","maximumFractionDigits","currency","minimumFractionDigits","toString","localeCurrency","digits","localeRate","localeDateFormat","isoString","fakeUTCDate","parse","substring","opts","timezone","cubicOut","fade","linear","getComputedStyle","opacity","fly","y","target_opacity","transform","od","u","subscriber_queue","readable","writable","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","values","cleanup","sync","unsubscribers","CONTINUATION_MARK","EP5MONTHS","ep5Time2iso","hours","cs","padStart","numberOfDays","startISO","endISO","diff","floor","iso2FR","timeZone","deltaDays","setUTCDate","getUTCDate","loc","toLocaleString","match","exec","day","month","year","hour","minute","baseIsoString","delta","tzOffset","trunc","minutes","round","bind","rotSummary","rot","stopovers","nights","reduce","accumulator","dep","arr","buildRots","flights","tzConverter","base","iataMap","converterTZ","timeZoneName","isBase","iata","rotFlights","rotStays","rots","flightGMT","entries","flight","isComplete","days","j","nextFlight","standbyHours","standbyDays","lastDay","yString","mString","parseInt","endsWith","summary","nightsCount","missing","fillingNight","nightInFlight","optimizeNightsRepartition","countries","stays","stayTuples","nightTuples","optimized","concat","optimizedCountries","console","log","reverse","iata2country","airportsData","AmountError","findAmountEuros","countryData","isoDate","exrData","amount","findAmount","exr","rate","date","localeCompare","addIndemnities","taxYear","taxData","results","countriesData","MC_REMOVAL","nextYear","previousYear","hasError","indemnities","toRemove","total","formula","country","z","taxStopCount","taxStops","validTaxStops","validTaxStopCount","count","validCount","countryIndemnities","stopIndemnities","doRemove","ceil","euros","err","message","minFractionDigits","maxFractionDigits","stops","stopFormula","currencyFormula","indemnity","ep5Iterator","monthData","testIterator","mergeFlights","flights1","flights2","f1","f2","flight2","flight1","BASES","label","sort","DATASET","url","defaultYear","resettable","resetValue","reset","nativeConsoleLog","nativeConsoleError","newConsoleLog","theStore","arguments","apply","newConsoleError","patchLog","ep5","paySlips","nuiteesInput","nuiteesAF","$taxYear","fetch","json","pairings","$ep5","$taxData","$tzConverter","currentIt","nextIt","mergedRots","mergedWithIndemnities","mergeRots","fraisDeMission","$pairings","online","update_network_status","onLine","route","hashchange","location","substr","action_result","destroy","viewLog","text2html","renderText","describe","prototype","logEvent","lenght","markerCount","changeStyleColor","renderStyledText","$viewLog","scrollTop","scrollHeight","running","start_time","end_time","abort","started","fontObserver","fonts","load","urls","test","remaining","maybeCallback","async","defer","isScript","tag","crossOrigin","onload","body","decimal","number","left","right","padEnd","decimal2cents","cents2decimal","cents","centsString","matchAll","re","bydefault","matchLast","lastMatch","payParser","fileName","fileOrder","errors","repas","transport","decouchers_fpro","net","imposable","decimals","cumul","msg","nightsAFParser","matchFirst","router","content","isNuiteesAF","previousTaxYear","nextTaxYear","pattern","monthIndex","depDay","depTime","arrDay","arrTime","sortedFlights","ep5Parser","acceptedType","pdfWorker","seqOrder","preloadFiles","getPageText","pdf","pageNo","separator","page","getPage","getTextContent","items","disabled","dropzoneHasFocus","preload","loader","pdfjsLib","GlobalWorkerOptions","workerSrc","destroyed","PDFWorker","verbosity","Warning","getPDF","file","reader","FileReader","ev","source","pdfPages","getDocument","maxPages","numPages","pageText","getPDFText","worker","onerror","readAsArrayBuffer","processFiles","files","promises","basename","batchPaySlips","batchEp5","$base","$nuiteesAF","afterLoad","all","getEntriesAsAsyncIterator","dirEntry","createReader","readEntries","entry","isFile","fileAsPromise","dataTransfer","item","webkitGetAsEntry","isDirectory","isFirefox","userAgent","nameLabel","computeNameLabel","requested","prev","requestedMonths","dat","tz","requestedMonthsDefault","computeRequestedMonths","zoneForfaitEuro","code","validity","startRate","endRate","averageRate","zone","tableId","getCountriesData","list","sortedList","getData","amounts","preloadFiles2","filename","tableIds","fontName","ok","blob","jsPDF","API","events","addFileToVFS","addFont","readAsBinaryString","statusText","stopPropagation","table","getElementById","querySelectorAll","innerText","jspdf","orientation","autoTable","font","useCss","showHead","showFoot","pageBreak","includeHiddenHtml","download","Blob","output","URL","revokeObjectURL","createObjectURL","remove","tableIndemnitiesId","sumFrais","real","estimated","totalFrais","computeTotalFrais","totalImposable","computeTotalImposable","cumulImposable12","abbattement","maxForfait10","min","totalDecouchersFPRO","computeTotalDecouchersFPRO","nightsCostEstimate","$nuiteesInput","fraisReels","$fraisDeMission","isSWUpdateAvailable","swDismiss","installLabel","$swDismiss","install","reg","refreshing","serviceWorker","reload","waiting","postMessage","registration","defaultLabel","standalone","version","sw","swRunning","updateLabel","getStatus","installing","status","selected_option","querySelector","setAttributeNS"],"mappings":"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"}