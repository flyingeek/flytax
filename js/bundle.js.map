{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../src/components/FlagSignifier.svelte","../../src/components/Link.svelte","../../src/components/utils.js","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/transition/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/parsers/ep5Parser.js","../../src/stores.js","../../src/components/LogWindow.svelte","../../src/pages/HomePage.svelte","../../src/components/Disclaimer.svelte","../../src/components/async-script-loader.js","../../src/parsers/payParser.js","../../src/parsers/nightsAFParser.js","../../src/parsers/router.js","../../src/components/DropZone.svelte","../../src/components/MonthStatus.svelte","../../src/components/MissionCountries.svelte","../../src/components/DownloadTablePDF.svelte","../../src/components/MissionActivities.svelte","../../src/pages/MissionPage.svelte","../../src/components/PayTable.svelte","../../src/pages/PayPage.svelte","../../src/pages/Help.md","../../src/components/ChangeLog.svelte","../../src/actions/clickOutsideAction.js","../../src/components/ChangeLogModal.svelte","../../src/pages/HelpPage.svelte","../../src/components/TaxYearSelect.svelte","../../src/components/Navbar.svelte","../../src/components/SWUpdate.svelte","../../src/App.svelte","../../node_modules/workbox-window/build/workbox-window.prod.es5.mjs","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nlet src_url_equal_anchor;\nfunction src_url_equal(element_src, url) {\n    if (!src_url_equal_anchor) {\n        src_url_equal_anchor = document.createElement('a');\n    }\n    src_url_equal_anchor.href = url;\n    return element_src === src_url_equal_anchor.href;\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn) {\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    update_slot_base(slot, slot_definition, ctx, $$scope, slot_changes, get_slot_context_fn);\n}\nfunction get_all_dirty_from_scope($$scope) {\n    if ($$scope.ctx.length > 32) {\n        const dirty = [];\n        const length = $$scope.ctx.length / 32;\n        for (let i = 0; i < length; i++) {\n            dirty[i] = -1;\n        }\n        return dirty;\n    }\n    return -1;\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\n// Track which nodes are claimed during hydration. Unclaimed nodes can then be removed from the DOM\n// at the end of hydration without touching the remaining nodes.\nlet is_hydrating = false;\nfunction start_hydrating() {\n    is_hydrating = true;\n}\nfunction end_hydrating() {\n    is_hydrating = false;\n}\nfunction upper_bound(low, high, key, value) {\n    // Return first index of value larger than input value in the range [low, high)\n    while (low < high) {\n        const mid = low + ((high - low) >> 1);\n        if (key(mid) <= value) {\n            low = mid + 1;\n        }\n        else {\n            high = mid;\n        }\n    }\n    return low;\n}\nfunction init_hydrate(target) {\n    if (target.hydrate_init)\n        return;\n    target.hydrate_init = true;\n    // We know that all children have claim_order values since the unclaimed have been detached if target is not <head>\n    let children = target.childNodes;\n    // If target is <head>, there may be children without claim_order\n    if (target.nodeName === 'HEAD') {\n        const myChildren = [];\n        for (let i = 0; i < children.length; i++) {\n            const node = children[i];\n            if (node.claim_order !== undefined) {\n                myChildren.push(node);\n            }\n        }\n        children = myChildren;\n    }\n    /*\n    * Reorder claimed children optimally.\n    * We can reorder claimed children optimally by finding the longest subsequence of\n    * nodes that are already claimed in order and only moving the rest. The longest\n    * subsequence subsequence of nodes that are claimed in order can be found by\n    * computing the longest increasing subsequence of .claim_order values.\n    *\n    * This algorithm is optimal in generating the least amount of reorder operations\n    * possible.\n    *\n    * Proof:\n    * We know that, given a set of reordering operations, the nodes that do not move\n    * always form an increasing subsequence, since they do not move among each other\n    * meaning that they must be already ordered among each other. Thus, the maximal\n    * set of nodes that do not move form a longest increasing subsequence.\n    */\n    // Compute longest increasing subsequence\n    // m: subsequence length j => index k of smallest value that ends an increasing subsequence of length j\n    const m = new Int32Array(children.length + 1);\n    // Predecessor indices + 1\n    const p = new Int32Array(children.length);\n    m[0] = -1;\n    let longest = 0;\n    for (let i = 0; i < children.length; i++) {\n        const current = children[i].claim_order;\n        // Find the largest subsequence length such that it ends in a value less than our current value\n        // upper_bound returns first greater value, so we subtract one\n        // with fast path for when we are on the current longest subsequence\n        const seqLen = ((longest > 0 && children[m[longest]].claim_order <= current) ? longest + 1 : upper_bound(1, longest, idx => children[m[idx]].claim_order, current)) - 1;\n        p[i] = m[seqLen] + 1;\n        const newLen = seqLen + 1;\n        // We can guarantee that current is the smallest value. Otherwise, we would have generated a longer sequence.\n        m[newLen] = i;\n        longest = Math.max(newLen, longest);\n    }\n    // The longest increasing subsequence of nodes (initially reversed)\n    const lis = [];\n    // The rest of the nodes, nodes that will be moved\n    const toMove = [];\n    let last = children.length - 1;\n    for (let cur = m[longest] + 1; cur != 0; cur = p[cur - 1]) {\n        lis.push(children[cur - 1]);\n        for (; last >= cur; last--) {\n            toMove.push(children[last]);\n        }\n        last--;\n    }\n    for (; last >= 0; last--) {\n        toMove.push(children[last]);\n    }\n    lis.reverse();\n    // We sort the nodes being moved to guarantee that their insertion order matches the claim order\n    toMove.sort((a, b) => a.claim_order - b.claim_order);\n    // Finally, we move the nodes\n    for (let i = 0, j = 0; i < toMove.length; i++) {\n        while (j < lis.length && toMove[i].claim_order >= lis[j].claim_order) {\n            j++;\n        }\n        const anchor = j < lis.length ? lis[j] : null;\n        target.insertBefore(toMove[i], anchor);\n    }\n}\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction append_styles(target, style_sheet_id, styles) {\n    const append_styles_to = get_root_for_style(target);\n    if (!append_styles_to.getElementById(style_sheet_id)) {\n        const style = element('style');\n        style.id = style_sheet_id;\n        style.textContent = styles;\n        append_stylesheet(append_styles_to, style);\n    }\n}\nfunction get_root_for_style(node) {\n    if (!node)\n        return document;\n    const root = node.getRootNode ? node.getRootNode() : node.ownerDocument;\n    if (root.host) {\n        return root;\n    }\n    return document;\n}\nfunction append_empty_stylesheet(node) {\n    const style_element = element('style');\n    append_stylesheet(get_root_for_style(node), style_element);\n    return style_element;\n}\nfunction append_stylesheet(node, style) {\n    append(node.head || node, style);\n}\nfunction append_hydration(target, node) {\n    if (is_hydrating) {\n        init_hydrate(target);\n        if ((target.actual_end_child === undefined) || ((target.actual_end_child !== null) && (target.actual_end_child.parentElement !== target))) {\n            target.actual_end_child = target.firstChild;\n        }\n        // Skip nodes of undefined ordering\n        while ((target.actual_end_child !== null) && (target.actual_end_child.claim_order === undefined)) {\n            target.actual_end_child = target.actual_end_child.nextSibling;\n        }\n        if (node !== target.actual_end_child) {\n            // We only insert if the ordering of this node should be modified or the parent node is not target\n            if (node.claim_order !== undefined || node.parentNode !== target) {\n                target.insertBefore(node, target.actual_end_child);\n            }\n        }\n        else {\n            target.actual_end_child = node.nextSibling;\n        }\n    }\n    else if (node.parentNode !== target || node.nextSibling !== null) {\n        target.appendChild(node);\n    }\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction insert_hydration(target, node, anchor) {\n    if (is_hydrating && !anchor) {\n        append_hydration(target, node);\n    }\n    else if (node.parentNode !== target || node.nextSibling != anchor) {\n        target.insertBefore(node, anchor || null);\n    }\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction trusted(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.isTrusted)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = typeof node[prop] === 'boolean' && value === '' ? true : value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction init_claim_info(nodes) {\n    if (nodes.claim_info === undefined) {\n        nodes.claim_info = { last_index: 0, total_claimed: 0 };\n    }\n}\nfunction claim_node(nodes, predicate, processNode, createNode, dontUpdateLastIndex = false) {\n    // Try to find nodes in an order such that we lengthen the longest increasing subsequence\n    init_claim_info(nodes);\n    const resultNode = (() => {\n        // We first try to find an element after the previous one\n        for (let i = nodes.claim_info.last_index; i < nodes.length; i++) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                return node;\n            }\n        }\n        // Otherwise, we try to find one before\n        // We iterate in reverse so that we don't go too far back\n        for (let i = nodes.claim_info.last_index - 1; i >= 0; i--) {\n            const node = nodes[i];\n            if (predicate(node)) {\n                const replacement = processNode(node);\n                if (replacement === undefined) {\n                    nodes.splice(i, 1);\n                }\n                else {\n                    nodes[i] = replacement;\n                }\n                if (!dontUpdateLastIndex) {\n                    nodes.claim_info.last_index = i;\n                }\n                else if (replacement === undefined) {\n                    // Since we spliced before the last_index, we decrease it\n                    nodes.claim_info.last_index--;\n                }\n                return node;\n            }\n        }\n        // If we can't find any matching node, we create a new one\n        return createNode();\n    })();\n    resultNode.claim_order = nodes.claim_info.total_claimed;\n    nodes.claim_info.total_claimed += 1;\n    return resultNode;\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    return claim_node(nodes, (node) => node.nodeName === name, (node) => {\n        const remove = [];\n        for (let j = 0; j < node.attributes.length; j++) {\n            const attribute = node.attributes[j];\n            if (!attributes[attribute.name]) {\n                remove.push(attribute.name);\n            }\n        }\n        remove.forEach(v => node.removeAttribute(v));\n        return undefined;\n    }, () => svg ? svg_element(name) : element(name));\n}\nfunction claim_text(nodes, data) {\n    return claim_node(nodes, (node) => node.nodeType === 3, (node) => {\n        const dataStr = '' + data;\n        if (node.data.startsWith(dataStr)) {\n            if (node.data.length !== dataStr.length) {\n                return node.splitText(dataStr.length);\n            }\n        }\n        else {\n            node.data = dataStr;\n        }\n    }, () => text(data), true // Text nodes should not update last index since it is likely not worth it to eliminate an increasing subsequence of actual elements\n    );\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction find_comment(nodes, text, start) {\n    for (let i = start; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 8 /* comment node */ && node.textContent.trim() === text) {\n            return i;\n        }\n    }\n    return nodes.length;\n}\nfunction claim_html_tag(nodes) {\n    // find html opening tag\n    const start_index = find_comment(nodes, 'HTML_TAG_START', 0);\n    const end_index = find_comment(nodes, 'HTML_TAG_END', start_index);\n    if (start_index === end_index) {\n        return new HtmlTagHydration();\n    }\n    init_claim_info(nodes);\n    const html_tag_nodes = nodes.splice(start_index, end_index + 1);\n    detach(html_tag_nodes[0]);\n    detach(html_tag_nodes[html_tag_nodes.length - 1]);\n    const claimed_nodes = html_tag_nodes.slice(1, html_tag_nodes.length - 1);\n    for (const n of claimed_nodes) {\n        n.claim_order = nodes.claim_info.total_claimed;\n        nodes.claim_info.total_claimed += 1;\n    }\n    return new HtmlTagHydration(claimed_nodes);\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        'overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: -1;');\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail, bubbles = false) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, bubbles, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor() {\n        this.e = this.n = null;\n    }\n    c(html) {\n        this.h(html);\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.c(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nclass HtmlTagHydration extends HtmlTag {\n    constructor(claimed_nodes) {\n        super();\n        this.e = this.n = null;\n        this.l = claimed_nodes;\n    }\n    c(html) {\n        if (this.l) {\n            this.n = this.l;\n        }\n        else {\n            super.c(html);\n        }\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert_hydration(this.t, this.n[i], anchor);\n        }\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = get_root_for_style(node);\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = append_empty_stylesheet(node).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction getAllContexts() {\n    return get_current_component().$$.context;\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        // @ts-ignore\n        callbacks.slice().forEach(fn => fn.call(this, event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            started = true;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = (program.b - t);\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            if (info.blocks[i] === block) {\n                                info.blocks[i] = null;\n                            }\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\nfunction update_await_block_branch(info, ctx, dirty) {\n    const child_ctx = ctx.slice();\n    const { resolved } = info;\n    if (info.current === info.then) {\n        child_ctx[info.value] = resolved;\n    }\n    if (info.current === info.catch) {\n        child_ctx[info.error] = resolved;\n    }\n    info.block.p(child_ctx, dirty);\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${value}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction escape_attribute_value(value) {\n    return typeof value === 'string' ? escape(value) : value;\n}\nfunction escape_object(obj) {\n    const result = {};\n    for (const key in obj) {\n        result[key] = escape_attribute_value(obj[key]);\n    }\n    return result;\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots, context) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : context || []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, { $$slots = {}, context = new Map() } = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, $$slots, context);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor, customElement) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    if (!customElement) {\n        // onMount happens before the initial afterUpdate\n        add_render_callback(() => {\n            const new_on_destroy = on_mount.map(run).filter(is_function);\n            if (on_destroy) {\n                on_destroy.push(...new_on_destroy);\n            }\n            else {\n                // Edge case - component was destroyed immediately,\n                // most likely as a result of a binding initialising\n                run_all(new_on_destroy);\n            }\n            component.$$.on_mount = [];\n        });\n    }\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, append_styles, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        on_disconnect: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : options.context || []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false,\n        root: options.target || parent_component.$$.root\n    };\n    append_styles && append_styles($$.root);\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, options.props || {}, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            start_hydrating();\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor, options.customElement);\n        end_hydrating();\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            const { on_mount } = this.$$;\n            this.$$.on_disconnect = on_mount.map(run).filter(is_function);\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        disconnectedCallback() {\n            run_all(this.$$.on_disconnect);\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.42.1' }, detail), true));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction append_hydration_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append_hydration(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction insert_hydration_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert_hydration(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to separate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, HtmlTagHydration, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, append_empty_stylesheet, append_hydration, append_hydration_dev, append_styles, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_html_tag, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, end_hydrating, escape, escape_attribute_value, escape_object, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getAllContexts, getContext, get_all_dirty_from_scope, get_binding_group_value, get_current_component, get_custom_elements_slots, get_root_for_style, get_slot_changes, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, insert_hydration, insert_hydration_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, src_url_equal, start_hydrating, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, trusted, update_await_block_branch, update_keyed_each, update_slot, update_slot_base, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","<script>\n  //https://www.jayfreestone.com/writing/bulletproof-flag\n  // style props: \"\", \"large-icon\", \"large-title\"; \"large-icon; large-title\"\n  export let style = 'large-icon';\n  const styles = style.split().map(v => v.trim());\n  export let title;\n</script>\n\n<div class=\"flag\">{#if false}<slot />{/if}\n    <div\n        class=\"flag__signifier\"\n        class:flag--large-icon={styles.includes('large-icon')}\n        class:flag--no-title={!title}\n        class:flag--large-title={title && styles.includes('large-title')}>\n        <slot name=\"icon\"></slot>\n    </div>\n    <div class=\"flag__title\">\n        <h2>{title}</h2>\n    </div>\n    <div class=\"flag__content\">\n        <slot name=\"content\"></slot>\n    </div>\n</div>\n\n<style>\n\n:global(.flag + .flag) {\n    margin-top: 3rem;\n}\n:global(.flag) {\n    display: grid;\n    grid-column-gap: var(--flag-gap, 1em);\n    grid-template-columns: auto 1fr;\n    grid-template-rows: repeat(3, minmax(min-content, max-content)) 1fr;\n    grid-template-areas: \"signifier .\" \"signifier title\" \"signifier content\" \". content\";\n}\n:global(.flag__title) {\n    grid-area: title;\n    align-self: center;\n    display: flex;\n    align-items: center;\n}\n:global(.flag__title:empty) {\n  grid-column: 1;\n  grid-row: 2;\n}\n:global(.flag__title:empty:after) {\n    content: \"x\";\n    visibility: hidden;\n}\n:global(.flag__title:empty ~ .flag__content) {\n    grid-row-start: 2;\n}\n:global(.flag__signifier) {\n    grid-area: signifier;\n    display: flex;\n    align-self: center;\n}\n:global(.flag__content) {\n    grid-area: content;\n}\n:global(.flag--large-icon svg) {\n    width: 4rem;\n    height: 4rem;\n}\n:global(.flag--no-title) {\n  font-size: 1.1rem;\n}\n:global(.flag--no-title p) {\n  margin: 0;\n}\n:global(.flag--large-title) h2 {\n  font-size: 2.8rem;\n}\n</style>","<script>\n    export let href;\n    const isExternal = href && !href.startsWith('#');\n    const props = (isExternal) ? Object.assign({rel: \"noreferrer\", target: \"_blank\"}, $$restProps): $$restProps;\n</script>\n<!-- svelte-ignore a11y-missing-attribute -->\n<a {href} {...props}><slot></slot></a>","export class Deferred {\n    constructor() {\n        this.promise = new Promise((resolve, reject)=> {\n            this.reject = reject\n            this.resolve = resolve\n        })\n    }\n}\nexport const htmlLogo = '<span class=\"logo\">Fly<span>Tax</span></span>';\nexport const navigatorLocale = (typeof navigator !== \"undefined\" && navigator.languages) ? Array.from(Intl.DateTimeFormat.supportedLocalesOf(Intl.NumberFormat.supportedLocalesOf(navigator.languages))).shift() : undefined;\nexport const months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\nexport const months14 = ['00', ...months, '13'];\nexport const monthsfr = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'];\nexport const localeFormat = (numberOrString, options={}) => {\n    if (navigatorLocale !== undefined) {\n        const res = new Intl.NumberFormat(navigatorLocale, options).format(numberOrString);\n        if (options.style === 'currency') return res.replace(/\\s/gu, '\\u202f');\n        return res;\n    } else {\n        const numberValue = (numberOrString.toFixed) ? numberOrString : parseFloat(numberOrString);\n        if (options.style==='currency') {\n            return numberValue.toFixed(options.maximumFractionDigits||2) + \"\\u202f\" + options.currency;\n        }else{\n            return (options.maximumFractionDigits===undefined || options.maximumFractionDigits !==  options.minimumFractionDigits) ? numberValue.toString(): numberValue.toFixed(options.maximumFractionDigits);\n        }\n    }\n}\nexport const localeCurrency = (value, digits=2) => localeFormat(value, {\"style\": \"currency\", \"currency\": \"EUR\", \"minimumFractionDigits\": digits});\nexport const localeRate = (value) => localeFormat(value, {\"style\": \"decimal\", \"minimumFractionDigits\": 4, \"maximumFractionDigits\": 4});\nexport const localeDateFormat = (isoString, options={}) => {\n    if (navigatorLocale !== undefined) {\n        const fakeUTCDate = new Date(Date.parse(isoString.substring(0, 10) + \"T00:00Z\"));\n        const opts = Object.assign({\"timezone\": \"UTC\"}, options);\n        return new Intl.DateTimeFormat(navigatorLocale, opts).format(fakeUTCDate);\n    } else {\n        return isoString.substring(0, 10);\n    }\n}\nexport const promiseTimeout = function(ms, promise){\n    // Create a promise that rejects in <ms> milliseconds\n    let timeout = new Promise((resolve, reject) => {\n        let id = setTimeout(() => {\n            clearTimeout(id);\n            reject('Timed out in '+ ms + 'ms.')\n        }, ms)\n    });\n    // Returns a race between our timeout and the passed in promise\n    return Promise.race([\n        promise,\n        timeout\n    ]);\n}\nexport const isPatchUpdate = (current, next) => {\n    const cParts = current.split('.');\n    const nParts = next.split('.');\n    return cParts.slice(0, -1).join('.') === nParts.slice(0, -1).join('.');\n}\n//semver-compare\nexport const semverCompare = (a, b) => {\n    let pa = a.split('.');\n    let pb = b.split('.');\n    for (var i = 0; i < 3; i++) {\n        let na = Number(pa[i]);\n        let nb = Number(pb[i]);\n        if (na > nb) return 1;\n        if (nb > na) return -1;\n        if (!isNaN(na) && isNaN(nb)) return 1;\n        if (isNaN(na) && !isNaN(nb)) return -1;\n    }\n    return 0;\n};\n\nexport const shareAppLink = async () => {\n    const shareData = {\n        'title': 'FLYTAX',\n        'url': window.location.pathname\n    };\n    try {\n        await navigator.share(shareData)\n    } catch(err) {\n        //console.log(err);\n    }\n    return false;\n}","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicInOut, linear, cubicOut } from '../easing/index.mjs';\nimport { is_function, assign } from '../internal/index.mjs';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation.\r\n\r\nPermission to use, copy, modify, and/or distribute this software for any\r\npurpose with or without fee is hereby granted.\r\n\r\nTHE SOFTWARE IS PROVIDED \"AS IS\" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH\r\nREGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY\r\nAND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,\r\nINDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM\r\nLOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR\r\nOTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR\r\nPERFORMANCE OF THIS SOFTWARE.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear } = {}) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut } = {}) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 } = {}) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut } = {}) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = new Set();\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (const subscriber of subscribers) {\n                    subscriber[1]();\n                    subscriber_queue.push(subscriber, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.add(subscriber);\n        if (subscribers.size === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            subscribers.delete(subscriber);\n            if (subscribers.size === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import airportsData from \"../../data/airports.json\";\nimport {localeFormat, months14} from \"../components/utils\";\n\nexport const WITHIN_BASE_TEXT = \"rotation sur base\";\nexport const NIGHT_OVERFLOW_TEXT = \"Erreur: nuitées > nb de jours\";\nexport const CONTINUATION_MARK = \"...\";\nexport const REFNOTE1 = \"\\u202f¹\";\nexport const FORMULA_ERROR = \"!ERREUR!\"\n//months as written in EP5\nexport const EP5MONTHS = ['JANVIER', 'FEVRIER', 'MARS', 'AVRIL', 'MAI', 'JUIN', 'JUILLET', 'AOUT', 'SEPTEMBRE', 'OCTOBRE', 'NOVEMBRE', 'DECEMBRE'];\n\n//converts EP5 time hh,dd to hh:mmZ\n//returns a string\nexport const ep5Time2iso = (text) => {\n    const [hours, cs] = text.split(\",\");\n    const minutes = (parseFloat(cs) * 0.6).toFixed(0).padStart(2, '0');\n    return `${hours}:${minutes}Z`;\n}\n\n//https://stackoverflow.com/questions/222309/calculate-last-day-of-month-in-javascript\n//months must be 1 based (1->12)\nconst getDaysInMonth = (m, y) => {\n    return m===2 ? y & 3 || !(y%25) && y & 15 ? 28 : 29 : 30 + (m+(m>>3)&1);\n}\n\nexport const lastDayInMonthISO = (mString, yString) => {\n    const day = getDaysInMonth(parseInt(mString, 10), parseInt(yString, 10));\n    // 28<=day<=31, so no paddding needed\n    return `${yString}-${mString}-${day}`;\n}\n\n//return intervals between to ISO dates, in hours and in days\nexport const numberOfDays = (startISO, endISO) => {\n    const diff = Date.parse(endISO.replace(\"24:00\", \"23:59\")) - Date.parse(startISO.replace(/\\d\\d:\\d\\d/, \"00:00\"));\n    return Math.floor(diff/ 86400000);\n};\nexport const diffHours = (startISO, endISO) => {\n    return (Date.parse(endISO) - Date.parse(startISO)) / 3600000;\n};\n\n// Converts timezone\n// 2020-11-01T00:00Z -> 2020-11-01+01:00 for \"Europe/Paris\"\n// 2020-11-01T00:00+01:00 -> 2020-11-01+01:00 for \"Europe/Paris\"\nexport const iso2TZ = (timeZone, isoString, deltaDays=0) => {\n    if (isoString === undefined) return timeZone; // This is used in buildRots to check browser compatibility\n    let event = new Date(Date.parse(isoString));\n    if (deltaDays) event.setUTCDate(event.getUTCDate() + deltaDays);\n    // British English uses day/month/year order and 24-hour time without AM/PM\n    const loc = event.toLocaleString(\"en-GB\", {timeZone});\n    const re = /(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d), (\\d\\d):(\\d\\d):\\d\\d/\n    let match;\n    if (null !== (match = re.exec(loc))) {\n        const [, day, month, year, hour, minute] = match;\n        let baseIsoString = `${year}-${month}-${day}T${hour}:${minute}`;\n        const baseEvent = new Date(Date.parse(baseIsoString + \"Z\"));\n        const delta = (baseEvent - event)/3600000;\n        let tzOffset = Math.trunc(delta);\n        let minutes = Math.round((Math.abs(delta) - Math.abs(tzOffset))*60/100);\n        if (tzOffset === 0) {\n            return baseIsoString + \"Z\";\n        }\n        baseIsoString += (tzOffset >= 0) ? '+' : '-';\n        baseIsoString += Math.abs(tzOffset).toString().padStart(2, \"0\") + \":\" + minutes.toString().padStart(2, \"0\");\n        return baseIsoString;\n    } else {\n        throw new Error(`Can not convert ${isoString} to timeZone ${timeZone}`);\n    }\n}\nexport const iso2FR = iso2TZ.bind(null, \"Europe/Paris\");\nexport const iso2AST = iso2TZ.bind(null, \"America/Puerto_Rico\"); // Atlantic Standard Time\n\nconst rotSummary = (rot) => {\n    // construct a summary (nights not repeated)\n    // [YVR, YVR, PPT, PPT, YVR, YVR] => [YVR, PPT, YVR]\n    const stopovers = rot.nights.reduce((accumulator, current) => {\n        if (current !== accumulator[accumulator.length - 1]) {\n            accumulator.push(current); // add a new entry\n        }\n        return accumulator;\n    }, []);\n    return [rot.dep, ...stopovers, rot.arr].join('-')\n            .replace('-'+ CONTINUATION_MARK, CONTINUATION_MARK)\n            .replace(CONTINUATION_MARK +'-', CONTINUATION_MARK);\n}\n\nexport const buildRots = (flights, {tzConverter, base, iataMap}) => {\n    // Using parsed flights build up rots & places of stay\n\n    //verify browser compatibility\n    const converterTZ = tzConverter();\n    try {\n        new Date().toLocaleString(\"en-GB\", {\"timeZone\": converterTZ, \"timeZoneName\": \"short\"});\n    } catch (e) {\n        throw new Error(`Date.toLocaleString(\"en-GB\", {\"timeZone\": \"${converterTZ}\"}) not supported`);\n    }\n    const isBase = (iata) => (base.indexOf(iata)!== -1);\n    let rots = [];\n    let rot = null;\n    let rotFlights;\n    let rotStays;\n\n    for (const [i, flightGMT] of flights.entries()) {\n        const year = flightGMT.start.substring(0,4);\n        const month = flightGMT.start.substring(5, 7);\n        const flight = Object.assign({}, flightGMT);\n        if (tzConverter) {\n            Object.assign(flight, {\"start\": tzConverter(flightGMT.start), \"end\": tzConverter(flightGMT.end)});\n        }\n        if (rot === null) { //reset to a new rot\n            rotFlights = [];\n            rotStays = [];\n            rot = {\"isComplete\": \"<>\", \"nights\": [], \"start\": flight.start};\n        }\n        if (i === 0 && ((isBase(flight.dep) && flight.stop === \"0,00\" && flightGMT.start.substring(8, 10) === \"01\") || !isBase(flight.dep))) {\n            rot.isComplete = '>';\n            if (!isBase(flight.dep)) { //stopovers from first day of month\n                rot.start = `${year}-${month}-01T00:00Z`;\n                if (tzConverter) rot.start = tzConverter(rot.start);\n                const days = numberOfDays(rot.start, flight.start) + 1;\n                for (let j=0; j<days-1; j++) {\n                    rot.nights.push(flight.dep);\n                    rotStays.push(flight.dep)\n                }\n            }\n            // extra stopover for the flight\n            if (isBase(flight.dep)) {\n                // do not push flight.arr (already counted on previous month)\n            }else if (isBase(flight.arr)) {\n                rot.nights.push(flight.dep);\n            }else if (numberOfDays(flight.start, flight.end)>0){\n                rot.nights.push(flight.dep);\n            }\n            //other cases will be covered below\n        }\n        const nextFlight = (flights[i + 1]) ? Object.assign({}, flights[i + 1]) : undefined;\n        if(tzConverter && nextFlight) {\n            Object.assign(nextFlight, {\"start\": tzConverter(flights[i + 1].start), \"end\": tzConverter(flights[i + 1].end)});\n        }\n        if (nextFlight !== undefined) {\n            const standbyHours = diffHours(flight.end, nextFlight.start);\n            // on compte une nuit par jour civil en escale\n            let standbyDays = 0;\n            //First line was needed by 10 ON YVR PPT YVR in rots.test\n            //To check if isBase test was needed, added 7ON SVO in straddling.test and it is.\n            standbyDays += (numberOfDays(rot.start, flight.start) === 0 && isBase(flight.dep)) ? numberOfDays(flight.start, flight.end) : 0; // for flights straddling day on first day\n            standbyDays += numberOfDays(flight.end, nextFlight.start);\n            standbyDays += numberOfDays(nextFlight.start, nextFlight.end); // for flights like LAX-PPT\n            standbyDays = Math.max(standbyDays, 1); // for single day rot\n            if (standbyHours >= 7 && !isBase(flight.arr)) {\n                //console.log(numberOfDays(flight.end, nextFlight.start), standbyHours, localDays, flight.arr);\n                //escale hors base de plus de 7h\n                for (let j=0; j<standbyDays; j++) {\n                    rot.nights.push(flight.arr);\n                }\n                for (let j=0; j <numberOfDays(flight.end, nextFlight.start); j++){\n                    rotStays.push(flight.arr);\n                }\n                rotFlights.push(flightGMT);\n                continue; //do not push new rot yet\n            } else if (isBase(flight.arr) && isBase(nextFlight.dep) && standbyHours >= 12) {\n                // Arrivée base, départ Base avec standby > 12h\n                // will push new rot\n            } else {\n                rotFlights.push(flightGMT);\n                continue; //do not push new rot yet\n            }\n        } else {\n            // last flight of the month ending Base\n            if (isBase(flight.arr)) {\n                if (flight.end.substring(5,7) !== month) {\n                    // flight is accross civil month\n                    if (flightGMT.end.substring(11) === \"24:00Z\") {\n                        // uncomplete rot not ending at Base\n                        rot.isComplete = '<';\n                        // if flight continues after 24z, next day will be counted next month\n                        // so we need to adjust nights by omitting one\n                        rot.days = numberOfDays(rot.start, flight.end);\n                    }\n                }\n                // last flight, will push new rot\n            } else {\n                // last flight of the month NOT ending Base\n                rot.isComplete = '<';\n                const lastDay = lastDayInMonthISO(month, year) + \"T24:00Z\";\n                if (tzConverter) {\n                    rot.end = tzConverter(lastDay);\n                } else {\n                    rot.end = lastDay;\n                }\n                const days = numberOfDays(flight.end, rot.end) + 1;\n                for (let j=0; j<days; j++) {\n                    rot.nights.push(flight.arr);\n                    if (j>0) rotStays.push(flight.arr);\n                }\n                if (rot.end.substring(5,7) !== month) {\n                    // also adjust night count if flight.end is on current month\n                    if (flight.end.substring(5,7) === month){\n                        rot.nights.pop();\n                    }\n                    rot.days = numberOfDays(rot.start, rot.end); //omit one\n                }\n                // last flight, will push new rot\n            }\n        }\n        rotFlights.push(flightGMT);\n        if (rot.isComplete !== '<>') {\n            rot.flights = rotFlights; // needed for merge\n            rot.base = base;\n        }\n        // some defaults if not already set\n        // a ||= b; only is ES2021 and node 15 <=> a || (a = b);\n        rot.end || (rot.end = flight.end);\n        rot.days|| (rot.days = numberOfDays(rot.start, rot.end) + 1); // 0 days <=> 1ON\n\n        // construct a summary (nights not repeated)\n        let dep = base[0];\n        let arr = base[0];\n        if (!rot.isComplete.startsWith('<')) {\n            dep = CONTINUATION_MARK;\n        } else if (rotFlights.length > 0) {\n            dep = rotFlights[0].dep;\n        }\n        if (!rot.isComplete.endsWith('>')) {\n            arr = CONTINUATION_MARK;\n        } else if (rotFlights.length > 0) {\n            arr = rotFlights[rotFlights.length - 1].arr;\n        }\n        rot.dep = dep;\n        rot.arr = arr;\n        rot.summary = rotSummary(rot);\n        // adjust number of nights to match number of days\n        const nightsCount = rot.nights.length;\n        const missing = rot.days - nightsCount;\n        const fillingNight = (rot.nights.length > 0) ? rot.nights[nightsCount - 1] : (dep !== CONTINUATION_MARK) ? dep : (arr !== CONTINUATION_MARK) ? arr : base[0];\n        for (let j=0; j<missing; j++) {\n            rot.nights.push(fillingNight);\n        }\n        const nightInFlight = (numberOfDays(flight.start, flight.end) === 1 || flightGMT.start.endsWith('T00:00Z'));\n        const mayNeedOptimization = (missing === 1 && nightInFlight);\n        if (mayNeedOptimization && rot.isComplete === '<>') {\n            // We have to check if we can have a better night repartition\n            [rot.nights,] = optimizeNightsRepartition(rot, rotStays);\n        }\n\n        //outOfBase is > 0 if rot have at least one stopover out of base\n        //If not outOfBase, indemnities are zero so we reset nights\n        const outOfBase = rotFlights.reduce((a, c) => a + ((!isBase(c.dep) || !isBase(c.arr)) ? 1 : 0), 0);\n        if (outOfBase === 0) rot.nights = [];\n\n        // add countries\n        if (iataMap) rot.countries = rot.nights.map((iata) => iataMap(iata));\n        //push rot and continue\n        rots.push(rot);\n        rot = null;\n    }\n    return rots\n};\n\nexport const optimizeNightsRepartition = (rot, stays) => {\n    const nights = rot.nights;\n    const countries = rot.countries; // optional\n    if (Array.isArray(stays)) {\n        const stayTuples = stays.reduce((accumulator, current) => {\n            const index = accumulator.length - 1;\n            if (index > -1 && current === accumulator[index][0]) {\n                accumulator[index][1] += 1;\n            }else{\n                accumulator.push([current, 1]); // add a new entry\n            }\n            return accumulator;\n        }, []);\n        const nightTuples = nights.reduce((accumulator, current) => {\n            const index = accumulator.length - 1;\n            if (index > -1 && current === accumulator[index][0]) {\n                accumulator[index][1] += 1;\n            }else{\n                accumulator.push([current, 1]); // add a new entry\n            }\n            return accumulator;\n        }, []);\n        // We look for rots with 2 stays and with indentical stay length\n        // and with a diff of two nights\n        if (stayTuples.length === 2 && stayTuples[0][1] === stayTuples[1][1] && nightTuples.length === 2 && (nightTuples[1][1] - nightTuples[0][1] === 2)){\n            const optimized = [].concat(nights[0], ...nights.slice(0,-1));\n            let optimizedCountries = countries;\n            if (countries!== undefined) {\n                optimizedCountries = [].concat(countries[0], ...countries.slice(0,-1));\n            }\n            console.log(`Optimisation des nuits sur ${rot.summary} du ${rot.start.substring(0,10).split('-').reverse().join('/')}\\n(conformément à l'exemple 13 du mémento fiscal)\\n${nights} -> ${optimized}`);\n            return [optimized, optimizedCountries];\n        }\n    }\n    return [nights, countries];\n};\n\nexport const iata2country = (iata) => {\n    const index = airportsData.indexOf(iata + ':');\n    return (index >= 0) ? airportsData.substring(index + 4, index + 6): iata;\n}\n\n// Also we ensure at build time there is no possible errors\n// due to inconsistency between airportsData, countriesData and exrData,\n// we are still handling AmountError in findAmount* functions.\nclass AmountError extends Error {};\n\nexport const findAmountEuros = (countryData, isoDate, exrData) => {\n    const [amount, currency] = findAmount(countryData, isoDate);\n    const exr = exrData[currency];\n    if (exr) {\n        const rate = parseFloat(exr[2]);\n        const euros = parseFloat((parseFloat(amount) / rate).toFixed(2));\n        return euros;\n    } else {\n        throw new AmountError(`Taux de change inconnu pour ${currency}`);\n    }\n};\n\nexport const findAmount = (countryData, isoDate) => {\n    for (const [date, currency, amount] of countryData.a) {\n        if (date.localeCompare(isoDate) <= 0) {\n            return [amount, currency];\n        }\n    }\n    if (countryData) {\n        throw new AmountError(`Pas d'indemnité définie pour ${countryData.n} au ${isoDate}`);\n    } else {\n        throw new AmountError(`Indemnité manquante`);\n    }\n};\n\nexport const addIndemnities = (taxYear, rots, taxData, tzConverter, fileName) => {\n    const results = [];\n    const countriesData = taxData.countries;\n    const exrData = taxData.exr;\n    const MC_REMOVAL = 0.5;\n    const nextYear = (parseInt(taxYear, 10) + 1).toString();\n    const previousYear = (parseInt(taxYear, 10) - 1).toString();\n    for (const rot of rots) {\n        let hasError = false;\n        const indemnities = [];\n        // check if we count all nights of if we have to substract 0.5\n        let toRemove = MC_REMOVAL; // by default remove 0.5 night\n\n        // Sum up the indemnities day by day in the rot\n        let total = 0; // default is zero if it fails\n\n        if (rot.nights.length === 0) {\n            rot.formula = WITHIN_BASE_TEXT;\n        } else if  (rot.nights.length > rot.days || rot.countries.length > rot.days) {\n            rot.formula = NIGHT_OVERFLOW_TEXT;\n            rot.currencyFormula = 'Vérifiez le choix de la base';\n            console.log(`%c${fileName}\\n%ctype [ep5] %cVérifiez la base`, 'font-family: monospace;', 'color: black;', 'color: red;');\n            hasError = true;\n        } else {\n            // if at least one of the stopover is LC, count all nights\n            for (const country of rot.countries) {\n                const data = countriesData[country];\n                if (data && data.z !== 1) {\n                    toRemove = 0;\n                    break;\n                }\n            }\n            let taxStopCount = rot.countries.length; // taxStopCount is used to detect fiscal year truncate\n            const taxStops = rot.countries.reduce((accumulator, current) => {\n                const index = accumulator.length - 1;\n                if (index > -1 && current === accumulator[index][1]) {\n                    accumulator[index][0] += 1; // increase previous count\n                }else{\n                    accumulator.push([1, current]); // add a new entry\n                }\n                return accumulator;\n            }, []);\n            let validTaxStops = []; // used to recompute the formula after filtering stops to the current taxYear\n            let validTaxStopCount = 0; // validTaxStopCount is compared at the end with taxStopCount\n            // Apply removal to taxStops if needed\n            if (toRemove !== 0 && taxStops.length > 0){\n                taxStops[taxStops.length - 1][0] -= toRemove; //performs removal\n                taxStopCount -= toRemove;\n            }\n\n            // we need to find the date for each day of the rot\n            // to cover the case where daily tax amount change\n            let deltaDays = 0;\n            for (const [count, country] of taxStops) {\n                let validCount = count;\n                let data = countriesData[country];\n                if (data && data.f === 1) data = countriesData[\"EU\"]\n                let amount = 0; // default is zero in case of error\n                const countryIndemnities = []; // contains the extended formula with euro amounts\n                if(data) {\n                    try {\n                        const stopIndemnities = []; // we need to reverse them after the loop\n                        // detects if we need to apply MC_REMOVAL (3 > 2.5)\n                        const doRemove = Math.ceil(count) > count;\n                        //The forloop is constructed so that when i=0 we are on the last days\n                        //This is simpler to filter data for taxYear\n                        for (let i=0; i<Math.ceil(count); i++){\n                            const delta = (deltaDays - i) + Math.ceil(count) - i - 1;\n                            const isoDate = tzConverter(rot.start, delta);\n                            const year = isoDate.substring(0,4);\n                            if (year === taxYear) {\n                                const euros = findAmountEuros(data, isoDate.substring(0, 10), exrData);\n                                amount += (i===0 && doRemove) ? MC_REMOVAL * euros : euros;\n                                stopIndemnities.push([(i===0 && doRemove) ? MC_REMOVAL : 1, findAmount(data, isoDate.substring(0, 10)).join('')]);\n                            }else if (year === nextYear && rot.isComplete === '>') {\n                                //pass\n                            }else if (year === previousYear && rot.isComplete === '<') {\n                                //pass\n                            }else{\n                                validCount -= (i===0 && doRemove) ? MC_REMOVAL : 1;\n                            }\n                            deltaDays += 1;\n                        }\n                        validTaxStopCount += validCount;\n                        if (validCount >= 0) validTaxStops.push([validCount, country]);\n                        if(stopIndemnities.length > 0) countryIndemnities.push(...stopIndemnities.reverse());\n                    } catch (err) {\n                        hasError = true;\n                        if (err instanceof AmountError) {\n                            console.error(err.message);\n                        } else {\n                            console.error(err);\n                        }\n                    }\n                } else {\n                    hasError = true;\n                    if (country.length === 2) {\n                        console.error(`Données pays manquantes pour ${country}`);\n                    } else {\n                        console.error(`Code IATA inconnu ${country}`);\n                    }\n                }\n                if(countryIndemnities.length > 0) {\n                    indemnities.push(countryIndemnities.reduce((accumulator, current) => {\n                        const index = accumulator.length - 1;\n                        if (index > -1 && current[1] === accumulator[index][1]) {\n                            accumulator[index][0] += current[0]; // increase previous count\n                        }else{\n                            accumulator.push(current); // add a new entry\n                        }\n                        return accumulator;\n                    }, []));\n                }\n                total += amount;\n            }\n            validTaxStops = validTaxStops.reduce((a, c) => {\n                if (c[0] > 0) {\n                    return a.concat([[localeFormat(c[0], {\"style\": \"decimal\", \"minFractionDigits\": 0, \"maxFractionDigits\": 1}), c[1]]]);\n                }\n                return a;\n            }, []);\n            rot.formula = validTaxStops.map(a => a.join(\" x \")).join(' + ');\n            rot.formula += (!hasError && taxStopCount !== validTaxStopCount) ? REFNOTE1 : \"\";\n            rot.formula += (hasError || taxStopCount < rot.days -MC_REMOVAL ) ? ` ${FORMULA_ERROR}` : \"\";\n            // indemnities = [[[times, amount1Stop1],[times, amount2Stop1]], [[times, amount1Stop2]])\n            const stops = [];\n            for (const stop of indemnities) {\n                const stopLocalized = stop.reduce((a, c) => {\n                    return a.concat([[localeFormat(c[0], {\"style\": \"decimal\", \"minFractionDigits\": 0, \"maxFractionDigits\": 1}), c[1]]]);\n                }, []);\n                const stopFormula = stopLocalized.map(a => a.join(' x ')).join(' + ');\n                (stop.length > 1) ? stops.push(`(${stopFormula})`) : stops.push(stopFormula);\n            }\n            rot.currencyFormula = stops.join(' + ');\n            if(validTaxStops.length <= 0 && taxStops.length !== 0 && !hasError) continue; // taxStops=0 => indemnity=0 and is valid for base only rots\n        }\n        rot.indemnity = (hasError) ? 0 : parseFloat(total.toFixed(2));\n        rot.error = hasError;\n        results.push(rot);\n    }\n    return results;\n}\n// ep5 iterable\nexport function* ep5Iterator(data){\n    for (const m of months14) {\n        const monthData = data[m];\n        if (monthData) {\n            yield* monthData.rots;\n        }\n    }\n};\n// in tests we use array to pass rots\nexport function* testIterator(data) {\n    for (const a of data) {\n        yield* a;\n    }\n};\n\nexport const mergeFlights = (flights1, flights2) => {\n    const f1 = [...flights1];\n    const f2 = [...flights2];\n    if (f2.length>0) {\n        if (f2[0].stop==='0,00' && f1.length>0) {\n            const flight2 = f2.shift();\n            const flight1 = {...f1.pop()};\n            flight1.end = flight2.end;\n            return f1.concat(flight1, [...f2]);\n        }\n    }\n    return f1.concat(f2);\n};\n//merge Rot without needing to copy the EP5 structure\nexport const mergeRots = (data, taxYear, taxData, tzConverter) => {\n    const currentIt = Array.isArray(data) ? testIterator(data) : ep5Iterator(data);\n    const nextIt = Array.isArray(data) ? testIterator(data) : ep5Iterator(data);\n    nextIt.next();\n    const mergedRots = [];\n    for (const rot of currentIt) {\n        const next = nextIt.next().value;\n        if (next && rot.isComplete === '<' && next.isComplete === '>' && rot.end.substring(0, 7) === next.end.substring(0, 7)) {\n            const [merged] = buildRots(mergeFlights(rot.flights, next.flights), {base:rot.base, tzConverter, \"iataMap\": iata2country});\n            const [mergedWithIndemnities] = addIndemnities(taxYear,[merged], taxData, tzConverter);\n            mergedRots.push(mergedWithIndemnities);\n            // skip next\n            currentIt.next();\n            nextIt.next();\n        } else {\n            mergedRots.push(rot);\n        }\n    }\n    return mergedRots;\n};\n\nexport const ep5Parser = (text, fileName, fileOrder, taxYear, taxData, base, tzConverter) => {\n    const result = {\"type\": \"ep5\", fileName, fileOrder};\n    const previousTaxYear = (parseInt(taxYear, 10) - 1).toString();\n    const nextTaxYear = (parseInt(taxYear, 10) + 1).toString();\n    let match;\n    let pattern;\n    let month;\n    let year;\n    // search EP5 Date like JANVIER 2020\n    pattern = String.raw`\\s(${EP5MONTHS.join('|')})\\s+?(20\\d{2})`;\n    const regex = new RegExp(pattern);\n    if (null !== (match = regex.exec(text))) {\n        const monthIndex = EP5MONTHS.indexOf(match[1]);\n        month = (monthIndex + 1).toString(10).padStart(2, '0');\n        year = match[2];\n    }else{\n        throw new Error(`EP5 parser:  Date not found in ${fileName}`);\n    }\n\n    //search EP5 for flights\n    if (month === \"01\" && year === nextTaxYear) {\n        result.date = `${taxYear}-13`;\n    }else if (month === \"12\" && year === previousTaxYear) {\n        result.date = `${taxYear}-00`;\n    } else {\n        result.date = `${year}-${month}`;\n        if ((year) !== taxYear) return result;\n    }\n\n    //0,00 T-77W  GSQY 0 PEK  01 00,00 CDG  01 04,03\n    //Ce pattern ne prend pas les simus\n    //1 : temps d'arrêt précédent 0,00 si à cheval sur mois precedent\n    //2 : type avion ou espace si mep\n    //3 : immatriculation\n    //4 : type activité (0)\n    //5 : escale départ\n    //6 : jour départ\n    //7 : heure decimale tu départ (00,00 si début de mois)\n    //8 : escale arrivée\n    //9 : jour arrivée\n    //10: heure decimale tu arrivée  (24,00 si fin de mois et à cheval)\n    pattern = /([0-9,]+)\\s(?:.{5})\\s{2}(?:\\S{4})\\s(?:.+?)\\s(\\S{3})\\s+(\\d+)\\s+([0-9,]+)\\s+(\\S{3})\\s+(\\d+)\\s+([0-9,]+)/g;\n    const flights = [];\n    while (null !== (match = pattern.exec(text))) {\n        const [, stop, dep, depDay, depTime, arr, arrDay, arrTime] = match;\n        flights.push({stop, dep, \"start\": `${year}-${month}-${depDay}T${ep5Time2iso(depTime)}`, arr, \"end\": `${year}-${month}-${arrDay}T${ep5Time2iso(arrTime)}`});\n    }\n    // in case of multiple EP5 pages, ensure flights are sorted by start date\n    const sortedFlights = flights.sort((a, b) => a.start.localeCompare(b.start))\n    let rots = buildRots(sortedFlights, {base, tzConverter, \"iataMap\": iata2country});\n    rots = addIndemnities(taxYear, rots, taxData, tzConverter, fileName);\n    result.rots = rots;\n    return result;\n};\n","import { writable, readable, derived } from 'svelte/store';\nimport {iso2FR, iso2AST, mergeRots} from './parsers/ep5Parser';\n\nexport const BASES = [\n    {label: \"Marseille\", selected: false, value: ['MRS'], tzConverter: iso2FR},\n    {label: \"Nice\", selected: false, value: ['NCE'], tzConverter: iso2FR},\n    {label: \"Paris\", selected: true, value: ['CDG', 'ORY'], tzConverter: iso2FR},\n    {label: \"Toulouse\", selected: false, value: ['TLS'], tzConverter: iso2FR},\n    {label: \"Pointe-à-Pitre\", selected: false, value: ['PTP'], tzConverter: iso2AST}\n].sort((a, b) => (a.label.localeCompare(b.label)));\n\nexport const DATASET = [\n    {label: \"2024\", selected: false, url: `./data/data2023b.json`},\n    {label: \"2023\", selected: true, url: `./data/data2023b.json`}, // see save method in makeData\n    {label: \"2022\", selected: false, url: \"./data/data2022.json\"},\n    {label: \"2021\", selected: false, url: \"./data/data2021.json\"},\n    {label: \"2020\", selected: false, url: \"./data/data2020.json\"},\n    {label: \"2019\", selected: false, url: \"./data/data2019.json\"},\n    {label: \"2018\", selected: false, url: \"./data/data2018.json\"}\n].sort((a, b) => (b.label.localeCompare(a.label)));\n\nconst defaultYear = DATASET.filter(option => option.selected).pop().label;\nexport const base = writable(BASES.filter(option => option.selected).pop().value);\nexport const tzConverter = writable(BASES.filter(option => option.selected).pop().tzConverter);\n\nfunction resettable(resetValue) {\n    const { subscribe, set, update } = writable(resetValue);\n    return {\n        subscribe,\n        set,\n        update,\n        reset: () => set((typeof resetValue === 'object') ? {...resetValue} : Array.isArray(resetValue) ? [...resetValue] : resetValue)\n    };\n}\n\nconst patchLog = () => {\n    const { subscribe, set, update } = writable(new Array());\n    const push = (store, type, values) => store.push({type, values });\n    let nativeConsoleLog, nativeConsoleError;\n    if (typeof window !== \"undefined\" && console) { // patch only in browser\n        nativeConsoleLog = console.log;\n        nativeConsoleError = console.error;\n    }\n    const newConsoleLog = function () {\n        update((theStore) => {\n            push(theStore, 'log', [...arguments]);\n            return theStore;\n        });\n        if (nativeConsoleLog && console) nativeConsoleLog.apply(console, arguments);\n    };\n    const newConsoleError = function () {\n        update((theStore) => {\n            push(theStore, 'error', [...arguments]);\n            return theStore;\n        });\n        if (nativeConsoleError && console) nativeConsoleError.apply(console, arguments);\n    };\n    if (typeof window !== \"undefined\" && console) {\n        console.log = newConsoleLog;\n        console.error = newConsoleError;\n    }\n    return {\n        subscribe,\n        'log': newConsoleLog,\n        'error': newConsoleError,\n        'reset': () => set(new Array())\n    }\n}\n\nexport const log = patchLog();\nfunction isRegisterEmpty () {\n    return Object.keys(this).length === 2;\n}\nexport const ep5 = resettable({type: \"ep5\", isEmpty: isRegisterEmpty});\nexport const paySlips = resettable({type: \"pay\", isEmpty: isRegisterEmpty});\nexport const nuiteesInput = resettable();\nexport const nuiteesAF = resettable();\n\nconst empty = () => {\n    ep5.reset();\n    paySlips.reset();\n    log.reset();\n    nuiteesInput.reset();\n    nuiteesAF.reset();\n}\n\nexport const taxYear = writable(defaultYear);\nexport const taxData = derived(taxYear, ($taxYear, set) => {\n    //set(undefined);\n    empty();\n    fetch(DATASET.filter(option => option.label === $taxYear).pop().url)\n    .then(res => res.json())\n    .then(data => set(data));\n}, undefined);\n\nexport const pairings = derived(\n    [ep5, taxYear, taxData, tzConverter],\n    ([$ep5, $taxYear, $taxData, $tzConverter]) => {\n        if ($taxData === undefined) return [];\n        return mergeRots($ep5, $taxYear, $taxData, $tzConverter);\n    }\n);\nexport const fraisDeMission = derived(pairings, $pairings => Object.values($pairings).reduce((a, c) => a + c.indemnity, 0).toFixed(0));\n\nexport const online = readable({}, set => {\n    const update_network_status = () => {\n        set(navigator.onLine);\n    };\n\n    if (\n        (typeof navigator !== \"undefined\") &&\n        'onLine' in navigator\n    ) {\n        update_network_status();\n        window.addEventListener('offline', update_network_status);\n        window.addEventListener('online', update_network_status);\n    } else {\n        set(undefined);\n    }\n\n    return () => {\n        if (\n            (typeof navigator !== \"undefined\") &&\n            'onLine' in navigator\n        ) {\n            window.removeEventListener('offline', update_network_status);\n            window.removeEventListener('online', update_network_status);\n        }\n    };\n});\n\nexport const swDismiss = writable(false);\nexport const wb = writable();\n\nlet swLastUpdateDate = new Date();\nexport const checkSWUpdate = () => {\n    if ('serviceWorker' in navigator) {\n        const timeout = ('process.env.NODE_ENV' !== '\"development\"') ? 1800000 /* 30 mn */ : 2000;\n        if ((new Date() - swLastUpdateDate) > timeout) {\n            navigator.serviceWorker.getRegistration().then(reg => {\n                if (reg) {\n                    if (!reg.waiting) {\n                      reg.update();\n                    } else {\n                      reg.waiting.postMessage('SKIP_WAITING');\n                    }\n                    swDismiss.set(false);\n                    swLastUpdateDate = new Date();\n                }\n            }, console.error);\n        }\n    }\n}\n\nexport const handleVisibilityChange = () =>{\n    if (document && document.visibilityState && document.visibilityState === 'visible') {\n        checkSWUpdate();\n    }\n}\nexport const route = readable(null, set => {\n    const hashchange = () => {\n        set(window.location.hash.substr(1) || '/');\n        checkSWUpdate();\n    };\n    hashchange();\n    window.addEventListener('hashchange', hashchange);\n\n    return () => {\n        window.removeEventListener('hashchange', hashchange);\n    };\n});\n","<script context=\"module\">\n    import {writable} from 'svelte/store';\n    export const viewLog = writable(false);\n    import {fade} from 'svelte/transition';\n</script>\n\n<script>\n    import { log } from \"../stores\";\n\n    const text2html = (text) => text.replace(/\\n/g, \"<br/>\");\n    const renderText = (text) => `<p>${text2html(text)}</p>`;\n    const renderStyledText = (logEvent) => {\n        const styles = logEvent.values.slice(1);\n        const message = logEvent.values[0];\n        const markerCount = message.match(/%c/g).length;\n        styles.length = markerCount;\n        const results = [];\n        const changeStyleColor = (text) => {\n            return text\n                .replace('color: darkorange;', 'color: var(--maximum-yellow-red);')\n                .replace('color: red;', 'color: var(--redaf);')\n                .replace('color: black;', 'color: var(--blueaf);')\n        }\n        for (const [i, text] of Object.entries(message.split(\"%c\"))) {\n            if (i > 0)\n                results.push(\n                    `<span style=\"${changeStyleColor(styles[i - 1])}\">${text2html(text)}</span>`\n                );\n        }\n        return `<p>${results.join(\"\")}</p>`;\n    };\n    const describe = (value) => {\n        if (value instanceof Error) {\n            return value.message;\n        } else if (value === null) {\n            return 'null';\n        } else if (value === undefined) {\n            return 'undefined';\n        } else if (\n            Object.prototype.toString.call(value) === \"[object String]\"\n        ) {\n            return value.toString();\n        } else if (value.toString) {\n            return value.toString();\n        } else {\n            return \"alerte visible dans la console du navigateur\";\n        }\n    };\n    const renderLogEvent = (logEvent) => {\n        try {\n            const results = [];\n            if (!Array.isArray(logEvent.values) || logEvent.values.lenght === 0)\n                return \"\";\n            if (Object.prototype.toString.call(logEvent.values[0]) === \"[object String]\" && logEvent.values[0].includes(\"%c\")) {\n                results.push(renderStyledText(logEvent));\n            } else {\n                for (const value of logEvent.values) {\n                    results.push(renderText(describe(value)));\n                }\n            }\n            return `<li class=\"${logEvent.type}\">${results.join(\"\")}</li>`;\n        } catch (err) {\n            return `<li class=\"error\"><p>Erreur dans la console: ${err.message}</p></li>`;\n        }\n    };\n    const clear = () => {\n        log.reset();\n        $viewLog = false;\n    };\n    const scrollToBottom = (node) => {\n        node.scrollTop = node.scrollHeight;\n    };\n\n</script>\n\n<style>\n    .window-wrapper {\n        width: 60ch;\n        max-width: 100%;\n        height: 50%;\n        position: fixed;\n        right: 0px;\n        z-index: 15;\n        opacity: 0.96;\n    }\n    .window {\n        height: 100%;\n        background: var(--background-color);\n        border: 3px solid var(--blueaf);\n        border-top: none;\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        overflow: auto;\n        border-bottom-left-radius: 5px;\n        border-bottom-right-radius: 5px;\n    }\n    .head {\n        background: var(--blueaf);\n        color: var(--background-color);\n        display: flex;\n        flex: 0 0 auto;\n        align-items: center;\n        padding: 5px 3px 5px 12px;\n        border-top-left-radius: 5px;\n        border-top-right-radius: 5px;\n    }\n    .head button {\n        margin: 0 0 0 20px;\n        padding: 0.2em 0.3em;\n    }\n\n    :global(.console) {\n        font-family: monospace;\n        font-size: small;\n        display: flex;\n        flex-direction: column;\n        min-height: min-content; /* needs vendor prefixes */\n    }\n    :global(.console ol){\n        list-style: none;\n        counter-reset: console-counter;\n        padding-inline-start: 0px;\n    }\n    :global(.console ol li) {\n        counter-increment: console-counter;\n        position: relative;\n    }\n    :global(.console ol li::before) {\n        content: counter(console-counter);\n        font-weight: bold;\n        font-size: 1rem;\n        right: 7px;\n        position: absolute;\n        top: 0;\n        color: rgba(var(--blueaf_rgb), 0.2);\n    }\n    :global(.console p, .console ol) {\n        margin-block-end: 0px;\n        margin-block-start: 0px;\n    }\n    :global(.console li) {\n        /* log & error */\n        padding: 5px 10px;\n        border-bottom: 1px solid #eee;\n    }\n    :global(.console .error) {\n        background-color: #ff000008;\n        color: var(--redaf);\n    }\n</style>\n{#if $viewLog}\n<div class=\"window-wrapper\" transition:fade=\"{{duration: 200}}\">\n    <div class=\"head\">\n        <div>Alertes reçues</div>\n        <button on:click={clear}>Effacer</button>\n        <span class=\"flexspace\" />\n        <button on:click={() => ($viewLog = false)}><b>Ｘ</b></button>\n    </div>\n    <div class=\"window\" use:scrollToBottom>\n        <div class=\"console\"><ol>\n            {#each $log as logEvent}\n                {@html renderLogEvent(logEvent)}\n            {/each}\n        </ol></div>\n    </div>\n</div>\n{/if}","<script>\n    import FlagSignifier from '../components/FlagSignifier.svelte';\n    import Link from '../components/Link.svelte';\n    import {htmlLogo, Deferred} from '../components/utils';\n    const fontObserver = (document.fonts) ? document.fonts.load(\"3em Abril Fatface\") : (new Deferred()).resolve(true);\n    import { fly } from 'svelte/transition';\n    import { viewLog } from '../components/LogWindow.svelte';\n</script>\n\n<main>\n    <div class=\"blockquote-wrapper\">\n        <div class=\"logo\">{@html htmlLogo}</div>\n        {#await fontObserver then value}\n        <div class=\"blockquote\" in:fly={{ x: ($viewLog) ? 0 : 600, duration: ($viewLog) ? 0 : 1000 }}>\n            <h1>\n                Simplifier <span style=\"color:var(--blueaf)\">les impôts des pilotes</span> en respectant <span style=\"color:var(--blueaf)\">la confidentialité.</span>\n            </h1>\n            <h4>&mdash;@flyingeek<br><em>pilote de ligne</em></h4>\n        </div>\n        {/await}\n    </div>\n\n    <section>\n        <FlagSignifier title=\"Un outil simple et rapide\">\n            <svg slot=\"icon\" width=\"47px\" height=\"47px\" viewBox=\"0 0 512 512\">\n                <rect x=\"27.689\" y=\"181\" width=\"58.8\" height=\"30\"/>\n                <rect x=\"27.689\" y=\"301\" width=\"58.8\" height=\"30\"/>\n                <rect y=\"241\" width=\"86.49\" height=\"30\"/>\n                <path d=\"M314.244,58.245c-109.042,0-197.755,88.713-197.755,197.755s88.712,197.755,197.755,197.755S512,365.042,512,256\n                    S423.287,58.245,314.244,58.245z M314.244,423.755c-92.5,0-167.755-75.255-167.755-167.755S221.744,88.245,314.244,88.245\n                    C406.745,88.245,482,163.5,482,256S406.745,423.755,314.244,423.755z\"/>\n                <polygon points=\"323.93,263.454 323.93,166.557 293.93,166.557 293.93,279.313 371.238,331.996 388.133,307.205\"/>\n            </svg>\n\n            <ol slot=\"content\">\n                <li>Récupérez vos EP4/EP5 et vos bulletins de salaire sur <Link href=\"https://www.mypeopledoc.com\">MyPeopleDoc</Link></li>\n                <li>Choisissez l’année en haut à droite sur <b>{@html htmlLogo}</b></li>\n                <li>Déposez vos fichiers dans <a href=\"#/mission\" >Frais de Mission</a>\n                    ou dans <a href=\"#/pay\" >Salaire</a></li>\n            </ol>\n\n        </FlagSignifier>\n        <FlagSignifier title=\"Une confidentialité préservée\">\n            <svg slot=\"icon\" width=\"47px\" height=\"47px\" viewBox=\"0 0 47 47\">\n                <path d=\"M34.451,18.851v-7.893C34.451,4.915,29.539,0,23.497,0c-6.04,0-10.952,4.915-10.952,10.958v7.893H7.471V47h32.059V18.851\n                H34.451z M18.026,10.958c0-3.023,2.452-5.481,5.47-5.481s5.47,2.458,5.47,5.481v7.893h-10.94V10.958z M21.817,41.934l-10.171-7.216\n                l3.188-5.985l7.277,6.119l10.479-10.27l2.761,4.82L21.817,41.934z\"/>\n            </svg>\n            <p slot=\"content\">Inutile de partager son calendrier ou d’envoyer des données sur Internet&#8239;: <b>{@html htmlLogo}</b>\n                fonctionne directement dans votre navigateur, aucun fichier n’est transmis sur le réseau, aucune donnée n’est collectée. </p>\n        </FlagSignifier>\n        <FlagSignifier title=\"Des sources fiables\">\n            <svg slot=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <ellipse cx=\"12\" cy=\"5\" rx=\"9\" ry=\"3\"></ellipse>\n                <path d=\"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3\"></path>\n                <path d=\"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5\"></path>\n            </svg>\n            <div slot=\"content\">\n                <p>Chaque année <b>{@html htmlLogo}</b> récupère les données à la source&#8239;: le montant des indemnités provient du\n                    <strong>Ministère de l’Économie</strong>, les taux de change sont ceux de la <strong>Banque de France</strong>.</p>\n                <p>Le programme en lui même inclus des tests permettant de fiabiliser les résultats\n                    et les erreurs détectées sont clairement affichées. Les exemples du <strong>Mémento fiscal du SNPL</strong>\n                    ont été utilisés pour tester et valider les résultats de l’application.</p>\n            </div>\n        </FlagSignifier>\n    </section>\n</main>\n\n<style>\n    /* For screen > 700px */\n    @media all and (min-width: 770px) {\n        .blockquote h1 {\n            font-size: 3rem;\n            line-height: 1.2;\n        }\n        .blockquote-wrapper {\n            flex-wrap: nowrap;\n            max-width: 1000px;\n            margin-left: auto;\n            margin-right: auto;\n            justify-content: left;\n        }\n        .logo {\n            margin-right: 30px; /* to emulate column gap*/\n            margin-top: 60px;\n            margin-left: 40px;\n        }\n        section {\n                padding: 0 40px;\n        }\n    }\n    main {\n        overflow-x: hidden;\n    }\n    div.logo {\n        font-size: 4em;\n        font-weight: 800;\n    }\n    section {\n        margin: 80px auto 0 auto;\n        max-width: 1000px;\n        text-align: justify;\n    }\n    section a {\n        white-space: nowrap;\n    }\n\n    ol {\n        list-style: none;\n        counter-reset: my-awesome-counter;\n        margin: 0;\n        padding: 0;\n    }\n    ol li {\n        counter-increment: my-awesome-counter;\n        margin-bottom: 0.5rem;\n    }\n    ol li::before {\n        content: counter(my-awesome-counter);\n        font-weight: bold;\n        font-size: 2rem;\n        margin-right: 0.5rem;\n        line-height: 2rem;\n        position: relative;\n        top: 0.3rem;\n    }\n/* center the blockquote in the page */\n:global(.blockquote-wrapper) {\n    display: flex;\n    flex-wrap: wrap;\n    /* column-gap: 30px; */ /* not yes supported by safari */\n    padding: 0 20px;\n    justify-content: center;\n}\n\n/* Blockquote main style */\n:global(.blockquote) {\n    position: relative;\n    /*font-family: 'Barlow Condensed', sans-serif;*/\n    max-width: 620px;\n    margin: 10px;\n    align-self: center;\n}\n\n/* Blockquote header */\n:global(.blockquote h1) {\n    font-family: 'Abril Fatface';\n    position: relative; /* for pseudos */\n    color: var(--redaf);\n    font-size: 2.8rem;\n    font-weight: normal;\n    line-height: 1;\n    margin: 0;\n    border: solid 2px;\n    border-color: var(--blueaf);\n    border-radius:20px;\n    padding: 25px;\n    text-transform: none;\n    text-align: left;\n}\n\n/* Blockquote right double quotes */\n:global(.blockquote h1:after) {\n    content:\"\";\n    position: absolute;\n    border: 2px solid var(--blueaf);\n    border-radius: 0 50px 0 0;\n    width: 60px;\n    height: 60px;\n    bottom: -62px;\n    left: 50px;\n    border-bottom: none;\n    border-left: none;\n    z-index: 3;\n\n}\n\n:global(.blockquote h1:before) {\n    content:\"\";\n    position: absolute;\n    width: 80px;\n    border: 6px solid var(--background-color);\n    bottom: -3px;\n    left: 50px;\n    z-index: 2;\n}\n\n/* Blockquote subheader */\n:global(.blockquote h4) {\n    position: relative;\n    color:var(--blueaf);\n    font-size: 1.3rem;\n    font-weight: 300;\n    line-height: 1.2;\n    margin: 0;\n    padding-top: 15px;\n    z-index: 1;\n    margin-left:150px;\n    padding-left:12px;\n    text-align: left;\n}\n\n:global(.blockquote h4:first-letter) {\n    margin-left:-12px;\n}\n</style>\n","<script>\n    import { htmlLogo } from '../components/utils';\n</script>\n\n<div>\n    <p>{@html htmlLogo} est une aide au calcul des frais professionels sous licence GPLv3.0</p>\n    <p><strong>Les PN restents seuls responsables face à l’administration pour justifier l’exactitude\n        de leur déclaration</strong>\n    </p>\n</div>\n\n<style>\n    div {\n        font-size: small;\n        margin-top: 50px;\n    }\n    p {\n        margin-block-end: 0;\n        margin-block-start: 0;\n    }\n</style>","export default function (urls, test, callback) {\n    let remaining = urls.length\n  \n    function maybeCallback () {\n      remaining = --remaining\n      if (remaining < 1) {\n        callback()\n      }\n    }\n  \n    if (!test()) {\n      urls.forEach(({ type, url, options = { async: true, defer: true }}) => {\n        const isScript = type === 'script'\n        const tag = document.createElement(isScript ? 'script': 'link')\n        if (url.startsWith('http') || url.startsWith('//')){\n          tag.crossOrigin = \"anonymous\";\n        }\n        let onload = true\n        if (isScript) {\n          tag.src = url\n          tag.async = options.async\n          tag.defer = options.defer\n        } else {\n            tag.href = url\n            if ('prefetch' in options){\n                tag.rel = \"prefetch\"\n                remaining -= 1\n                onload = false\n            } else if ('preload' in options) {\n                tag.rel = 'preload'\n                remaining -= 1\n                onload = false\n            } else {\n                tag.rel = 'stylesheet'\n                remaining -= 1\n                onload = false\n            }\n        }\n        if (onload) tag.onload = maybeCallback\n        document.body.appendChild(tag)\n      })\n    } else {\n      callback()\n    }\n  }","\n// decimal is text string representing a float number with two decimals like \"123.45\"\n//\n// cents is a number used to compute sum of decimals without rounding problems\n// decimal \"123.45\" is cents 12345\n//\n\n// convert a text number to a decimal (accepts \"12345,67 or 12345.67 or 12 345.67)\n// forces 2 precision digits\n// returns a string\nexport const decimal = (text) => {\n    const number = text.replace(',', '.').replace(' ', '');\n    const [left, right] = number.split(\".\");\n    return left + '.' + (right||\"00\").padEnd(2, \"0\");\n}\n// decimal to cents\n// returns a number\nexport const decimal2cents = (decimal) => {\n    const [left, right] = decimal.split(\".\");\n    return parseInt(left + (right||\"00\"), 10);\n}\n\n// cents to decimal\n// returns a string\nexport const cents2decimal = (cents) => {\n    const centsString = cents.toString(10);\n    const length = centsString.length;\n    switch (length) {\n        case 2:\n            return '0.' + centsString;\n        case 1:\n            return '0.0' + centsString;\n        default:\n            return centsString.slice(0, -2) + '.' + centsString.slice(-2);\n    }\n}\n\n// collect first group of all matches\n// returns Array of \"decimal\"\nconst matchAll = (text, re, bydefault) => {\n    const results = [];\n    let match;\n    while(null !== (match = re.exec(text))) {\n        results.push(decimal(match[1]));\n    }\n    const found = results.length;\n    if (found > 0) {\n        return results;\n    } else if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return [bydefault];\n    }\n};\n\n// returns first group of last match\n// Throws if no match found\n// returns string\nconst matchLast = (text, re, bydefault) => {\n    let match;\n    let lastMatch;\n    while (null !== (match = re.exec(text))) {\n        lastMatch = match;\n    }\n    if (lastMatch) return lastMatch[1];\n    if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return bydefault;\n    }\n};\n\nconst sum = (decimals) => cents2decimal(decimals.map(decimal2cents).reduce((a, b) => a + b));\n// Parse PaySlip\nexport const payParser = (text, fileName, fileOrder) => {\n    //console.log(text);\n    let result = {\"type\": \"pay\", fileName, fileOrder, errors: []};\n    let re = /(?:IND\\.REPAS_+|INDEMNITE REPAS_+|IR\\.FIN ANNEE DOUBL_+|IR EXONEREES_+|IR NON EXONEREES_+)([\\-0-9, ]+)/g;\n    result.repas = matchAll(text, re, \"0\").map(decimal);\n    // optional quantity and rate before ammount\n    re = /(?:IND\\. TRANSPORT EXO_+|IND\\. TRANSPORT_+|FRAIS REELS TRANSP_+|R\\. FRAIS DE TRANSPORT_+)(?:[\\-0-9, ]+_[\\-0-9, ]+_)?([\\-0-9, ]+)/g;\n    result.transport = matchAll(text, re, \"0\").map(decimal);\n    re = /(?:_I.DECOUCHERS F.PRO_+)([\\-0-9, ]+)/g;\n    result.decouchers_fpro = matchAll(text, re, \"0\").map(decimal);\n    try {\n        const net = matchAll(text, /_Mensuel_[\\-0-9, ]+_{1,2}([\\-0-9, ]+)_/g);\n        result.imposable = sum(net.map(decimal));\n        if (net.length > 1) result.errors.push({\"type\": \"warning\", \"message\":\"Plusieurs bulletins de salaire trouvés\"});\n    } catch (err) {\n        result.errors.push({\"type\": \"error\", \"message\":\"Net imposable non trouvé\"});\n        result.imposable = \"0\";\n    }\n    try {\n        result.cumul = decimal(matchLast(text, /_Annuel_[\\-0-9, ]+_{1,2}([\\-0-9, ]+)_/g));\n    } catch (err) {\n        result.errors.push({\"type\": \"error\", \"msg\":\"Cumul Net imposable non trouvé\"});\n        result.cumul = \"0\";\n    }\n    try {\n        result.date = matchLast(text, /PERIODE DU \\d{2}\\/(\\d{2}\\/\\d{4})/g).split('/').reverse().join('-');\n        if(result.date.endsWith(\"00\")) throw new Error(`Date invalide: ${result.date}`);\n    } catch (err) {\n        throw new Error(`Date non trouvée`);\n    }\n    return result;\n}\n","// returns first group of first match\n// Throws if no match found\n// returns string\nexport const matchFirst = (text, re, bydefault) => {\n    let match;\n    if (null !== (match = re.exec(text))) {\n        return match[1];\n    }\n    if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return bydefault;\n    }\n};\n\n// Parse Attestation de décompte des nuitées AF\nexport const nightsAFParser = (text, fileName, fileOrder, taxYear) => {\n    let result = {\"type\": \"nights\", fileName, fileOrder, errors: []};\n    let total;\n    try {\n        total = matchFirst(text, /compte s'élève à:\\s([\\-0-9,. ]+)\\sEuros/);\n        total = parseFloat(total.replace(/\\s+/g, '').replace(',', '.'));\n    }catch(err) {\n        result.errors.push({\"type\": \"error\", \"message\":\"Montant des nuitées AF non trouvé\"})\n    }\n    result.total = total;\n    result.date = taxYear;\n    return result;\n};","import {payParser} from \"./payParser\";\nimport {ep5Parser, EP5MONTHS} from \"./ep5Parser\";\nimport {nightsAFParser} from \"./nightsAFParser\";\n\n// Based on PDF text content, performs task(s)\n// Return array of result\nexport const router = (text, fileName, fileOrder, taxYear, taxData, base, tzConverter) => {\n    const results = [];\n    if (text.match(/BULLETIN DE PAIE_(AIR FRANCE|BASE|DP GN)/)) {\n        try  {\n            const result = payParser(text, fileName, fileOrder);\n            if (result.errors) {\n                for (const error of result.errors) {\n                    results.push({\"type\": error.type, \"msg\": error.message, fileName, fileOrder, \"content\": text});\n                }\n            }\n            results.push(result);\n        } catch (err) {\n            results.push({\"type\": \"error\", \"msg\":`${err.message}`, fileName, fileOrder, \"content\": err});\n        }\n    }else{\n        const isNuiteesAF = text.indexOf(`ATTESTATION DE DECOMPTE DES NUITEES POUR L'ANNEE ${taxYear}`) !== -1;\n        if(text.indexOf('CARNET _DE _VOL _- _EP _5')!== -1) {\n            if(isNuiteesAF) {\n                results.push(nightsAFParser(text, fileName, fileOrder, taxYear));\n            }else{\n                results.push(ep5Parser(text, fileName, fileOrder, taxYear, taxData, base, tzConverter));\n            }\n        }else if(isNuiteesAF) {\n            results.push(nightsAFParser(text, fileName, fileOrder, taxYear));\n        }\n    }\n    if (results.length === 0) {\n        if(text.indexOf(\"ATTESTATION DE DECOMPTE DES NUITEES POUR L'ANNEE \") !== -1) {\n            results.push({\"type\": \"nuitées\", \"error\":`année ≠ ${taxYear}`, fileName, fileOrder, \"content\": text})\n        } else if(text.indexOf('CARNET _DE _VOL _- _EP _5')=== -1){\n            const pattern = String.raw`_EP\\s?_4.+?_(${EP5MONTHS.join('|')})\\s+?(20\\d{2})`;\n            const regex = new RegExp(pattern);\n            let match;\n            if (null !== (match = regex.exec(text))) {\n                const monthIndex = EP5MONTHS.indexOf(match[1]);\n                const month = (monthIndex + 1).toString(10).padStart(2, '0');\n                const year = match[2];\n                const previousTaxYear = (parseInt(taxYear, 10) - 1).toString();\n                const nextTaxYear = (parseInt(taxYear, 10) + 1).toString();\n                if (year === taxYear || (month === \"01\" && year === nextTaxYear) || (month === \"12\" && year === previousTaxYear)) {\n                    results.push({\"type\": \"ep4\", \"warning\": `absence d'EP5`, fileName, fileOrder, \"content\": text});\n                } else {\n                    results.push({\"type\": \"ep4\", \"date\": `${year}-${month}`, fileName, fileOrder, \"content\": text});\n                }\n            }else{\n                results.push({\"type\": \"error\", \"msg\":\"fichier non reconnu\", fileName, fileOrder, \"content\": text});\n            }\n        }else{\n            results.push({\"type\": \"error\", \"msg\":\"fichier non reconnu\", fileName, fileOrder, \"content\": text});\n        }\n    }\n    return results;\n}\n","<script context=\"module\">\n    import loader from \"./async-script-loader.js\";\n    import { Deferred } from \"./utils.js\";\n    import { onMount} from \"svelte\";\n    import {nuiteesAF} from '../stores';\n    const pdfjsWorkerSrc = \"CONF_PDFJS_WORKER_JS\";\n    let pdfWorker;\n    let seqOrder = 0;\n    const preloadFiles = [\n        { type: \"script\", url: \"CONF_PDFJS_JS\" }\n    ];\n\n    const getPageText = async (pdf, pageNo, separator = \"\") => {\n        const page = await pdf.getPage(pageNo);\n        const tokenizedText = await page.getTextContent();\n        return tokenizedText.items.map((token) => token.str).join(separator);\n    };\n\n    const getPDFText = async (source, separator = \"\") => {\n        const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n        const pdfPages = [];\n        const pdf = await pdfjsLib.getDocument(source).promise;\n        const maxPages = pdf.numPages;\n        for (let pageNo = 1; pageNo <= maxPages; pageNo += 1) {\n            const pageText = await getPageText(pdf, pageNo, separator);\n            pdfPages.push(pageText);\n        }\n        return pdfPages.join(\"\\n\");\n    };\n</script>\n\n<script>\n    import {taxYear, taxData, base, tzConverter, ep5, paySlips} from '../stores';\n    import {router} from '../parsers/router';\n    const acceptedType = 'application/pdf'; \n    let disabled = false; // locally during file processing\n    let ready = new Deferred();\n    let name = \"file\";\n    let dropzoneHasFocus = false;\n\n    function preload() {\n        loader(\n            preloadFiles,\n            () => !!window[\"pdfjs-dist/build/pdf\"],\n            () => {\n                const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n                pdfjsLib.GlobalWorkerOptions.workerSrc = pdfjsWorkerSrc;\n                if (!pdfWorker || pdfWorker.destroyed) {\n                    pdfWorker = new pdfjsLib.PDFWorker({verbosity: 0});\n                }\n                ready.resolve(true);\n            }\n        );\n    }\n    class Warning extends Error {};\n\n    const getPDF = (file, fileName) => {\n        const reader = new FileReader();\n        return new Promise((resolve, reject) => {\n            reader.onload = (ev) => {\n                if (!pdfWorker || pdfWorker.destroyed) {\n                    const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n                    pdfWorker = new pdfjsLib.PDFWorker({verbosity: 0});\n                }\n                getPDFText({ data: ev.target.result , verbosity: 0, worker: pdfWorker}, \"_\").then(\n                    (text) => {\n                        if (text) {\n                            resolve(text);\n                        } else {\n                            const err = new Warning(`%c${fileName}\\n%cabsence de texte dans le PDF`);\n                            reject(err);\n                        }\n                    },\n                    (err) => reject(err)\n                );\n            };\n            reader.onerror = (err) => {\n                reject(new Warning(`%c${fileName}\\n%cfichier illisible !`));\n            };\n            reader.readAsArrayBuffer(file);\n        });\n    };\n    async function processFiles(files, target) {\n        disabled = true;\n        await ready.promise.then(() => {\n            const promises = [];\n            const basename = (file) => file.name.split(/([\\\\/])/g).pop();\n            let batchPaySlips = {};\n            let batchEp5 = {};\n            for (let i = 0; i < files.length; i++) {\n                const file = files[i];\n                if (file) {\n                    const fileName = basename(file);\n                    promises.push(\n                        getPDF(file, fileName).then((text) => {\n                            const results = router(text, fileName, i + seqOrder, $taxYear, $taxData, $base, $tzConverter);\n                            results.forEach(result => {\n                                if (result.type === 'error') {\n                                    console.log(`%c${fileName}\\n%c${result.msg}`, 'font-family: monospace;', 'color: red;');\n                                    //console.log(result);\n                                    return;\n                                } else if (result.type === 'warning') {\n                                    console.log(`%c${fileName}\\n%c${result.msg}`, 'font-family: monospace;', 'color: darkorange;');\n                                    return;\n                                }else if (result.type && result.warning) {\n                                    console.log(`%c${fileName}\\n%ctype [${result.type}] %c${result.warning}`, 'font-family: monospace;', 'color: black;', 'color: darkorange;');\n                                    return;\n                                }else if (result.type && result.error) {\n                                    console.log(`%c${fileName}\\n%ctype [${result.type}] %c${result.error}`, 'font-family: monospace;', 'color: black;', 'color: red;');\n                                    return;\n                                } else {\n                                    const [year, month] = result.date.split('-');\n                                    if (year !== $taxYear) {\n                                        console.log(`%c${fileName}\\n%ctype [${result.type}] %cannée ${year} iso ${$taxYear}`, 'font-family: monospace;', 'color: black;', 'color: red;');\n                                        return;\n                                    }\n                                    if (result.type === \"pay\") {\n                                        Object.assign(batchPaySlips, {[month]: result}); // this method of saving result does not refresh svelte\n                                    }else if (result.type === \"ep5\") {\n                                        Object.assign(batchEp5, {[month]: result}); // this method of saving result does not refresh svelte\n                                    }else if (result.type === \"nights\") {\n                                        $nuiteesAF = result.total;\n                                    }\n                                }\n                            });\n                        }).catch((err) => (err instanceof Warning) ? console.log(err.message, 'font-family: monospace;', 'color: red;') : console.error(err))\n                    );\n                }\n            }\n            seqOrder += files.length;\n            const afterLoad = () => {\n                disabled = false;\n                if (target) target.value = null; // reset file input\n                paySlips.update((theStore) => {\n                    return Object.assign(theStore, batchPaySlips);\n                });\n                batchPaySlips = {};\n                ep5.update((theStore) => {\n                    return Object.assign(theStore, batchEp5);\n                });\n                batchEp5 = {};\n            };\n            Promise.all(promises)\n                .then(() => {\n                    afterLoad();\n                }).catch((err) => {\n                    //should never be there but...\n                    afterLoad();\n                    console.error(err);\n                });\n        });\n    }\n    async function processChange(event) {\n        processFiles(event.target.files, event.target);\n    }\n\n    async function processDrop(event) {\n        dropzoneHasFocus = false;\n        disabled = true;\n        const files = [];\n        async function* getEntriesAsAsyncIterator(dirEntry) {\n            const reader = dirEntry.createReader();\n            const getNextBatch = () =>\n                new Promise((resolve, reject) => {\n                    reader.readEntries(resolve, reject);\n                });\n            let entries;  \n            do {\n                entries = await getNextBatch();\n                for (const entry of entries) {\n                    if (entry.isFile) yield entry;\n                }\n            } while (entries.length > 0);\n        }\n        async function fileAsPromise(entry) {\n            return new Promise((resolve, reject) => {\n                entry.file(resolve, reject);\n            });\n        }\n        const entries = [...event.dataTransfer.items].map(item => item.webkitGetAsEntry());\n        for (const entry of entries) {\n            if (entry.isDirectory) {\n                for await (const e of getEntriesAsAsyncIterator(entry)) {\n                    const file = await fileAsPromise(e);\n                    files.push(file);\n                }\n            } else {\n                const file = await fileAsPromise(entry);\n                files.push(file);\n            }\n        }\n        if ((acceptedType !== undefined && acceptedType !== null)) {\n            const isFirefox = navigator && navigator.userAgent && navigator.userAgent.indexOf(\"Firefox\") > -1;\n            processFiles(files.filter(f => f.type === acceptedType || (f.type === '' && isFirefox)));\n        } else {\n            processFiles(files);\n        }\n    }\n    onMount(async () => preload())\n</script>\n\n<!-- <svelte:window on:load={preload}/> -->\n<style>\n\n:global(.dropzone) {\n  border: 2px dashed var(--blueaf);\n  border-radius: 5px;\n  background: var(--dropzone-background-color);\n  width: 80%;\n  margin: 0 auto 2em auto;\n  position: relative;\n}\n:global(.dropzone figure) {\n    width: 60px;\n    height: 60px;\n    display: block;\n    margin: 0 auto;\n}\n:global(.dropzone figure svg) {\n    width: 100%;\n    height: 100%;\n    opacity: 0.5;\n}\n:global(.dropzone figure svg use) {\n    width: 100%;\n    height: 100%;\n}\n:global(.dropzone input[type=file]) {\n    opacity: 0;\n    overflow: hidden;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    z-index: 1;\n}\n:global(.dropzone label) {\n    z-index: -1;\n}\n:global(.dropzone.focus){\n    border-color: var(--green);\n}\n:global(.dropzone.focus svg){\n    fill:var(--green);\n    opacity: 1;\n}\n:global(.dropzone.focus input[type=file]:disabled + label svg) {\n    fill:var(--redaf);\n    opacity: 1;\n}\n:global(.dropzone input[type=file]:hover) {\n    cursor: pointer;\n}\n:global(.dropzone input[type=file]:disabled) {\n    cursor: not-allowed;\n}\n:global( .dropzone div[slot]) {\n    padding: 20px\n}\n:global(.dropzone div[slot=top]) {\n    text-transform: uppercase;\n    font-weight: 200;\n    font-size: 1.5rem;\n}\n:global(.dropzone div[slot=top] strong) {\n    font-weight: 200;\n}\n</style>\n<div class=\"dropzone\" class:focus={dropzoneHasFocus}>\n    {#if false}<slot />{/if}\n    <input\n    id={name}\n    {name}\n    type=\"file\"\n    multiple\n    accept=\"{acceptedType}\"\n    disabled={disabled || !$taxData}\n    on:change={processChange}\n    on:click|once={preload}\n    on:drop|preventDefault={processDrop}\n    on:dragenter={() => dropzoneHasFocus = true}\n    on:dragleave={() => dropzoneHasFocus = false}\n    />\n    <label for={name}>\n        <slot name=\"top\"></slot>\n        <figure>\n            <svg><use xlink:href=\"#upload\"/></svg>\n        </figure>\n        <slot name=\"bottom\"></slot>\n    </label>\n\n</div>\n","<script>\n    import {months, monthsfr} from \"./utils\";\n    import {taxYear, tzConverter} from '../stores';\n    export let data = [];\n    export let name = \"Mois\";\n    let nameLabel;\n    const label = (month) => {\n        switch(month) {\n            case \"13\":\n                return \"01\"\n            case \"00\":\n                return \"12\"\n            default:\n                return month;\n        }\n    };\n    const computeNameLabel = (requested) => {\n        const year = $taxYear;\n        if (!year) return name;\n        if (data.type===\"ep5\") {\n            const prev = (parseInt(year, 10) -1).toString();\n            const next = (parseInt(year, 10) +1).toString();\n            return `${name} de ${monthsfr[11]} ${prev} à ${(requested.length>13) ? monthsfr[0] + ' ' + next : monthsfr[11] + ' ' + year}`;\n        } else {\n            return `${name} de ${monthsfr[0]} ${year} à ${monthsfr[11]} ${year}`;\n        }\n    }\n    const computeRequestedMonths = (dat) => {\n        if (dat.type===\"ep5\") {\n            const tz = ($tzConverter)  ? $tzConverter(\"2020-11-01T00:00Z\").slice(-6) : \"+01:00\";\n            let requestedMonthsDefault;\n            if (tz === \"+00:00\") {\n                requestedMonthsDefault = months.map(m => [m, true]);\n            }else if (tz[0] === '+'){\n                requestedMonthsDefault = ['00', ...months].map(m => [m, true]); // TODO this is the only one working in the logic below\n            }else {\n                requestedMonthsDefault = [...months, '13'].map(m => [m, true]);\n            }\n            let requested = [];\n            if (dat.isEmpty()) {\n                requested = [...requestedMonthsDefault];\n            }else{\n                for (let i=0; i < 14; i++) {\n                    const m = i.toString().padStart(2, '0');\n                    const n = (i + 1).toString().padStart(2, '0');\n                    const p = (i - 1).toString().padStart(2, '0');\n                    if (dat[n]&& dat[n].rots && dat[n].rots.length > 0 && dat[n].rots[0].isComplete===\">\"){\n                        requested.push([m, false]);\n                    }else if (dat[p] && dat[p].rots && dat[p].rots.length > 0 && dat[p].rots[dat[p].rots.length - 1].isComplete===\"<\"){\n                        requested.push([m, false]);\n                    }else if (i!==13){\n                        requested.push([m, true]);\n                    }else if (i===13 && dat[m] !== undefined){\n                        requested.push([m, true]); \n                    }\n                }\n            }\n            nameLabel = computeNameLabel(requested);\n            return requested;\n        }else{\n            nameLabel = computeNameLabel();\n            return months.map(m => [m, false]);\n        }\n    };\n    $: requestedMonths = computeRequestedMonths(data);\n</script>\n<div>\n    <div>{nameLabel}<slot></slot></div>\n    <ul>\n    {#each requestedMonths as [month, optional]}\n    <li class:loaded=\"{data[month] !== undefined}\" class:optional=\"{optional === true}\">{label(month)}</li>\n    {/each}\n    </ul>\n</div>\n\n<style>\n    ul {\n        display: block;\n        margin: 0.5em 0 0 0;\n        padding: 0;\n    }\n    li {\n        --size: 2em;\n        display: inline-block;\n        border-radius: 5px; /*50%;*/\n        width: var(--size);\n        height: var(--size);\n        line-height: var(--size);\n        text-align: center;\n        background-color:var(--redaf);\n        color: var(--white);\n        margin: 2px 5px;\n    }\n    li.loaded {\n        background-color: var(--green) !important;\n    }\n    li.optional {\n        background-color: var(--color);/*orange;*/\n    }\n</style>","<script>\n    import {localeRate, localeDateFormat, localeCurrency} from './utils';\n    import {taxData, pairings} from '../stores';\n    import Link from './Link.svelte';\n    export let tableId = \"Indemnities\";\n\n    function* getCountriesData(dat){\n        const list = [\"EU\"]; // add forfait EU\n        for (const rot of dat) {\n            list.push(...rot.countries);\n        }\n        const sortedList = Array.from(new Set(list)).sort((a, b) => a.localeCompare(b));\n        for (const key of sortedList) {\n            for (const countryData of getData(key)){\n                yield countryData;\n            }\n        };\n    };\n\n    function* getData(key) {\n        const value = $taxData.countries[key];\n        const amounts = (value && value.f && value.f === 1) ? $taxData.countries[\"EU\"].a : (value && value.a) ? value.a : [];\n        for (const [validity, currency, amount] of amounts) {\n            const [startRate, endRate, averageRate, official] = $taxData.exr[currency];\n            yield {\n                \"name\": (key === \"EU\") ? value.n + \"¹\" : value.n,\n                \"code\": key,\n                validity,\n                amount,\n                currency,\n                startRate,\n                endRate,\n                averageRate,\n                official,\n                \"euros\": (parseFloat(amount) / averageRate).toFixed(2),\n                \"zone\": (key === \"EU\") ? \"\" : (value.z === 1) ? \"Moyen\": \"Long\"\n            };\n        }\n\n    };\n    $: countriesData = ($taxData) ? [...getCountriesData($pairings)] : [];\n</script>\n\n{#if countriesData.length > 1}\n<table id={tableId} class=\"data\">\n    <thead>\n        <tr><th colspan=\"9\">Indemnités par pays {$taxData.year} </th></tr>\n        <tr><th colspan=\"2\">Pays</th><th>Validité</th><th>Montant</th><th>Taux</th><th>Taux</th><th>Taux moyen</th><th>Montant €</th><th>Zone</th></tr>\n        <tr><td colspan=\"2\"></td><td>(à compter du)</td><td></td><td>31/12/{parseInt($taxData.year, 10) - 1}</td><td>31/12/{$taxData.year}</td><td></td><td></td><td></td></tr>\n    </thead>\n    <tbody>\n        {#each countriesData as c}\n            <tr>\n                <td>{c.code}</td>\n                <td>{(c.name.length <= 21) ? c.name : c.name.substring(0, 20) + '…'}{(c.official===false) ? \"²\" : \"\"}</td>\n                <td>{localeDateFormat(c.validity)}</td>\n                <td>{`${c.amount} ${c.currency}`}</td>\n                <td>{localeRate(c.startRate)}</td>\n                <td>{localeRate(c.endRate)}</td>\n                <td>{localeRate(c.averageRate)}</td>\n                <td>{localeCurrency(c.euros)}</td>\n                <td>{c.zone}</td></tr>\n        {/each}\n    </tbody>\n    <tfoot>\n        <tr><td colspan=\"9\">1. Le forfait Euro est appliqué dans ces pays: {$taxData.zoneForfaitEuro.join(', ')}</td></tr>\n        {#if countriesData.reduce((a,c) => a | c.official===false, false)}\n            {#if $taxData.year === '2021'}\n                <tr><td colspan=\"9\">2. Taux officiel non communiqué par la BNF, basé sur le taux du marché moyen de Xe.com.</td></tr>\n            {:else}\n                <tr><td colspan=\"9\">2. Taux officiel non communiqué par la BNF, basé sur le taux de <Link href=\"https://github.com/fawazahmed0/currency-api\">currency-api</Link>.</td></tr>\n            {/if}\n        {/if}\n    </tfoot>\n</table>\n{/if}\n\n<style>\n\n/* Hides Taux début, Taux fin in portrait mode on iPad */\n@media (max-width: 1024px) {\n    thead th:nth-child(4), thead th:nth-child(5),\n    td:nth-child(5), td:nth-child(6) {\n        display: none;\n    }\n}\nth, td {\n    text-align: right;\n}\nthead tr:nth-child(2) th {\n    border-bottom: none;\n    padding-top: 0.5em;\n    padding-bottom: 0;\n}\nthead td {\n    border-top: none;\n    font-weight: normal;\n    font-size: x-small;\n}\nthead tr:nth-child(3) {\n    height: 0.7em;\n    line-height: 0.1em;\n    padding-top: 0;\n    padding-bottom: 0;\n}\nthead tr:nth-child(2) th:nth-child(1), tbody td:nth-child(2), td:nth-child(1) {\n    text-align: left;\n}\n</style>\n","<script context=\"module\">\n    import loader from \"./async-script-loader.js\";\n    import { Deferred } from \"./utils.js\";\n    const preloadFiles = [\n        { type: \"script\", url: \"CONF_JSPDF_JS\" , async: false, defer: false }\n    ];\n    const preloadFiles2 = [\n        { type: \"script\", url: \"CONF_JSPDF_TABLE_JS\", async: false, defer: false }\n    ];\n</script>\n<script>\n    import { onMount} from 'svelte';\n    let ready = new Deferred();\n    let disabled = false;\n    export let label = \"Télécharger en PDF\";\n    export let filename = \"table.pdf\";\n    export let tableIds = ['#my-table'];\n    function preload() {\n        loader(\n            preloadFiles,\n            () => !!window[\"jspdf\"],\n            () => {\n                loader(preloadFiles2, () => !!window['jspdfext'], () => {\n                    window['jspdfext'] = \"autotable\";\n                    const fontName = \"CONF_JSPDF_FONT_TTF\".split('/').pop();\n                    if (!window['jspdffont']) {\n                        fetch(\"CONF_JSPDF_FONT_TTF\")\n                        .then( async (res) => {\n                            if (res.ok) {\n                                try{ \n                                    const blob = await res.blob();\n                                    const reader = new FileReader();\n                                    reader.onload = function(event){\n                                        window['jspdffont'] = event.target.result;\n                                        const callAddFont = function () {\n                                            this.addFileToVFS(fontName, window['jspdffont']);\n                                            this.addFont(fontName, fontName.split('.').shift(), 'normal');\n                                        };\n                                        window[\"jspdf\"].jsPDF.API.events.push(['addFonts', callAddFont]);\n                                        disabled = false;\n                                        ready.resolve(true);\n                                    };\n                                    reader.onerror = () => {\n                                        disabled = true;\n                                        ready.reject(`failed to read the downloaded font ${fontName}`);\n                                    }\n                                    reader.readAsBinaryString(blob);\n                                } catch (err) {\n                                    disabled = true;\n                                    ready.reject(err);\n                                }\n                            } else {\n                                disabled = true;\n                                ready.reject(`error loading ${fontName}: ${res.statusText}`);\n                            }\n                        }, err => { /* handles fetch error like no network */\n                            disabled = true;\n                            ready.reject(err);\n                        });\n                    }else{\n                        disabled = false;\n                        ready.resolve(true);\n                    }\n                });\n            }\n        );\n    }\n\n    const download = async (e) => {\n        if (disabled) {\n            e.preventDefault();\n            e.stopPropagation();\n            return false;\n        }\n        disabled = true;\n        try {\n            await ready.promise;\n            if (tableIds.includes('MissionTable')) {\n                const table = document.getElementById(`MissionTable`);\n                const elements = table.querySelectorAll(`summary`);\n                elements.forEach(e => {\n                    e.parentNode.parentNode.innerText = e.innerText;\n                });\n            }\n            for (const tableId of tableIds) {\n                const table = document.getElementById(tableId);\n                table.classList.add(\"print\");\n            }\n            const doc = new jspdf.jsPDF({orientation: \"landscape\"});\n            for (const [i, tableId] of tableIds.entries()) {\n                doc.autoTable({ \n                    html: '#' + tableId,\n                    styles: { font: 'HelveticaUTF8'},\n                    useCss: true, showHead: 'firstPage',\n                    showFoot: 'lastPage',\n                    pageBreak: (i === 0) ? 'auto': 'avoid',\n                    includeHiddenHtml: true\n                });\n            }\n            // doc.save(e.target.download);\n            // only \"application/octet-stream\" works on ipad\n            const filename = e.target.download;\n            const blob = new Blob( [doc.output('arraybuffer', {filename})], { type: \"application/octet-stream\" });\n            if (e.target.href.startsWith('blob:')) URL.revokeObjectURL(e.target.href);\n            e.target.href = URL.createObjectURL(blob);\n            if (tableIds.includes('MissionTable')) {\n                const table = document.getElementById(`MissionTable`);\n                const elements = table.querySelectorAll(`td[title]`);\n                elements.forEach(e => {\n                    e.innerHTML = `<details><summary>${e.innerText}</summary>${e.title}</details>`;\n                });\n            }\n            for (const tableId of tableIds) {\n                const table = document.getElementById(tableId);\n                table.classList.remove(\"print\");\n            }\n        }catch(err){\n            console.error(err);\n        }\n        disabled = false;\n    };\n    onMount(async () => {\n        preload();\n    });\n</script>\n<a href=\".\" class:disabled on:click={download} download={filename}>{label}</a>\n\n<style>\n    :global(a[download]) {\n        padding: 10px;\n        background-color: var(--blueaf);\n        display: inline-block;\n        color: var(--white);\n        border-radius: 5px;\n        text-decoration: none;\n    }\n    a[download].disabled {\n        display: none;\n    }\n</style>","<script>\n    import {localeCurrency} from './utils';\n    import MissionCountries from \"./MissionCountries.svelte\";\n    import DownloadTablePDF from './DownloadTablePDF.svelte';\n    import {taxYear, taxData, pairings, fraisDeMission} from '../stores';\n    import {REFNOTE1} from '../parsers/ep5Parser';\n    export let tableId = \"MissionTable\";\n    const tableIndemnitiesId = tableId + \"Indemnities\";\n</script>\n\n{#if $pairings.length > 0}\n    <DownloadTablePDF tableIds={[tableId, tableIndemnitiesId]} filename={`fraisdemission${$taxYear}.pdf`}/>\n    <table id=\"{tableId}\" class=\"data\">\n        <thead>\n            <tr><th colspan=\"5\">Frais de Mission {$taxYear} : <strong>{$fraisDeMission} €</strong></th></tr>\n            {#if $taxYear !== $taxData.year}\n                <tr class=\"warning\"><th colspan=\"5\">Attention les montants sont basés sur les données fiscales de {$taxData.year}</th></tr>\n            {/if}\n            <tr><th>Date</th><th>Type</th><th>Description</th><th>Formule</th><th>Montant</th></tr>\n        </thead>\n        <tbody>\n            {#each $pairings as rot}\n                <tr>\n                    <td>{rot.start.substring(8,10)}/{rot.start.substring(5,7)}</td>\n                    <td>{rot.days.toString().padStart(2, ' ')} ON</td>\n                    <td>{rot.summary}</td>\n                    <!-- Do not change markup below without editing DownloadTablePDF.svelte -->\n                    <td title=\"{rot.currencyFormula}\"><details><summary>{rot.formula}</summary>{rot.currencyFormula}</details></td>\n                    <td>{localeCurrency(rot.indemnity)}</td>\n                </tr>\n            {/each}\n        </tbody>\n        <tfoot>\n            {#if $pairings.reduce((a,c) => a | c.formula.includes(REFNOTE1), false)}\n                <tr><td colspan=\"5\">1. formule tronquée pour respecter l'année fiscale</td></tr>\n            {/if}\n        </tfoot>\n    </table>\n    <MissionCountries tableId={tableIndemnitiesId}/>\n{:else}\n<div class=\"illustration\">\n    <picture>\n        <!-- <source srcset=\"CONF_FM_EXAMPLE_WEBP\" type=\"image/webp\"> -->\n        <img src=\"CONF_FM_EXAMPLE_IMG\" alt=\"exemple de résultat sur iPad\"/>\n    </picture>\n</div>\n{/if}\n\n\n<style>\n\ntd:nth-child(5), th:nth-child(5){\n    text-align: right;\n    white-space: nowrap;\n}\ndetails[open] summary{\n    margin-bottom: 2px;\n}\n:global(tr.warning th){\n    color: white;\n    background-color: var(--redaf);\n    text-align: center;\n}\n/* Table title*/\n:global(table.data thead tr:nth-child(1) th) {\n    text-align: center;\n    font-size: large;\n    border: none;\n    text-transform: uppercase;\n    font-weight: 300;\n    background-color: var(--table-background-color);\n}\n:global(table.data tfoot tr, tfoot td){\n    border: none;\n    font-size: small;\n}\n:global(table.data tbody td) {\n    font-family: monospace;\n    font-size: 1.3rem;\n}\n:global(table.data) {\n    margin-top: 3em;\n    color: var(--table-color);\n}\n:global(table.data th, table.data td) {\n    border-color: var(--table-border-color);\n}\n\n:global( tbody tr:nth-child(even), thead tr:nth-child(2), thead tr:nth-child(3)) {\n    background-color: var(--table-highlight-color);\n}\n:global(tbody tr:nth-child(odd)) {\n    background-color: var(--table-background-color);\n}\n:global(summary:focus){\n    outline: none;\n}\n:global(table.data.print) {\n    color: black;\n}\n:global(table.data.print tfoot tr) {\n    background-color: white;\n}\n:global(table.data.print thead tr:nth-child(1) th) {\n    background-color: white;\n}\n:global(table.data.print tbody tr:nth-child(odd)) {\n    background-color: white;\n}\n:global(table.data.print tbody tr:nth-child(even), table.data.print thead tr:nth-child(2), table.data.print thead tr:nth-child(3)) {\n    background-color: var(--light-grey);\n}\n:global(table.data.print th, table.data.print td) {\n    border-color: #ccc;\n}\n</style>\n","<script>\n    import Disclaimer from '../components/Disclaimer.svelte';\n    import DropZone from '../components/DropZone.svelte';\n    import MonthStatus from \"../components/MonthStatus.svelte\";\n    import MissionActivities from '../components/MissionActivities.svelte';\n    import {ep5, base, tzConverter, BASES} from '../stores';\n\n    const baseChange = (e) => {\n        // we can change base on a month to month basis, so do not empty\n        const option = BASES.filter(option => option.label === e.target.value).pop();\n        $base = option.value;\n        $tzConverter = option.tzConverter;\n    };\n</script>\n<main>\n    <div class=\"wrapper\">\n        <div class='header'>\n            <label class=\"select\">Indiquez votre base\n                <!-- svelte-ignore a11y-no-onchange -->\n                <select on:change={baseChange}>\n                    {#each Object.values(BASES) as option}\n                        <option value={option.label} selected={$base.join('') === option.value.join('')}>{option.label}</option>\n                    {/each}\n                </select>\n            </label>\n        </div>\n        \n        <DropZone>\n            <div slot=\"top\">\n                Déposez vos <strong>EP5</strong> dans la zone ou Cliquez\n            </div>\n            <div slot=\"bottom\">\n            <MonthStatus data={$ep5} name=\"EP5\" />\n            </div>\n        </DropZone>\n        <MissionActivities />\n    </div>\n    {#if !$ep5.isEmpty()}<Disclaimer/>{/if}\n</main>\n<style>\n    .header{min-height: 50px}\n    .wrapper{max-width:1200px; margin: 0 auto;}\n</style>","<script>\n    import {decimal2cents, cents2decimal} from '../parsers/payParser';\n    import {iso2FR} from '../parsers/ep5Parser';\n    import { taxYear, taxData, fraisDeMission, nuiteesInput, nuiteesAF, pairings} from '../stores';\n    import {months, monthsfr, localeCurrency} from './utils';\n    import DownloadTablePDF from './DownloadTablePDF.svelte';\n    import {fade} from 'svelte/transition';\n\n    export let data;\n    export let tableId=\"PayTable\";\n    const computeTotalImposable = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? decimal2cents(data[month].imposable) : 0;\n        }\n        return cents2decimal(total);\n    };\n    const computeTotalFrais = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? sumFrais(month) : 0;\n        }\n        return cents2decimal(total);\n    };\n    const computeTotalDecouchersFPRO = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? data[month].decouchers_fpro.map(decimal2cents).reduce((a, b) => a + b): 0;\n        }\n        return cents2decimal(total);\n    };\n    const updateNuiteesInput = (real, estimated) => {\n        if (real !== undefined) {\n            $nuiteesInput = real;\n        }else if (estimated){\n            $nuiteesInput = estimated;\n        }\n    }\n\n    const sumFrais = (month) => {\n        return data[month].repas.concat(data[month].transport).map(decimal2cents).reduce((a, b) => a + b);\n    };\n    const roadTrips = (pairings, taxYear) => {\n        if (!pairings || !taxYear) return '';\n        const results = {'count': pairings.length, 'OUT': new Map(), 'IN': new Map()};\n        for (const rot of pairings) {\n            if (iso2FR(rot.start).substring(0,4) === taxYear) {\n                results.OUT.set(rot.dep, (results.OUT.get(rot.dep)||0) + 1);\n            }\n            if (iso2FR(rot.end).substring(0,4) === taxYear) {\n                results.IN.set(rot.arr, (results.IN.get(rot.arr)||0) + 1);\n            }\n        }\n        const to = Array.from(results.OUT).map(([iata, c]) => `${c} trajet${(c>1) ? 's' : ''} vers ${iata}`);\n        const from = Array.from(results.IN).map(([iata, c]) => `${c} trajet${(c>1) ? 's' : ''} depuis ${iata}`);\n        if (results.count === 0) {\n            return '';\n        }else if (results.count === 1) {\n            return `À titre d'information, pour les frais de transport, la rotation représente ${to.join(', ')} et ${from.join(', ')}.`;\n        }\n        return `À titre d'information, pour les frais de transport, les ${results.count} rotations représentent ${to.join(', ')} et ${from.join(', ')}.`;\n    }\n\n    $: totalFrais = computeTotalFrais(data);\n    $: totalImposable = computeTotalImposable(data);\n    $: cumulImposable12 = (data[\"12\"] && data[\"12\"].cumul !== \"0\") ? cents2decimal(decimal2cents(data[\"12\"].cumul)) : undefined;\n    $: abbattement = ($taxData && $taxData.maxForfait10) ? Math.min((cumulImposable12||totalImposable)*0.1, $taxData.maxForfait10) : 0;\n    $: totalDecouchersFPRO = computeTotalDecouchersFPRO(data);\n    $: estimateRatio = ( parseInt($taxYear, 10)  >= 2021) ? 2.7 : 3.31;\n    $: nightsCostEstimate = (Math.ceil(parseFloat(totalDecouchersFPRO) * estimateRatio/100) * 100).toFixed(0);\n    $: updateNuiteesInput($nuiteesAF, nightsCostEstimate);\n    $: fraisReels = parseFloat($fraisDeMission) - parseFloat($nuiteesAF || $nuiteesInput || nightsCostEstimate) - parseFloat(totalFrais);\n    $: roadTripInformation = roadTrips($pairings, $taxYear);\n\n</script>\n{#if !data.isEmpty()}\n<DownloadTablePDF tableIds={[tableId]} filename={`revenus${$taxYear}.pdf`}/>\n{#if ($fraisDeMission > 0)}\n<table class=\"data summary\" id={tableId + 'Summary'}>\n    <col class=\"col1\" />\n    <col class=\"col2\" />\n    <col class=\"col3\" />\n<thead>\n    <tr>\n        <th colspan=\"3\">\n            Comparatif {$taxYear}\n            {#if (!$nuiteesInput || $nuiteesInput == nightsCostEstimate)}\n                <div class=\"estimate\" transition:fade|local><small>basé sur une estimation des nuitées à ±20%</small></div>\n            {/if}\n        </th>\n    </tr>\n    <tr>\n        <th>Nuitées AF</th>\n        <th>Frais&nbsp;de&nbsp;Mission -&nbsp;Nuitées -&nbsp;Frais&nbsp;d’emploi</th>\n        <th>Abattement de 10% plafonné</th>\n    </tr>\n    {#if $taxYear !== $taxData.year}\n    <tr class=\"warning\"><th colspan=\"3\">Attention les montants sont basés sur les données fiscales de {$taxData.year}</th></tr>\n    {/if}\n</thead>\n<tbody>\n    <tr>\n        <td>\n            <input name=\"nuitees\" type=\"number\" disabled={!!$nuiteesAF} bind:value=\"{$nuiteesInput}\" min=\"0\" step=\"100\" placeholder=\"{($nuiteesAF) ? $nuiteesAF : nightsCostEstimate}\"/>\n        </td>\n        <td>{$fraisDeMission} - {parseFloat($nuiteesAF || $nuiteesInput || nightsCostEstimate).toFixed(0)} - {parseFloat(totalFrais).toFixed(0)} = {fraisReels.toFixed(0)} €</td>\n        <td>{abbattement.toFixed(0)} €</td>\n    </tr>\n</tbody>\n<tfoot>\n    <tr>\n        {#if (fraisReels >= abbattement)}\n        <td colspan=\"3\">Sans tenir compte de vos autres frais, vous serez déjà gagnant de <b>{(fraisReels - abbattement).toFixed(0)} €</b> en passant aux frais réels.</td>\n        {:else}\n        <td colspan=\"3\">Il faudra que vos autres frais atteignent <b>{(abbattement - fraisReels).toFixed(0)} €</b> pour qu'une déclaration aux frais réels soit plus avantageuse.</td>\n        {/if}\n    </tr>\n    <tr>\n        <td colspan=\"3\">{roadTripInformation}</td>\n    </tr>\n</tfoot>\n</table>\n{:else}\n<p>Merci de charger vos EP4/EP5 pour afficher le comparatif</p>\n{/if}\n<table class=\"data\" id={tableId}>\n    <thead>\n        <tr><th colspan=\"5\">Détails des salaires {$taxYear}</th></tr>\n        <tr><th>Mois</th><th>Montant imposable</th><th>Cumul imposable</th><th>Frais d’emploi ¹</th><th>Découchers F PRO ²</th></tr>\n    </thead>\n    <tbody>\n        {#each months as month, i}\n            <tr>\n                <td>{monthsfr[i]}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].imposable) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].cumul) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(cents2decimal(sumFrais(month))) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].decouchers_fpro) : \"\"}</td>\n            </tr>\n        {/each}\n        <tr>\n            <th>Total</th>\n            <th>{localeCurrency(totalImposable)}</th>\n            <th></th>\n            <th>{localeCurrency(totalFrais)}</th>\n            <th>{localeCurrency(totalDecouchersFPRO)}</th>\n        </tr>\n    </tbody>\n    <tfoot>\n        <tr>\n            <td colspan=\"5\">1. Les Frais d’emploi comprennent les lignes IND.REPAS, INDEMNITE REPAS, IR.FIN ANNEE DOUBL, IND. TRANSPORT, IND. TRANSPORT EXO, FRAIS REELS TRANSP, R. FRAIS DE TRANSPORT, IR EXONEREES, IR NON EXONEREES du bulletin de paye.</td>\n        </tr>\n        <tr>\n            <td colspan=\"5\">2. Cette colonne reprend la ligne I.DECOUCHERS F.PRO, elle est utilisée pour l’estimation. Pour les impôts, c’est uniquement l’attestation des nuitées AF qui doit être prise en compte.</td>\n        </tr>\n    </tfoot>\n</table>\n{:else}\n    <div class=\"illustration\">\n        <picture>\n            <!-- <source srcset=\"CONF_S_EXAMPLE_WEBP\" type=\"image/webp\"> -->\n            <img src=\"CONF_S_EXAMPLE_IMG\" alt=\"exemple de résultat sur iPad\"/>\n        </picture>\n    </div>\n{/if}\n\n<style>\n    :global(picture img) {\n        max-width: 100%;\n        width:auto;\n        height:auto;\n    }\n    :global(.illustration::after) {\n        content: 'Exemple de résultat';\n        display: block;\n        padding: 2px 5px;\n        background-color: var(--green);\n        color: var(--background-color);\n        opacity: 0.9;\n        font-size: 1.2em;\n        border-radius: 5px;\n        top: calc(34 * calc(100% / 1032));\n        position: absolute;\n        width: 220px;\n        left: 50%;\n        margin-left: -110px;\n        text-transform: uppercase;\n        font-weight: 200;\n    }\n    @media all and (min-width: 1032px) {\n        :global(picture img){\n            max-width: 800px;\n        }\n        :global(.illustration::after) {\n            font-size: 1.5rem;\n            width: 300px;\n            margin-left: -150px;\n        }\n    }\n    :global(.illustration) {\n        margin: 50px auto 0 auto;\n        width: 80%;\n        position: relative;\n    }\n    table.data.summary {\n        table-layout: fixed;\n    }\n    :global(table.data.summary tfoot td) {\n        font-size: initial;\n    }\n    .col1 {\n        width: 140px;\n    }\n    .col2 {\n        width: 50%;\n    }\n    :global(table.data.summary thead th:first-child) {\n        position: relative;\n    }\n    @media all and (min-width: 770px) {\n        .estimate small { width: 240px !important;}\n    }\n    .estimate{\n        position: absolute;\n        bottom: 0px;\n        left: 0px;\n    }\n    .estimate small {\n        border-radius: 2px;\n        padding: 2px;\n        display: block;\n        color: var(--background-color);\n        background-color: var(--green);\n        font-size: small;\n        width: 126px;\n        text-align: center;\n    }\n    td input {\n        margin-bottom: 0;\n        width: 130px;\n    }\n    td input:disabled {\n        color: var(--green);\n        -webkit-text-fill-color: var(--green);\n        opacity: 0.85; /*ios*/\n    }\n    tbody th { /* Total bottom line */\n        font-family: monospace;\n        font-size: 1.3rem;\n    }\n    td:not(:nth-child(1)), th:not(:nth-child(1)){\n        text-align: right;\n    }\n    td:not(:nth-child(1)) {\n        white-space: nowrap;\n    }\n    tbody > tr:nth-child(12) > td:nth-child(3){ /*cumul mois 12 */\n        font-weight: bold;\n    }\n</style>\n","<script>\n    import Disclaimer from '../components/Disclaimer.svelte';\n    import DropZone from '../components/DropZone.svelte';\n    import MonthStatus from \"../components/MonthStatus.svelte\";\n    import PayTable from '../components/PayTable.svelte';\n    import {paySlips} from '../stores';\n</script>\n<main>\n    <div class=\"wrapper\">\n        <div class=\"header\">\n        </div>\n        <DropZone>\n            <div slot=\"top\">\n                Déposez vos <strong>bulletins</strong> dans la zone ou Cliquez\n            </div>\n            <div slot=\"bottom\">\n                <MonthStatus data={$paySlips} name=\"Bulletins de salaire\">, attestation de nuitées si disponible</MonthStatus>\n            </div>\n        </DropZone>\n        <PayTable data={$paySlips}/>\n    </div>\n    {#if !$paySlips.isEmpty()}<Disclaimer/>{/if}\n</main>\n<style>\n    .header{min-height: 50px}\n    .wrapper{max-width:1200px; margin: 0 auto;}\n</style>","<script>\n    import Link from '../components/Link.svelte';\n    import { htmlLogo } from '../components/utils';\n    const ofp2map = 'https://flyingeek.github.io/lido-online/index.html' + ((navigator.standalone === true) ? '#/install': '');\n</script>\n\n## Préambule\n\nCette application a été conçue pour le PilotPad. Elle nécessite des navigateurs récents pour fonctionner&#8239;: Safari iOS13+/ Mac(Mojave/Catalina/Big Sur/Monterey), Firefox 86+, Chrome 87+ et Microsoft Edge 87+ sont compatibles.\nLes PDF utilisés ne transitent sur aucun serveur, tout est calculé localement dans votre navigateur. L’app ne collecte aucune donnée. Tout est __100 % SECURE__.\n\n## Objectifs\n\n__L'application ne gère pas l'article 81 A II qui se substitue pour les pilotes à cette méthode de calcul__\n\nCalculer rapidement, facilement, et sans partage de données&#8239;:\n\n- le décompte des frais de mission, conformément à la méthodologie et aux conventions de calcul du SNPL\n- les frais d’emploi des PN qui doivent s’ajouter aux revenus\n- une estimation du montant des nuitées payées par AF\n- la différence entre (Frais de Mission - Nuitées - Frais d’emploi) et un abattement de 10 % plafonné\n\n__{@html htmlLogo}__ fonctionne aussi pour les pilotes basés en province. (lire au préalable \"Choix de la base\").\n\n## Utilisation sur l'iPad\n\nSur MyPeopleDoc, commencez par sélectionner les bulletins de salaire de l'année N, et les ep4-ep5 de décembre N-1 à février N+1. Puis, en cliquant sur téléchargement, vous recevrez un lien par email. Dans votre dossier de téléchargement sur l'iPad, cliquez sur l'archive téléchargée, elle va se décompresser. Ensuite, après avoir vérifié que l'année N est bien sélectionnée en haut à droite de  __{@html htmlLogo}__, deux solutions:\n\n- Soit, vous cliquez dans la zone de la page Frais de Mission ou de la page Salaire, puis vous choisissez le dossier des fichiers décompressés, puis vous cliquez sur \"Sélectionner\", puis \"Tout select.\" et enfin, \"Ouvrir\"\n- Soit, vous utilisez le mode Slide Over, ou le mode SplitView, avec l'application Fichiers, et vous faites glisser le dossier des fichiers décompressés dans la zone de la page Frais de Mission ou de la page Salaire\n\nSi vous le souhaitez, l’application peut être installée sur l’écran d’accueil du PilotPad via le menu «&#8239;partage&#8239;» <svg style=\"width: 1em; display: inline-block; height: 1em; vertical-align: bottom;\"><use xlink:href=\"#share\"/></svg> de Safari. (comme OFP2MAP).\n\n## Utilisation de manière plus générale\n\n- Les PDF mensuels sont symbolisés par des carrés numérotés. Un PDF manquant est rouge, un PDF optionnel est bleu, un PDF chargé est vert.\n- Vous pouvez glisser-déposer un dossier ou des fichiers\n- Vous pouvez déposer les PDF indifféremment sur la page Salaire ou la page Frais de mission\n- Le symbole ▶ signale des informations additionnelles accessibles soit au survol de la souris, soit en cliquant sur la ligne\n- Changer d’année fiscale efface les résultats\n- __flytax.fr__ (plus simple à mémoriser et à partager) redirige vers __{@html htmlLogo}__ mais est bloqué sur le réseau AF\n- __{@html htmlLogo}__ peut fonctionner en mode déconnecté\n\nEn cas d’anomalie, le pictogramme <svg style=\"width: 1em; display: inline-block; height: 1em; vertical-align: text-top; fill:red\"><use xlink:href=\"#alert\"/></svg> apparaîtra en haut à droite, le cliquer affichera les détails. Si un message d’erreur apparaissait dans la table des résultats, merci de me contacter.\n\n- L'alerte \"absence d'EP5\" est normale sur les fichiers ep4-ep5 de régularisation ou les mois sans vols (lire la rubrique \"Activités sol/simulateur & QT\"). Un mois sans vol reste bleu\n- L'erreur \"fichier non reconnu\" est normale pour un PDF ne contenant ni un bulletin de salaire, ni un EP5, ni une attestation de nuitées\n- En cas de message \"Erreur: nuitées > nb de jours\", si vous êtes basé en province, assurez-vous d'avoir lu la rubrique \"Choix de la base\"\n\n__Avertissement&#8239;:__ L’application est une aide au calcul des frais professionels sous licence GPLv3.0, les PN restents seuls responsables face à l’administration pour justifier l’exactitude de leur déclaration.\n\n## Attestation des nuitées AF\n\nAir France fournit cette attestation dans l’EP4 de février de l'année n + 1, mais un correctif est susceptible d’être diffusé jusqu’en avril dans un fichier annexe. En attendant ce document, __{@html htmlLogo}__ estime le montant ce qui permet de donner un ordre de grandeur. L’estimation utilise la colonne Découchers F PRO et elle est modifiable. Une fois votre attestation reçue, vous pouvez soit indiquer son montant directement, soit glisser l’attestation dans la zone de dépôt. Merci pour vos retours concernant la fiabilité de l’estimation.\n\n## Choix de la base\n\nLa base peut être modifiée chaque mois&#8239;: on choisit une base, on dépose les EP5 de cette base&#8239;;\non change de base et l’on peut déposer les EP5 pour cette nouvelle base. En cas d’erreur, il est possible de changer de base et de recharger les EP5.\n\nLe choix de la base se fait au-dessus de la zone de dépôt sur la page Frais de mission.\n\n## Activités sol/simulateur & QT\n\nLes activités sol/simulateur à la base ne peuvent pas faire l'objet de déduction forfaitaire, elles ne sont donc pas décomptées dans les frais de mission.\n\nLes activités sol/simulateur hors de la base d'affectation pourraient être décomptées forfaitairement, néanmoins elles ne rentrent pas explicitement dans le cadre d'application de l'accord de la DLF, et elles ne sont donc pas décomptées par __{@html htmlLogo}__. Je vous renvoie au mémento du SNPL pour plus d'informations.\n\n## Mise à jour\n\n__{@html htmlLogo}__ se met à jour automatiquement. Éventuellement, un popup peut\napparaître 👨🏻‍✈️ vous demandant d’autoriser cette mise à jour. Installer la mise à jour efface les résultats.\nSi jamais le popup restait à l'écran, il faudrait rafraichir la page ⟳.\n\n## Données fiscales\n\nSur <Link href=\"https://github.com/flyingeek/flytax#donn%C3%A9es-fiscales\">GitHub</Link> vous trouverez les liens vers les barèmes au format csv et tsv (Excel/Numbers) mais aussi\nles données json. En installant le code source sur votre ordinateur, vous pourrez générer ces fichiers. Lors\nde la compilation de l’application, les API de la Banque de France et des impôts sont utilisées.\n\n- <Link href=\"https://www.legifrance.gouv.fr/loda/id/JORFTEXT000000242360\">Arrêté de 2006 fixant les taux des indemnités de mission</Link>\n- <Link href=\"https://web.archive.org/web/20190408001531/http://www.fraispn.com/dlf.html\" rel=\"noopener\">La lettre de la DLF sur FraisPN (webarchive)</Link>\n- <Link href=\"https://web.archive.org/web/20190407212830/http://www.fraispn.com/dlfannexe.html\" rel=\"noopener\">L’annexe à lettre de la DLF sur FraisPN (webarchive)</Link>\n\n## Crédits\n\n- <Link href=\"https://github.com/mborsetti/airportsdata\">airportsdata</Link> de Mike Borsetti (permet de lier un code IATA à un pays)\n- __{@html htmlLogo}__ est développé en JavaScript à l’aide du framework SVELTE\n- Éric Delord, CDB 777, est l’auteur. Le code source est disponible sur <Link href=\"https://github.com/flyingeek/flytax\">GitHub</Link>. L'application est sous <Link href=\"https://raw.githubusercontent.com/flyingeek/flytax/main/LICENSE.md\">licence GPLv3.0</Link>, et l’article 15 précise&#8239;: THERE IS NO WARRANTY FOR THE PROGRAM.\n\nVous pouvez me contacter sur l’email AF (erdelord@…), ou sur mon compte Twitter @flyingeek, ou sur le groupe Teams/MyConcorde. Si vous rencontrez un problème, merci de m'adresser le PDF concerné par mail.\n\n## Liens\n\n- <Link href=\"{ofp2map}\" rel=\"noopener\">OFP2MAP</Link> cartographie pour l'OFP (même auteur)\n","<script context=\"module\">\n    import {semverCompare} from \"./utils\";\n    /**\n     * filter or slice the json changelog\n     * @param json the json changelog\n     * @param {version, limit} if version, returns entries > version, if limit returns at max limit entries\n     */\n    export const filterChangeLog = (json, {version, limit}={}) => {\n        if (!json) return [];\n        let filtered = Object.entries(json.CHANGELOG);\n        if (version) {\n            filtered = filtered.filter(([k,]) => {\n                const v = k.match(/\\[([^\\]]+)\\]/);\n                return (v) ? semverCompare(v[1], version) > 0 : false;\n            });\n        }\n        return (limit) ? filtered.slice(0, limit + 1) : filtered;\n    };\n    export function parseMarkdown(markdownText) {\n        const htmlText = markdownText\n            //.replace(/^### (.*$)/gim, '<h3>$1</h3>')\n            //.replace(/^## (.*$)/gim, '<h2>$1</h2>')\n            //.replace(/^# (.*$)/gim, '<h1>$1</h1>')\n            //.replace(/^\\> (.*$)/gim, '<blockquote>$1</blockquote>')\n            .replace(/\\*\\*(.*)\\*\\*/gim, '<b>$1</b>')\n            //.replace(/\\*(.*)\\*/gim, '<i>$1</i>')\n            //.replace(/!\\[(.*?)\\]\\((.*?)\\)/gim, \"<img alt='$1' src='$2' />\")\n            .replace(/\\[(.*?)\\]\\((#.*?)\\)/gim, \"<a href='$2'>$1</a>\")\n            .replace(/\\[(.*?)\\]\\((.*?)\\)/gim, \"<a href='$2' rel='noreferrer' target='_blank'>$1</a>\")\n            .replace(/^$/g, '<br />')\n\n        return htmlText;\n    }\n    const translation = {\n        \"ADDED\": \"Ajouté\",\n        \"FIXED\": \"Corrigé\",\n        \"DEPRECATED\": \"Obsolète\",\n        \"CHANGED\": \"Modifié\",\n        \"REMOVED\": \"Supprimé\",\n        \"SECURITY\": \"Sécurité\"\n    };\n    export const _ = text => translation[text.toUpperCase()] || text;\n    export const versionDateRegex = /\\[([^\\]]+)\\].+(\\d{4})-(\\d{2})-(\\d{2})/;\n    export const title2html = (text) => {\n        return text.replace(/\\[([^\\]]+)\\].+(\\d{4})-(\\d{2})-(\\d{2})/, \"<span class='version'>$1</span> <span class='date'>$4/$3/$2</span>\");\n    }\n    const badgeColors = {\n        \"ADDED\": \"primary\",\n        \"FIXED\": \"success\",\n        \"DEPRECATED\": \"warning\",\n        \"CHANGED\": \"info\",\n        \"REMOVED\": \"danger\",\n        \"SECURITY\": \"secondary\"\n    }\n    export const badgeColor = (category) => badgeColors[category.toUpperCase()] || 'light';\n</script>\n<script>\n    export let data;\n    export let limit = undefined;\n    export let version = undefined;\n</script>\n\n<ul class=\"markdown\">\n{#each filterChangeLog(data, {version, limit}) as [title, section]}\n    {#if title !== \"raw\"}\n        <li>\n            {#if title.match(versionDateRegex)}\n                <h2>{@html title2html(title)}</h2>\n            {:else}\n            <h2>{title}</h2>\n            {/if}\n            {#each Object.entries(section) as [category, content]}\n                {#if category !== \"raw\"}\n                    {#each content.raw.replace(/^\\n\\n|\\n\\n$/, '').split('\\n') as item}\n                        <div class=\"item\">{@html parseMarkdown(item).replace(/^-\\s/g, `- <span class=\"badge badge-${badgeColor(category)}\">${_(category)}</span>`).replace(/^(\\s+)-/g, (chn, pl) => '&nbsp;'.repeat('pl'.length) + '▫︎')}</div>\n                    {/each}\n                {:else}\n                    <div class=\"item\">{@html parseMarkdown(content).trim()}</div>\n                {/if}\n            {/each}\n        </li>\n    {/if}\n{/each}\n</ul> \n\n<style>\n    ul{\n        padding-left: 1em;\n    }\n    li{\n        list-style: square;\n    }\n    h2{\n        font-size: 1.25rem;\n        border-bottom: 1px solid #eee;\n    }\n    li:not(:first-child) h2{\n        margin-top: 1rem;\n    }\n    h2 :global(.date){\n        font-size: 0.9rem;\n        /*color: grey;*/\n    }\n    h2 :global(.version)::before{\n        content: \"v\";\n        font-variant: normal;\n        font-size: 1rem;\n    }\n    .item {\n        margin-bottom: 0.25rem;\n        margin-left: 0.5rem;\n        text-indent: -0.8em;\n    }\n    .item :global(.badge) {\n        text-indent: 0;\n        margin-right: 0.5rem;\n        min-width: 8ch;\n    }\n</style>","/** Dispatch event on click outside of node */\nexport default function clickOutside(node) {\n    //console.log('click outside installed')\n    const handleClick = event => {\n        if (node && !node.contains(event.target) && !event.defaultPrevented) {\n            node.dispatchEvent(\n                new CustomEvent('click_outside', node)\n            )\n            //console.log('click outside')\n        }\n    }\n\n    document.addEventListener('click', handleClick, true);\n\n    return {\n        destroy() {\n            document.removeEventListener('click', handleClick, true);\n            //console.log('click outside removed')\n        }\n    }\n}","<script>\n    import { fade } from 'svelte/transition';\n    import ChangeLog from \"./ChangeLog.svelte\";\n    import clickOutside from '../actions/clickOutsideAction';\n    import { createEventDispatcher } from 'svelte';\n    export let visible = false;\n    export let title = 'CHANGELOG';\n    export let version = undefined;\n    const dispatch = createEventDispatcher();\n    let promise;\n    export const show = async () => {\n        visible = true;\n        promise = fetch('./CHANGELOG.json').then(response => {\n            if(response.ok) {\n                return response.json();\n            } else {\n                throw new Error('CHANGELOG.json not available');\n            }\n        });\n    };\n    export const close = () => {\n        dispatch(\"close\");\n        visible = false;\n    }\n    if (version) show();\n</script>\n\n{#if visible}\n    <div class=\"modal\" tabindex=\"-1\" role=\"dialog\" in:fade>\n        <div class=\"modal-dialog modal-xl modal-dialog-centered\" role=\"document\" use:clickOutside  on:click_outside={close}>\n            <div class=\"modal-content\">\n                <div class=\"modal-header\">\n                    <h5 class=\"modal-title\">{title}</h5>\n                    <button type=\"button\" class=\"close\" data-dismiss=\"modal\" aria-label=\"Close\" on:click={close}>\n                        <span aria-hidden=\"true\">&times;</span>\n                    </button>\n                </div>\n                <div class=\"modal-body\" class:expanded={!version}>\n                    {#await promise}\n                    <p>chargement...</p>\n                    {:then data}\n                    <ChangeLog {data} {version}/>\n                    {/await}\n                </div>\n            </div>\n        </div>\n    </div>\n    <div class=\"modal-backdrop show\" in:fade></div>\n{/if}\n\n<style>\n    .modal {\n        display: block;\n    }\n    .modal-body {\n        overflow-y: auto;\n        max-height: calc(90vh - 3.875rem); /* h5 height * line-height = 1.875rem  h5 margin-top = 1rem margin-bottom = 1rem */\n    }\n    .expanded {\n        height: calc(90vh - 3.875rem); /* h5 height * line-height = 1.875rem  h5 margin-top = 1rem margin-bottom = 1rem */\n    }\n    h5{font-size:1.25rem;margin-top:0}\n</style>","<script>\n    import Link from '../components/Link.svelte';\n    import HelpMarkup from '../pages/Help.md';\n    import ChangeLogModal from '../components/ChangeLogModal.svelte';\n    import { htmlLogo, shareAppLink } from '../components/utils';\n    import {wb} from '../stores';\n    const version = \"APP_VERSION\";\n    let swVersion = '';\n    let modal;\n    const updateVersion = (_wb) => (_wb) ? _wb.messageSW({type: 'GET_VERSION'}).then(v => swVersion = v) : '';\n    $: updateVersion($wb);\n    const reload = () => {\n        window.location.hash = '#/';\n        console.log('reload page');\n        window.location.reload();\n    };\n</script>\n\n<ChangeLogModal bind:this={modal} />\n<main>\n    <section class='markdown'>\n        <h1>{@html htmlLogo} v{version} \n            <small on:click|once={() => $wb.update()}>/ ServiceWorker&#8239;: {swVersion}</small>\n            {#if $wb}{#await $wb.active then ok}<small>/ mode déconnecté disponible</small>{/await}{/if}\n            {#if navigator.standalone === true || 'process.env.NODE_ENV' === '\"development\"'}\n                {#if (navigator.share || 'process.env.NODE_ENV' === '\"development\"')}<button class=\"btn-sm\" on:click={shareAppLink}>Partager</button>{/if}\n                <button class=\"btn-sm\" on:click={reload}>Recharger</button>\n            {/if}\n            <button class=\"btn-sm\" on:click={modal.show}>CHANGELOG</button>\n        </h1>\n        <HelpMarkup/>\n    </section>\n    <div class=\"footer\">\n        <p>Alert Icon via <Link href=\"https://commons.wikimedia.org/wiki/File:OOjs_UI_icon_alert_destructive.svg\">Wikimedia Commons</Link></p>\n        <p>Other Icons made by <Link href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</Link> from <Link href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</Link></p>\n    </div>\n</main>\n\n<style>\n    div.footer{\n        font-size: xx-small;\n        margin-top: 2rem;\n    }\n    h1 small {\n        font-weight: 200;\n        font-size: 0.8rem;\n    }\n    :global(section.markdown) {\n        margin: 0 auto;\n        max-width: 800px;\n        text-align: justify;\n    }\n    :global(section.markdown a) {\n        white-space: nowrap;\n    }\n    :global(section.markdown ul){\n        list-style-type: square;\n        padding-inline-start: 25px;\n    }\n    :global(section.markdown li){\n        margin: 3px 0;\n    }\n\n</style>","<script>\n    import {taxYear, DATASET, taxData, swDismiss} from \"../stores\";\n    const change = () => {\n        $taxData; //force preload\n        $swDismiss = false; // show popup update again\n    };\n</script>\n<label class=\"select\">\n<!-- svelte-ignore a11y-no-onchange -->\n<select bind:value={$taxYear} on:change|preventDefault={change}>\n    {#each Object.values(DATASET) as option}\n        <option value={option.label} selected={$taxYear === option.label}>{option.label}</option>\n    {/each}\n</select>\n</label>","<script>\n    import {route, log} from '../stores';\n    import {viewLog} from '../components/LogWindow.svelte';\n    import {htmlLogo} from '../components/utils';\n    import TaxYearSelect from '../components/TaxYearSelect.svelte';\n</script>\n<nav>\n    <a href=\"#/\" class:active={$route=='/'}>{@html htmlLogo}<sup>{('process.env.NODE_ENV' !== '\"development\"') ? '.fr' : '.dev'}</sup></a>\n    <a href=\"#/mission\" class:active={$route=='/mission'}>Frais De Mission</a>\n    <a href=\"#/pay\" class:active={$route=='/pay'}>Salaire</a>\n    <a href=\"#/help\" class:active={$route=='/help'}>Aide</a>\n    <span class=\"flexspace\"></span>\n    {#if $log.length > 0}\n        <a href=\"#/log\" on:click|preventDefault={() => $viewLog = !$viewLog}>\n            <svg><use xlink:href=\"#alert\"/></svg><sup>{$log.length}</sup>\n        </a>\n    {/if}\n    <TaxYearSelect/>\n</nav>\n\n<style>\n    sup {\n        background-color: var(--redaf);\n        color: var(--background-color);\n        padding: 1px 3px;\n        border-radius: 3px;\n        font-weight: normal;\n        margin-left: 4px;\n        font-size: xx-small;\n    }\n    a[href=\"#/\"] sup{\n        background-color: var(--blueaf);\n        font-size: x-small;\n        font-weight: bold;\n        margin-left: 2px;\n    }\n    nav {\n        display: flex;\n        /* justify-content: flex-end; */\n        position: -webkit-sticky;\n        position: sticky;\n        top: 0;\n        background-color: var(--navbar-background-color);\n        --item-color: rgba(var(--blueaf_rgb), 0.5);\n        --active-color: rgba(var(--blueaf_rgb), 0.9);\n        z-index: 10;\n    }\n    a {\n        display: block;\n        padding: 10px;\n        color: var(--item-color);\n        text-decoration: none;\n    }\n    a.active {\n        color: var(--active-color);\n        border-bottom: 2px solid var(--redaf);\n    }\n\n    a:hover {\n        text-decoration: none;\n    }\n\n    a:visited {\n        color: var(--item-color);\n    }\n    a[href=\"#/\"] {\n        margin-right: 0;\n        font-weight: 700;\n    }\n    a[href=\"#/log\"] {\n        padding-right: 2px;\n        padding-top: 8px;\n        padding-bottom: 0;\n    }\n    :global(.flexspace) {\n        display: inline-block;\n        flex: 1;\n    }\n    :global(nav .select) {\n        display: flex;\n        align-items: center;\n        margin-right: 10px;\n    }\n    :global(nav .select select) {\n        background-color: var(--navbar-background-color);\n        border: none;\n    }\n    a[href=\"#/log\"] sup {\n        top: -1em;\n        position: relative;\n        left: -0.5em;\n    }\n    svg{\n        fill:var(--redaf);\n        opacity: 1;\n        width: 24px;\n        height: 24px;\n    }\n</style>","<script context=\"module\">\n    import {writable} from 'svelte/store';\n    import {swDismiss} from '../stores';\n    import {isPatchUpdate, semverCompare} from '../components/utils';\n    export const swUpdated = writable(false);\n    export const swRegistration = writable();\n    export const majorUpdate = writable(false);\n    export const showSkipWaitingPrompt = (nextVersion) => {\n        swUpdated.set(true);\n        swDismiss.set(false);\n        if (nextVersion) {\n            majorUpdate.set(!isPatchUpdate('APP_VERSION', nextVersion));\n        } else {\n            majorUpdate.set(true); // we consider missing version problem as major\n        }\n    };\n</script>\n<script>\n    import {wb, paySlips, ep5, route} from '../stores';\n    import { fade } from 'svelte/transition';\n    import ChangeLogModal from '../components/ChangeLogModal.svelte';\n    let installLabel = 'Installer';\n    const previousAppVersionKey = 'previousAppVersion';\n    const getPreviousAppVersion = () => (sessionStorage)  ? sessionStorage.getItem(previousAppVersionKey) : undefined;\n    const setPreviousAppVersion = () => (sessionStorage) ? sessionStorage.setItem(previousAppVersionKey, 'APP_VERSION') : undefined;\n    const resetPreviousAppVersion = () => (sessionStorage) ? sessionStorage.removeItem(previousAppVersionKey) : undefined;\n    const isAppUpdated = () => {\n        const previous = getPreviousAppVersion();\n        if (!previous) return false;\n        return semverCompare('APP_VERSION', previous) > 0;\n    }\n    $swDismiss = false;\n    const install = (delay=0) => {\n        if (delay) console.debug('automatic install ')\n        // $swRegistration.waiting check is needed to the 'reload the page' fallback\n        let refreshing;\n        if ($wb && $swRegistration && $swRegistration.waiting) {\n            navigator.serviceWorker.addEventListener('controllerchange', () => {\n                //console.debug('controller change')\n                if (refreshing) return;\n                refreshing = true;\n                console.debug('SWUpdate: controllerchange reload');\n                (delay) ? setTimeout(() => window.location.reload(), delay) : window.location.reload();\n            });\n            //This does not fire when Workbox mark event as isExternal\n            // $wb.addEventListener('controlling', () => {\n            //     //console.debug('controlling')\n            //     if (refreshing) return;\n            //     refreshing = true;\n            //     console.debug('SWUpdate: controlling reload');\n            //     window.location.reload();\n            //     (delay) ? setTimeout(() => window.location.reload(), delay) : window.location.reload();\n            // });\n            installLabel = \"En cours...\";\n            if (!getPreviousAppVersion()) setPreviousAppVersion(); // only set if not already set (cover multiple updates loop)\n            $swRegistration.waiting.postMessage({type: 'SKIP_WAITING'});\n        }else{ /* update probably done in another tab */\n            console.debug('SWUpdate: no waiting reg reload');\n            window.location.reload();\n        }\n    }\n</script>\n\n{#if (($route !== '/' || $majorUpdate) && $swUpdated && !$swDismiss && $ep5.isEmpty() && $paySlips.isEmpty())}\n<div class=\"modal\">\n    <div class=\"toast\">   \n        <div class=\"toast-header\">\n            <strong><span>👨🏻‍✈️</span>Mise à jour détectée</strong>\n        </div>\n        <div class=\"toast-body\">\n            <button on:click|preventDefault><span>Installation...</span></button>\n        </div>\n    </div>\n</div>{install(($route === '/') ? 2000 : 700) || ''}\n{:else if $swUpdated && !$swDismiss && (!$ep5.isEmpty() || !$paySlips.isEmpty())}\n    <div class=\"toast\" transition:fade style=\"position: fixed; top: 0; right: 0;\">   \n        <div class=\"toast-header\">\n            <strong><span>👨🏻‍✈️</span>Mise à jour disponible</strong>\n            <button type=\"button\" class=\"close\" aria-label=\"Close\" on:click={() => $swDismiss=true}>\n                <span aria-hidden=\"true\">&times;</span>\n            </button>\n        </div>\n        <div class=\"toast-body\">\n            <button class=\"manual\" on:click|once={() => install()}><span class:blinking={installLabel.endsWith('...')}>{installLabel}</span></button>\n        </div>\n    </div>\n{:else if !$swUpdated && isAppUpdated()}\n    <ChangeLogModal version={getPreviousAppVersion()} title=\"NOUVEAUTÉS\" on:close={resetPreviousAppVersion}/>\n{/if}\n\n<style>\n    /* The Modal (background) */\n    .modal {\n        position: fixed; /* Stay in place */\n        z-index: 19; /* Sit on top below alert*/\n        left: 0;\n        top: 0;\n        width: 100%; /* Full width */\n        height: 100%; /* Full height */\n        overflow: auto; /* Enable scroll if needed */\n        background-color: rgb(0,0,0); /* Fallback color */\n        background-color: rgba(0,0,0,0.4); /* Black w/ opacity */\n    }\n\n    /* Modal Content/Box */\n    .modal .toast {\n        margin: 15% auto 0 auto; /* 15% from the top and centered */\n    }\n    .modal .toast-header {\n        justify-content: center;\n    }\n    .modal .toast-header strong {\n        margin-right: 0;\n    }\n    .toast {\n        opacity: 1;\n        z-index: 20;\n        max-width: 350px;\n        overflow: hidden;\n        font-size: .875rem;\n        background-color: rgba(255,255,255,.85);\n        background-clip: padding-box;\n        border: 1px solid rgba(0,0,0,.1);\n        box-shadow: 0 .25rem .75rem rgba(0,0,0,.1);\n        -webkit-backdrop-filter: blur(10px);\n        backdrop-filter: blur(10px);\n        border-radius: .25rem;\n    }\n    .toast-header {\n        display: -ms-flexbox;\n        display: flex;\n        -ms-flex-align: center;\n        align-items: center;\n        padding: .25rem .75rem;\n        color: #6c757d;\n        background-color: rgba(255,255,255,.85);\n        background-clip: padding-box;\n        border-bottom: 1px solid rgba(0,0,0,.05);\n    }\n    .toast-header strong {\n        margin-right: auto;\n    }\n    .toast-body {\n        padding: .75rem;\n        text-align: center;\n    }\n    .toast-body button{\n        border-radius: 3px;\n    }\n    button.manual{\n        color: var(--background-color);\n        background-color: var(--blueaf);\n    }\n    button.close {\n        float: right;\n        font-size: 1.5rem;\n        font-weight: 700;\n        line-height: 1;\n        color: #000;\n        text-shadow: 0 1px 0 #fff;\n        opacity: .5;\n        padding: 0;\n        background-color: transparent;\n        border: 0;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        margin-bottom: .25rem;\n        margin-left: 0.5rem;\n    }\n    strong>span {\n        padding-right: 1em;\n    }\n\n    .blinking{\n        animation:blink 1s infinite;\n    }\n    @keyframes blink \n    {  \n        0% { opacity: 1.0; }\n        50% { opacity: 0.0; }\n        100% { opacity: 1.0; }\n    }\n\n\n</style>","<script>\n    import HomePage from './pages/HomePage.svelte';\n    import MissionPage from './pages/MissionPage.svelte';\n    import PayPage from './pages/PayPage.svelte';\n    import HelpPage from './pages/HelpPage.svelte';\n    import LogWindow from './components/LogWindow.svelte';\n    import {route, handleVisibilityChange} from './stores';\n    import NavBar from './components/Navbar.svelte';\n    import SWUpdate from './components/SWUpdate.svelte';\n    import {onMount} from 'svelte';\n    import {promiseTimeout} from './components/utils';\n\n    onMount(() => {\n        document.addEventListener(\"visibilitychange\", handleVisibilityChange, false);\n        promiseTimeout(2000, fetch(`https://flytax.goatcounter.com/count?p=/${('process.env.NODE_ENV' !== '\"development\"') ? 'app' : 'test'}`)).catch(() => {});\n        return () => document.removeEventListener(\"visibilitychange\", handleVisibilityChange);\n    });\n</script>\n\n<svg style=\"display: none;\">\n    <symbol id=\"upload\" viewBox=\"0 0 20 17\">\n            <path d=\"M10 0l-5.2 4.9h3.3v5.1h3.8v-5.1h3.3l-5.2-4.9zm9.3 11.5l-3.2-2.1h-2l3.4 2.6h-3.5c-.1 0-.2.1-.2.1l-.8 2.3h-6l-.8-2.2c-.1-.1-.1-.2-.2-.2h-3.6l3.4-2.6h-2l-3.2 2.1c-.4.3-.7 1-.6 1.5l.6 3.1c.1.5.7.9 1.2.9h16.3c.6 0 1.1-.4 1.3-.9l.6-3.1c.1-.5-.2-1.2-.7-1.5z\" />\n    </symbol>\n    <symbol id=\"alert\" viewBox=\"0 0 24 24\">\n            <path id=\"point\" d=\"M11 16h2v2h-2z\"/>\n            <path id=\"stroke\" d=\"M13.516 10h-3l.484 5h2z\"/>\n            <path id=\"triangle\" d=\"M12.017 5.974l7.519 13.026h-15.04l7.521-13.026m0-2.474c-.544 0-1.088.357-1.5 1.071l-7.985 13.831c-.825 1.429-.15 2.598 1.5 2.598h15.968c1.65 0 2.325-1.169 1.5-2.599l-7.983-13.829c-.413-.715-.956-1.072-1.5-1.072z\"/>\n    </symbol>\n    <symbol id=\"share\" viewBox=\"0 0 50 50\">\n        <path d=\"M30.3 13.7L25 8.4l-5.3 5.3-1.4-1.4L25 5.6l6.7 6.7z\"/>\n        <path d=\"M24 7h2v21h-2z\"/>\n        <path d=\"M35 40H15c-1.7 0-3-1.3-3-3V19c0-1.7 1.3-3 3-3h7v2h-7c-.6 0-1 .4-1 1v18c0 .6.4 1 1 1h20c.6 0 1-.4 1-1V19c0-.6-.4-1-1-1h-7v-2h7c1.7 0 3 1.3 3 3v18c0 1.7-1.3 3-3 3z\"/>\n    </symbol>\n</svg>\n\n<SWUpdate />\n<NavBar/>\n<LogWindow />\n\n{#if $route === '/'}\n<HomePage/>\n{:else if $route === '/mission'}\n<MissionPage/>\n{:else if $route === '/pay'}\n<PayPage/>\n{:else if $route === '/help'}\n<HelpPage/>\n{:else}\n<!-- redirect -->\n{ window.location.hash = '#/'}\n{/if}\n\n<style>\n    :global(html, body) {\n        height: 100%;\n        min-height: 100%;\n        width: 100%;\n        position: relative;\n        --blueaf: #002157; /* --royal-blue-dark */\n        --blueaf_rgb: 9,34,84; /* rgba(var(--blueaf_rgb), 0.5) is valid */\n        --redaf:#FA3C35; /* --tart-orange */\n        --blood-red: #6B0504; /* for visited links */\n        --green: #2CA58D; /* #28a745 */;\n        --snow: #FFFBFF;\n        --minion-yellow: #ECD444;\n        --light-grey: #eee; /* used to print tables */\n        --maximum-yellow-red: #FCBF49; /* used for warnings in LogWindow */\n        /*--light-blue: rgb(213,226,242);/*#4EA5D9*/\n        /* --pink: #e83e8c; */\n        /*--white: #ffFBff;*/\n        /* Other colors found on coolors.co */\n        /*--bisque: #F1DABF;*/\n        /*--maximum-yellow-red: #FCBF49;*/\n        /*--saffron: #EAC435;*/\n        /*--mustard: #FFE156;*/\n        /*--orange-yellow: #F3B700;*/\n        /*--bitter-lemon: #C2E812;*/\n        /*--june-bud: #C5D86D;*/\n        /*--emerald: #23CE6B;*/\n        /*--electric-blue: #87F1FF;*/\n        /*--dark-turquoise: #52DEE5;*/\n        /*--medium-turquoise: #75C9C8;*/\n        /*--star-command-blue: #0077B6;*/\n        /*--light-slate-gray: #698996;*/\n        /*--sea-green-crayola: #00FDDC;*/\n        --color: var(--blueaf);\n        --white: white; /* for button like label */\n        --background-color: var(--snow);\n        --navbar-background-color: var(--minion-yellow);\n        --dropzone-background-color: var(--background-color);\n        --table-background-color: var(--background-color);\n        --table-color: var(--color);\n        --table-highlight-color: #00215730; /* blueaf 30% alpha */\n        --table-border-color: #ccc;\n        color: var(--color);\n    }\n    :global(body) {\n        background-color: var(--background-color);\n        margin: 0;\n        box-sizing: border-box;\n        font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n        font-size: 1rem;\n    }\n    :global(main) {\n        text-align: center;\n        padding: 1em 1em 40px 1em;\n    }\n\n    /*********/\n    /* LINKS */\n    /*********/\n    :global(a) {\n        color: var(--redaf);\n        text-decoration: none;\n    }\n    :global(a:hover) {\n        text-decoration: underline;\n    }\n    :global(a:visited) {\n        color: var(--blood-red);\n    }\n    :global(a[href^=\"#\"]:visited) {\n        color: var(--redaf);\n    }\n    :global(a[href^=http]::after) {\n        content: \"⬀\";\n    }\n\n    /*********/\n    /* FORMS */\n    /*********/\n    :global(label) {\n        display: block;\n    }\n    :global(input, button, select, textarea) {\n        font-family: inherit;\n        font-size: inherit;\n        -webkit-padding: 0.4em 0;\n        padding: 0.4em;\n        margin: 0 0 0.5em 0;\n        box-sizing: border-box;\n        border: 1px solid #ccc;\n        border-radius: 2px;\n    }\n\n    :global(input:disabled) {\n        color: #ccc;\n    }\n\n    :global(button) {\n        color: #333;\n        background-color: #f4f4f4;\n        outline: none;\n        cursor: pointer;\n    }\n\n    :global(button:disabled) {\n        color: #999;\n        cursor: not-allowed;\n    }\n\n    :global(button:not(:disabled):active ){\n        background-color: #ddd;\n    }\n\n    :global(button:focus) {\n        border-color: #666;\n    }\n    :global(.btn-sm) {\n        text-transform: uppercase;\n        font-size: small;\n        color: var(--color);\n        border-color: var(--color);\n        background-color: var(--background-color);\n        margin-left: 1rem;\n    }\n    :global(.select select){\n        color: var(--color);\n    }\n    :global(.select) {\n        display: inline-block;\n    }\n    :global(.select select){\n        -webkit-padding: 0.2em 0;\n        padding: 0.2em;\n        margin: 0 0 0 0.2em;\n    }\n    /**********/\n    /* TABLES */\n    /**********/\n    :global(table) {\n        border-collapse: collapse;\n        width: 100%;\n    }\n    :global(th, td) {\n        padding: 0.25rem;\n        text-align: left;\n        border: 1px solid var(--table-border-color);\n    }\n    /*******/\n    /* SVG */\n    /*******/\n    :global(svg) {\n        fill: var(--color);\n    }\n\n    :global(svg[fill=none]) {\n        fill: none;\n    }\n    /********/\n    /* LOGO */\n    /********/\n    :global(span.logo){\n        color: var(--blueaf);\n        text-transform: uppercase;\n    }\n    :global(span.logo > span){\n        color: var(--redaf);\n    }\n    :global(.no-transition){\n        animation: none !important;\n    }\n    :global(h1 span.logo) {font-weight: bold;}\n    /*********/\n    /* FONTS */\n    /*********/\n    /* https://google-webfonts-helper.herokuapp.com/fonts/abril-fatface?subsets=latin,latin-ext */\n    /* abril-fatface-regular - latin-ext_latin */\n    @font-face {\n    font-family: 'Abril Fatface';\n    font-style: normal;\n    font-weight: 400;\n    src: local(''),\n        url('CONF_ABRILFATFACE_WOFF2') format('woff2'), /* Chrome 26+, Opera 23+, Firefox 39+ */\n        url('CONF_ABRILFATFACE_WOFF') format('woff'); /* Chrome 6+, Firefox 3.6+, IE 9+, Safari 5.1+ */\n    }\n    :global(h1,h2,h3,h4,h5,h6){margin-bottom:.5rem;font-weight:500;line-height:1.2}\n</style>","try{self[\"workbox:window:6.2.4\"]&&_()}catch(n){}function n(n,t){return new Promise((function(r){var e=new MessageChannel;e.port1.onmessage=function(n){r(n.data)},n.postMessage(t,[e.port2])}))}function t(n,t){for(var r=0;r<t.length;r++){var e=t[r];e.enumerable=e.enumerable||!1,e.configurable=!0,\"value\"in e&&(e.writable=!0),Object.defineProperty(n,e.key,e)}}function r(n,t){(null==t||t>n.length)&&(t=n.length);for(var r=0,e=new Array(t);r<t;r++)e[r]=n[r];return e}function e(n,t){var e;if(\"undefined\"==typeof Symbol||null==n[Symbol.iterator]){if(Array.isArray(n)||(e=function(n,t){if(n){if(\"string\"==typeof n)return r(n,t);var e=Object.prototype.toString.call(n).slice(8,-1);return\"Object\"===e&&n.constructor&&(e=n.constructor.name),\"Map\"===e||\"Set\"===e?Array.from(n):\"Arguments\"===e||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(e)?r(n,t):void 0}}(n))||t&&n&&\"number\"==typeof n.length){e&&(n=e);var i=0;return function(){return i>=n.length?{done:!0}:{done:!1,value:n[i++]}}}throw new TypeError(\"Invalid attempt to iterate non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\")}return(e=n[Symbol.iterator]()).next.bind(e)}try{self[\"workbox:core:6.2.4\"]&&_()}catch(n){}var i=function(){var n=this;this.promise=new Promise((function(t,r){n.resolve=t,n.reject=r}))};function o(n,t){var r=location.href;return new URL(n,r).href===new URL(t,r).href}var u=function(n,t){this.type=n,Object.assign(this,t)};function a(n,t,r){return r?t?t(n):n:(n&&n.then||(n=Promise.resolve(n)),t?n.then(t):n)}function c(){}var f={type:\"SKIP_WAITING\"};function s(n,t){if(!t)return n&&n.then?n.then(c):Promise.resolve()}var v=function(r){var e,c;function v(n,t){var e,c;return void 0===t&&(t={}),(e=r.call(this)||this).nn={},e.tn=0,e.rn=new i,e.en=new i,e.on=new i,e.un=0,e.an=new Set,e.cn=function(){var n=e.fn,t=n.installing;e.tn>0||!o(t.scriptURL,e.sn.toString())||performance.now()>e.un+6e4?(e.vn=t,n.removeEventListener(\"updatefound\",e.cn)):(e.hn=t,e.an.add(t),e.rn.resolve(t)),++e.tn,t.addEventListener(\"statechange\",e.ln)},e.ln=function(n){var t=e.fn,r=n.target,i=r.state,o=r===e.vn,a={sw:r,isExternal:o,originalEvent:n};!o&&e.mn&&(a.isUpdate=!0),e.dispatchEvent(new u(i,a)),\"installed\"===i?e.wn=self.setTimeout((function(){\"installed\"===i&&t.waiting===r&&e.dispatchEvent(new u(\"waiting\",a))}),200):\"activating\"===i&&(clearTimeout(e.wn),o||e.en.resolve(r))},e.dn=function(n){var t=e.hn,r=t!==navigator.serviceWorker.controller;e.dispatchEvent(new u(\"controlling\",{isExternal:r,originalEvent:n,sw:t,isUpdate:e.mn})),r||e.on.resolve(t)},e.gn=(c=function(n){var t=n.data,r=n.ports,i=n.source;return a(e.getSW(),(function(){e.an.has(i)&&e.dispatchEvent(new u(\"message\",{data:t,originalEvent:n,ports:r,sw:i}))}))},function(){for(var n=[],t=0;t<arguments.length;t++)n[t]=arguments[t];try{return Promise.resolve(c.apply(this,n))}catch(n){return Promise.reject(n)}}),e.sn=n,e.nn=t,navigator.serviceWorker.addEventListener(\"message\",e.gn),e}c=r,(e=v).prototype=Object.create(c.prototype),e.prototype.constructor=e,e.__proto__=c;var h,l,m,w=v.prototype;return w.register=function(n){var t=(void 0===n?{}:n).immediate,r=void 0!==t&&t;try{var e=this;return function(n,t){var r=n();if(r&&r.then)return r.then(t);return t(r)}((function(){if(!r&&\"complete\"!==document.readyState)return s(new Promise((function(n){return window.addEventListener(\"load\",n)})))}),(function(){return e.mn=Boolean(navigator.serviceWorker.controller),e.yn=e.pn(),a(e.bn(),(function(n){e.fn=n,e.yn&&(e.hn=e.yn,e.en.resolve(e.yn),e.on.resolve(e.yn),e.yn.addEventListener(\"statechange\",e.ln,{once:!0}));var t=e.fn.waiting;return t&&o(t.scriptURL,e.sn.toString())&&(e.hn=t,Promise.resolve().then((function(){e.dispatchEvent(new u(\"waiting\",{sw:t,wasWaitingBeforeRegister:!0}))})).then((function(){}))),e.hn&&(e.rn.resolve(e.hn),e.an.add(e.hn)),e.fn.addEventListener(\"updatefound\",e.cn),navigator.serviceWorker.addEventListener(\"controllerchange\",e.dn),e.fn}))}))}catch(n){return Promise.reject(n)}},w.update=function(){try{return this.fn?s(this.fn.update()):void 0}catch(n){return Promise.reject(n)}},w.getSW=function(){return void 0!==this.hn?Promise.resolve(this.hn):this.rn.promise},w.messageSW=function(t){try{return a(this.getSW(),(function(r){return n(r,t)}))}catch(n){return Promise.reject(n)}},w.messageSkipWaiting=function(){this.fn&&this.fn.waiting&&n(this.fn.waiting,f)},w.pn=function(){var n=navigator.serviceWorker.controller;return n&&o(n.scriptURL,this.sn.toString())?n:void 0},w.bn=function(){try{var n=this;return function(n,t){try{var r=n()}catch(n){return t(n)}if(r&&r.then)return r.then(void 0,t);return r}((function(){return a(navigator.serviceWorker.register(n.sn,n.nn),(function(t){return n.un=performance.now(),t}))}),(function(n){throw n}))}catch(n){return Promise.reject(n)}},h=v,(l=[{key:\"active\",get:function(){return this.en.promise}},{key:\"controlling\",get:function(){return this.on.promise}}])&&t(h.prototype,l),m&&t(h,m),v}(function(){function n(){this.Pn=new Map}var t=n.prototype;return t.addEventListener=function(n,t){this.Sn(n).add(t)},t.removeEventListener=function(n,t){this.Sn(n).delete(t)},t.dispatchEvent=function(n){n.target=this;for(var t,r=e(this.Sn(n.type));!(t=r()).done;){(0,t.value)(n)}},t.Sn=function(n){return this.Pn.has(n)||this.Pn.set(n,new Set),this.Pn.get(n)},n}());export{v as Workbox,n as messageSW};\n//# sourceMappingURL=workbox-window.prod.es5.mjs.map\n","import App from './App.svelte';\nimport {Workbox, messageSW} from 'workbox-window';\nimport {showSkipWaitingPrompt, swRegistration} from './components/SWUpdate.svelte';\nimport {promiseTimeout} from './components/utils';\nimport {wb} from './stores';\n\n\nlet appError = false;\ntry {\n    const app = new App({\n        target: document.body\n    });\n}catch(err) {\n    appError = true;\n    try {\n        var content = document.createElement(\"p\");\n        content.innerHTML =('Erreur: ' + err.message + '<br/><br/>'\n            + 'FLYTAX a besoin de navigateurs récents: Safari 14 iOS/Mac, Firefox 86, Chrome 87 et Microsoft Edge 87 sont compatibles. <br /><br />'\n            + 'Contactez moi sur l\\'email AF (erdelord@...) en me donnant le message d\\'erreur.'\n        );\n        document.body.appendChild(content);\n    }catch(e){} /* catch all here we can not interrupt the startup sequence */ \n}finally{\n    // we always register the serviceWorker to be able to unregister it\n    // or to force skipWaiting and page reload\n    // this way as soon as a new serviceWorker fix the problem, the page will load\n    if ('serviceWorker' in navigator) {\n        const workbox = new Workbox('./sw.js');\n        wb.set(workbox);\n        workbox.addEventListener('installed', (event) => {\n            if (!event.isUpdate) {\n                //console.log('Service worker installed for the first time!');\n            }else{\n                //console.log('Updated Service worker installed');\n            }\n            //console.debug('Updated Service worker installed ', event.isUpdate, event.isExternal)\n        });\n        workbox.addEventListener('activated', (event) => {\n            // `event.isUpdate` will be true if another version of the service\n            // worker was controlling the page when this version was registered.\n            if (!event.isUpdate) {\n                //console.log('Service worker activated for the first time!');\n                // If your service worker is configured to precache assets, those\n                // assets should all be available now.\n                // we should be able to remove clients.claim call in sw.js\n                // but for now we have both...\n                workbox.messageSW({ type: 'CLIENTS_CLAIM' });\n            }else{\n                //console.log('Updated Service worker activated');\n            }\n            if (event.isExternal) {\n                console.warn('External Service worker activated');\n                //window.location.reload();\n            }\n        });\n        workbox.addEventListener('waiting', (event) => {\n            //console.log(`A new service worker has installed, but it can't activate` +\n            //    ` until all tabs running the current version have fully unloaded.`);\n            if (appError) {\n                workbox.addEventListener('controlling', () => {\n                    console.warn('main.js: appError reload');\n                    window.location.reload();\n                });\n                workbox.messageSkipWaiting();\n            }else{\n                if (event.isExternal) {\n                    console.warn('External Service worker waiting');\n                }\n                promiseTimeout(400, messageSW(event.sw,{type: 'GET_VERSION'}))\n                .then(v => showSkipWaitingPrompt(v))\n                .catch(e => {\n                    console.warn(\"SW GET_VERSION:\", e);\n                    showSkipWaitingPrompt();\n                });\n            }\n        });\n        workbox.register().then(reg => {\n            if (appError && reg) reg.unregister();\n            swRegistration.set(reg);\n            //console.debug(reg);\n        }, console.error);\n    }\n}\n\nexport default app;"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","get_slot_changes","dirty","lets","undefined","merged","len","Math","max","length","i","update_slot_base","slot","slot_definition","slot_changes","get_slot_context_fn","slot_context","p","get_all_dirty_from_scope","compute_rest_props","props","keys","rest","Set","has","set_store_value","ret","value","set","action_destroyer","action_result","destroy","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","run_tasks","task","c","delete","f","size","loop","promise","Promise","fulfill","add","abort","append","target","node","appendChild","get_root_for_style","document","root","getRootNode","ownerDocument","host","append_empty_stylesheet","style_element","element","style","head","append_stylesheet","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","name","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","set_attributes","attributes","descriptors","getOwnPropertyDescriptors","__proto__","key","cssText","to_number","set_data","wholeText","set_input_value","input","set_style","important","setProperty","select_option","select","option","__value","selected","toggle_class","toggle","classList","custom_event","type","detail","bubbles","e","createEvent","initCustomEvent","HtmlTag","constructor","n","html","h","m","nodeName","t","innerHTML","Array","from","childNodes","active_docs","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","rule","str","hash","charCodeAt","doc","stylesheet","__svelte_stylesheet","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","deleteRule","clear","set_current_component","get_current_component","Error","onMount","on_mount","bubble","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","flush","update","pop","fragment","before_update","after_update","wait","then","dispatch","direction","kind","dispatchEvent","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_in_transition","params","animation_name","config","running","cleanup","go","easing","tick","css","start_time","end_time","started","start","invalidate","end","create_bidirectional_transition","intro","running_program","pending_program","clear_animation","init","program","abs","group","handle_promise","info","token","index","resolved","child_ctx","current","needs_flush","blocks","mount","error","catch","hasCatch","pending","create_component","mount_component","customElement","new_on_destroy","map","destroy_component","make_dirty","fill","instance","create_fragment","not_equal","append_styles","parent_component","bound","on_disconnect","context","Map","skip_bound","ready","hydrate","nodes","children","l","SvelteComponent","$destroy","$on","splice","$set","$$props","obj","$$set","includes","styles","v","trim","title","levels","updates","to_null_out","accounted_for","href","startsWith","rel","$$restProps","result","Deferred","reject","htmlLogo","navigatorLocale","navigator","languages","Intl","DateTimeFormat","supportedLocalesOf","NumberFormat","shift","months","months14","monthsfr","localeFormat","numberOrString","res","format","replace","numberValue","parseFloat","toFixed","maximumFractionDigits","currency","minimumFractionDigits","toString","localeCurrency","digits","localeRate","localeDateFormat","isoString","fakeUTCDate","parse","substring","opts","timezone","promiseTimeout","ms","timeout","id","setTimeout","clearTimeout","race","semverCompare","pa","pb","na","Number","nb","isNaN","shareAppLink","async","shareData","url","location","pathname","share","err","cubicOut","fade","linear","getComputedStyle","opacity","fly","y","target_opacity","transform","od","u","subscriber_queue","readable","writable","stop","subscribers","new_value","run_queue","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","values","sync","unsubscribers","CONTINUATION_MARK","EP5MONTHS","ep5Time2iso","hours","cs","padStart","numberOfDays","startISO","endISO","diff","floor","iso2TZ","timeZone","deltaDays","setUTCDate","getUTCDate","loc","toLocaleString","match","exec","day","month","year","hour","minute","baseIsoString","delta","tzOffset","trunc","minutes","round","iso2FR","bind","iso2AST","rotSummary","rot","stopovers","nights","reduce","accumulator","dep","arr","buildRots","flights","tzConverter","base","iataMap","converterTZ","timeZoneName","isBase","iata","rotFlights","rotStays","rots","flightGMT","entries","flight","isComplete","days","j","nextFlight","standbyHours","standbyDays","lastDay","yString","mString","parseInt","endsWith","summary","nightsCount","missing","fillingNight","nightInFlight","optimizeNightsRepartition","countries","stays","stayTuples","nightTuples","optimized","concat","optimizedCountries","console","log","reverse","iata2country","airportsData","AmountError","findAmountEuros","countryData","isoDate","exrData","amount","findAmount","exr","rate","date","localeCompare","addIndemnities","taxYear","taxData","fileName","results","countriesData","MC_REMOVAL","nextYear","previousYear","hasError","indemnities","toRemove","total","formula","currencyFormula","country","z","taxStopCount","taxStops","validTaxStops","validTaxStopCount","count","validCount","countryIndemnities","stopIndemnities","doRemove","ceil","euros","message","minFractionDigits","maxFractionDigits","stops","stopFormula","indemnity","ep5Iterator","monthData","testIterator","mergeFlights","flights1","flights2","f1","f2","flight2","flight1","BASES","label","sort","DATASET","defaultYear","resettable","resetValue","reset","nativeConsoleLog","nativeConsoleError","newConsoleLog","theStore","arguments","apply","newConsoleError","patchLog","isRegisterEmpty","ep5","isEmpty","paySlips","nuiteesInput","nuiteesAF","$taxYear","fetch","json","pairings","$ep5","$taxData","$tzConverter","currentIt","nextIt","mergedRots","mergedWithIndemnities","mergeRots","fraisDeMission","$pairings","update_network_status","onLine","swDismiss","wb","swLastUpdateDate","checkSWUpdate","serviceWorker","getRegistration","reg","waiting","postMessage","handleVisibilityChange","visibilityState","route","hashchange","substr","viewLog","text2html","renderText","describe","prototype","logEvent","lenght","markerCount","changeStyleColor","renderStyledText","$viewLog","scrollTop","scrollHeight","fontObserver","fonts","load","urls","test","remaining","maybeCallback","defer","isScript","tag","crossOrigin","onload","body","decimal","number","left","right","padEnd","decimal2cents","cents2decimal","cents","centsString","matchAll","re","bydefault","matchLast","lastMatch","payParser","fileOrder","errors","repas","transport","decouchers_fpro","net","imposable","decimals","cumul","msg","nightsAFParser","matchFirst","router","content","isNuiteesAF","previousTaxYear","nextTaxYear","pattern","String","raw","RegExp","depDay","depTime","arrDay","arrTime","sortedFlights","ep5Parser","warning","acceptedType","pdfWorker","seqOrder","preloadFiles","getPageText","pdf","pageNo","separator","page","getPage","getTextContent","items","disabled","dropzoneHasFocus","preload","loader","pdfjsLib","GlobalWorkerOptions","workerSrc","destroyed","PDFWorker","verbosity","Warning","getPDF","file","reader","FileReader","ev","source","pdfPages","getDocument","maxPages","numPages","pageText","getPDFText","worker","onerror","readAsArrayBuffer","processFiles","files","promises","basename","batchPaySlips","batchEp5","$base","$nuiteesAF","afterLoad","all","getEntriesAsAsyncIterator","dirEntry","createReader","readEntries","entry","isFile","fileAsPromise","dataTransfer","item","webkitGetAsEntry","isDirectory","isFirefox","userAgent","nameLabel","computeNameLabel","requested","prev","requestedMonths","dat","tz","requestedMonthsDefault","computeRequestedMonths","zoneForfaitEuro","code","official","validity","startRate","endRate","averageRate","zone","tableId","getCountriesData","list","sortedList","getData","amounts","preloadFiles2","filename","tableIds","fontName","ok","blob","jsPDF","API","events","addFileToVFS","addFont","readAsBinaryString","statusText","stopPropagation","table","getElementById","querySelectorAll","innerText","jspdf","orientation","autoTable","font","useCss","showHead","showFoot","pageBreak","includeHiddenHtml","download","Blob","output","URL","revokeObjectURL","createObjectURL","remove","tableIndemnitiesId","sumFrais","real","estimated","totalFrais","computeTotalFrais","totalImposable","computeTotalImposable","cumulImposable12","abbattement","maxForfait10","min","totalDecouchersFPRO","computeTotalDecouchersFPRO","estimateRatio","nightsCostEstimate","$nuiteesInput","fraisReels","$fraisDeMission","roadTripInformation","OUT","IN","get","to","roadTrips","standalone","versionDateRegex","title2html","parseMarkdown","badgeColor","_","filterChangeLog","version","limit","filtered","CHANGELOG","markdownText","translation","ADDED","FIXED","DEPRECATED","CHANGED","REMOVED","SECURITY","toUpperCase","badgeColors","category","chn","pl","repeat","clickOutside","handleClick","contains","defaultPrevented","CustomEvent","visible","createEventDispatcher","show","response","modal","swVersion","_wb","$wb","messageSW","reload","$swDismiss","selected_option","querySelector","setAttributeNS","swUpdated","swRegistration","majorUpdate","showSkipWaitingPrompt","nextVersion","cParts","nParts","isPatchUpdate","previousAppVersionKey","installLabel","getPreviousAppVersion","sessionStorage","getItem","install","refreshing","debug","$swRegistration","setItem","removeItem","self","MessageChannel","port1","onmessage","port2","Symbol","iterator","done","TypeError","s","nn","tn","rn","en","on","un","an","cn","installing","scriptURL","sn","vn","hn","ln","state","sw","isExternal","originalEvent","mn","isUpdate","wn","dn","controller","gn","ports","getSW","w","register","immediate","readyState","Boolean","yn","pn","bn","once","wasWaitingBeforeRegister","messageSkipWaiting","enumerable","configurable","defineProperty","Pn","Sn","appError","App","workbox","Workbox","warn","unregister","app"],"mappings":"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"}