{"version":3,"file":"bundle.js","sources":["../../node_modules/svelte/internal/index.mjs","../../src/components/FlagSignifier.svelte","../../src/components/Link.svelte","../../src/components/utils.js","../../node_modules/svelte/easing/index.mjs","../../node_modules/svelte/transition/index.mjs","../../node_modules/svelte/store/index.mjs","../../src/parsers/ep5Parser.js","../../src/stores.js","../../src/components/LogWindow.svelte","../../src/pages/HomePage.svelte","../../src/components/async-script-loader.js","../../src/parsers/payParser.js","../../src/parsers/router.js","../../src/components/DropZone.svelte","../../src/components/MonthStatus.svelte","../../src/components/MissionCountries.svelte","../../src/components/DownloadTablePDF.svelte","../../src/components/MissionActivities.svelte","../../src/pages/MissionPage.svelte","../../src/components/PayTable.svelte","../../src/pages/PayPage.svelte","../../src/pages/HelpPage.svelte","../../src/components/TaxYearSelect.svelte","../../src/components/Navbar.svelte","../../src/components/SWUpdate.svelte","../../src/App.svelte","../../src/main.js"],"sourcesContent":["function noop() { }\nconst identity = x => x;\nfunction assign(tar, src) {\n    // @ts-ignore\n    for (const k in src)\n        tar[k] = src[k];\n    return tar;\n}\nfunction is_promise(value) {\n    return value && typeof value === 'object' && typeof value.then === 'function';\n}\nfunction add_location(element, file, line, column, char) {\n    element.__svelte_meta = {\n        loc: { file, line, column, char }\n    };\n}\nfunction run(fn) {\n    return fn();\n}\nfunction blank_object() {\n    return Object.create(null);\n}\nfunction run_all(fns) {\n    fns.forEach(run);\n}\nfunction is_function(thing) {\n    return typeof thing === 'function';\n}\nfunction safe_not_equal(a, b) {\n    return a != a ? b == b : a !== b || ((a && typeof a === 'object') || typeof a === 'function');\n}\nfunction not_equal(a, b) {\n    return a != a ? b == b : a !== b;\n}\nfunction is_empty(obj) {\n    return Object.keys(obj).length === 0;\n}\nfunction validate_store(store, name) {\n    if (store != null && typeof store.subscribe !== 'function') {\n        throw new Error(`'${name}' is not a store with a 'subscribe' method`);\n    }\n}\nfunction subscribe(store, ...callbacks) {\n    if (store == null) {\n        return noop;\n    }\n    const unsub = store.subscribe(...callbacks);\n    return unsub.unsubscribe ? () => unsub.unsubscribe() : unsub;\n}\nfunction get_store_value(store) {\n    let value;\n    subscribe(store, _ => value = _)();\n    return value;\n}\nfunction component_subscribe(component, store, callback) {\n    component.$$.on_destroy.push(subscribe(store, callback));\n}\nfunction create_slot(definition, ctx, $$scope, fn) {\n    if (definition) {\n        const slot_ctx = get_slot_context(definition, ctx, $$scope, fn);\n        return definition[0](slot_ctx);\n    }\n}\nfunction get_slot_context(definition, ctx, $$scope, fn) {\n    return definition[1] && fn\n        ? assign($$scope.ctx.slice(), definition[1](fn(ctx)))\n        : $$scope.ctx;\n}\nfunction get_slot_changes(definition, $$scope, dirty, fn) {\n    if (definition[2] && fn) {\n        const lets = definition[2](fn(dirty));\n        if ($$scope.dirty === undefined) {\n            return lets;\n        }\n        if (typeof lets === 'object') {\n            const merged = [];\n            const len = Math.max($$scope.dirty.length, lets.length);\n            for (let i = 0; i < len; i += 1) {\n                merged[i] = $$scope.dirty[i] | lets[i];\n            }\n            return merged;\n        }\n        return $$scope.dirty | lets;\n    }\n    return $$scope.dirty;\n}\nfunction update_slot(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction update_slot_spread(slot, slot_definition, ctx, $$scope, dirty, get_slot_changes_fn, get_slot_spread_changes_fn, get_slot_context_fn) {\n    const slot_changes = get_slot_spread_changes_fn(dirty) | get_slot_changes(slot_definition, $$scope, dirty, get_slot_changes_fn);\n    if (slot_changes) {\n        const slot_context = get_slot_context(slot_definition, ctx, $$scope, get_slot_context_fn);\n        slot.p(slot_context, slot_changes);\n    }\n}\nfunction exclude_internal_props(props) {\n    const result = {};\n    for (const k in props)\n        if (k[0] !== '$')\n            result[k] = props[k];\n    return result;\n}\nfunction compute_rest_props(props, keys) {\n    const rest = {};\n    keys = new Set(keys);\n    for (const k in props)\n        if (!keys.has(k) && k[0] !== '$')\n            rest[k] = props[k];\n    return rest;\n}\nfunction compute_slots(slots) {\n    const result = {};\n    for (const key in slots) {\n        result[key] = true;\n    }\n    return result;\n}\nfunction once(fn) {\n    let ran = false;\n    return function (...args) {\n        if (ran)\n            return;\n        ran = true;\n        fn.call(this, ...args);\n    };\n}\nfunction null_to_empty(value) {\n    return value == null ? '' : value;\n}\nfunction set_store_value(store, ret, value = ret) {\n    store.set(value);\n    return ret;\n}\nconst has_prop = (obj, prop) => Object.prototype.hasOwnProperty.call(obj, prop);\nfunction action_destroyer(action_result) {\n    return action_result && is_function(action_result.destroy) ? action_result.destroy : noop;\n}\n\nconst is_client = typeof window !== 'undefined';\nlet now = is_client\n    ? () => window.performance.now()\n    : () => Date.now();\nlet raf = is_client ? cb => requestAnimationFrame(cb) : noop;\n// used internally for testing\nfunction set_now(fn) {\n    now = fn;\n}\nfunction set_raf(fn) {\n    raf = fn;\n}\n\nconst tasks = new Set();\nfunction run_tasks(now) {\n    tasks.forEach(task => {\n        if (!task.c(now)) {\n            tasks.delete(task);\n            task.f();\n        }\n    });\n    if (tasks.size !== 0)\n        raf(run_tasks);\n}\n/**\n * For testing purposes only!\n */\nfunction clear_loops() {\n    tasks.clear();\n}\n/**\n * Creates a new task that runs on each raf frame\n * until it returns a falsy value or is aborted\n */\nfunction loop(callback) {\n    let task;\n    if (tasks.size === 0)\n        raf(run_tasks);\n    return {\n        promise: new Promise(fulfill => {\n            tasks.add(task = { c: callback, f: fulfill });\n        }),\n        abort() {\n            tasks.delete(task);\n        }\n    };\n}\n\nfunction append(target, node) {\n    target.appendChild(node);\n}\nfunction insert(target, node, anchor) {\n    target.insertBefore(node, anchor || null);\n}\nfunction detach(node) {\n    node.parentNode.removeChild(node);\n}\nfunction destroy_each(iterations, detaching) {\n    for (let i = 0; i < iterations.length; i += 1) {\n        if (iterations[i])\n            iterations[i].d(detaching);\n    }\n}\nfunction element(name) {\n    return document.createElement(name);\n}\nfunction element_is(name, is) {\n    return document.createElement(name, { is });\n}\nfunction object_without_properties(obj, exclude) {\n    const target = {};\n    for (const k in obj) {\n        if (has_prop(obj, k)\n            // @ts-ignore\n            && exclude.indexOf(k) === -1) {\n            // @ts-ignore\n            target[k] = obj[k];\n        }\n    }\n    return target;\n}\nfunction svg_element(name) {\n    return document.createElementNS('http://www.w3.org/2000/svg', name);\n}\nfunction text(data) {\n    return document.createTextNode(data);\n}\nfunction space() {\n    return text(' ');\n}\nfunction empty() {\n    return text('');\n}\nfunction listen(node, event, handler, options) {\n    node.addEventListener(event, handler, options);\n    return () => node.removeEventListener(event, handler, options);\n}\nfunction prevent_default(fn) {\n    return function (event) {\n        event.preventDefault();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction stop_propagation(fn) {\n    return function (event) {\n        event.stopPropagation();\n        // @ts-ignore\n        return fn.call(this, event);\n    };\n}\nfunction self(fn) {\n    return function (event) {\n        // @ts-ignore\n        if (event.target === this)\n            fn.call(this, event);\n    };\n}\nfunction attr(node, attribute, value) {\n    if (value == null)\n        node.removeAttribute(attribute);\n    else if (node.getAttribute(attribute) !== value)\n        node.setAttribute(attribute, value);\n}\nfunction set_attributes(node, attributes) {\n    // @ts-ignore\n    const descriptors = Object.getOwnPropertyDescriptors(node.__proto__);\n    for (const key in attributes) {\n        if (attributes[key] == null) {\n            node.removeAttribute(key);\n        }\n        else if (key === 'style') {\n            node.style.cssText = attributes[key];\n        }\n        else if (key === '__value') {\n            node.value = node[key] = attributes[key];\n        }\n        else if (descriptors[key] && descriptors[key].set) {\n            node[key] = attributes[key];\n        }\n        else {\n            attr(node, key, attributes[key]);\n        }\n    }\n}\nfunction set_svg_attributes(node, attributes) {\n    for (const key in attributes) {\n        attr(node, key, attributes[key]);\n    }\n}\nfunction set_custom_element_data(node, prop, value) {\n    if (prop in node) {\n        node[prop] = value;\n    }\n    else {\n        attr(node, prop, value);\n    }\n}\nfunction xlink_attr(node, attribute, value) {\n    node.setAttributeNS('http://www.w3.org/1999/xlink', attribute, value);\n}\nfunction get_binding_group_value(group, __value, checked) {\n    const value = new Set();\n    for (let i = 0; i < group.length; i += 1) {\n        if (group[i].checked)\n            value.add(group[i].__value);\n    }\n    if (!checked) {\n        value.delete(__value);\n    }\n    return Array.from(value);\n}\nfunction to_number(value) {\n    return value === '' ? null : +value;\n}\nfunction time_ranges_to_array(ranges) {\n    const array = [];\n    for (let i = 0; i < ranges.length; i += 1) {\n        array.push({ start: ranges.start(i), end: ranges.end(i) });\n    }\n    return array;\n}\nfunction children(element) {\n    return Array.from(element.childNodes);\n}\nfunction claim_element(nodes, name, attributes, svg) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeName === name) {\n            let j = 0;\n            const remove = [];\n            while (j < node.attributes.length) {\n                const attribute = node.attributes[j++];\n                if (!attributes[attribute.name]) {\n                    remove.push(attribute.name);\n                }\n            }\n            for (let k = 0; k < remove.length; k++) {\n                node.removeAttribute(remove[k]);\n            }\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return svg ? svg_element(name) : element(name);\n}\nfunction claim_text(nodes, data) {\n    for (let i = 0; i < nodes.length; i += 1) {\n        const node = nodes[i];\n        if (node.nodeType === 3) {\n            node.data = '' + data;\n            return nodes.splice(i, 1)[0];\n        }\n    }\n    return text(data);\n}\nfunction claim_space(nodes) {\n    return claim_text(nodes, ' ');\n}\nfunction set_data(text, data) {\n    data = '' + data;\n    if (text.wholeText !== data)\n        text.data = data;\n}\nfunction set_input_value(input, value) {\n    input.value = value == null ? '' : value;\n}\nfunction set_input_type(input, type) {\n    try {\n        input.type = type;\n    }\n    catch (e) {\n        // do nothing\n    }\n}\nfunction set_style(node, key, value, important) {\n    node.style.setProperty(key, value, important ? 'important' : '');\n}\nfunction select_option(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        if (option.__value === value) {\n            option.selected = true;\n            return;\n        }\n    }\n}\nfunction select_options(select, value) {\n    for (let i = 0; i < select.options.length; i += 1) {\n        const option = select.options[i];\n        option.selected = ~value.indexOf(option.__value);\n    }\n}\nfunction select_value(select) {\n    const selected_option = select.querySelector(':checked') || select.options[0];\n    return selected_option && selected_option.__value;\n}\nfunction select_multiple_value(select) {\n    return [].map.call(select.querySelectorAll(':checked'), option => option.__value);\n}\n// unfortunately this can't be a constant as that wouldn't be tree-shakeable\n// so we cache the result instead\nlet crossorigin;\nfunction is_crossorigin() {\n    if (crossorigin === undefined) {\n        crossorigin = false;\n        try {\n            if (typeof window !== 'undefined' && window.parent) {\n                void window.parent.document;\n            }\n        }\n        catch (error) {\n            crossorigin = true;\n        }\n    }\n    return crossorigin;\n}\nfunction add_resize_listener(node, fn) {\n    const computed_style = getComputedStyle(node);\n    const z_index = (parseInt(computed_style.zIndex) || 0) - 1;\n    if (computed_style.position === 'static') {\n        node.style.position = 'relative';\n    }\n    const iframe = element('iframe');\n    iframe.setAttribute('style', 'display: block; position: absolute; top: 0; left: 0; width: 100%; height: 100%; ' +\n        `overflow: hidden; border: 0; opacity: 0; pointer-events: none; z-index: ${z_index};`);\n    iframe.setAttribute('aria-hidden', 'true');\n    iframe.tabIndex = -1;\n    const crossorigin = is_crossorigin();\n    let unsubscribe;\n    if (crossorigin) {\n        iframe.src = \"data:text/html,<script>onresize=function(){parent.postMessage(0,'*')}</script>\";\n        unsubscribe = listen(window, 'message', (event) => {\n            if (event.source === iframe.contentWindow)\n                fn();\n        });\n    }\n    else {\n        iframe.src = 'about:blank';\n        iframe.onload = () => {\n            unsubscribe = listen(iframe.contentWindow, 'resize', fn);\n        };\n    }\n    append(node, iframe);\n    return () => {\n        if (crossorigin) {\n            unsubscribe();\n        }\n        else if (unsubscribe && iframe.contentWindow) {\n            unsubscribe();\n        }\n        detach(iframe);\n    };\n}\nfunction toggle_class(element, name, toggle) {\n    element.classList[toggle ? 'add' : 'remove'](name);\n}\nfunction custom_event(type, detail) {\n    const e = document.createEvent('CustomEvent');\n    e.initCustomEvent(type, false, false, detail);\n    return e;\n}\nfunction query_selector_all(selector, parent = document.body) {\n    return Array.from(parent.querySelectorAll(selector));\n}\nclass HtmlTag {\n    constructor(anchor = null) {\n        this.a = anchor;\n        this.e = this.n = null;\n    }\n    m(html, target, anchor = null) {\n        if (!this.e) {\n            this.e = element(target.nodeName);\n            this.t = target;\n            this.h(html);\n        }\n        this.i(anchor);\n    }\n    h(html) {\n        this.e.innerHTML = html;\n        this.n = Array.from(this.e.childNodes);\n    }\n    i(anchor) {\n        for (let i = 0; i < this.n.length; i += 1) {\n            insert(this.t, this.n[i], anchor);\n        }\n    }\n    p(html) {\n        this.d();\n        this.h(html);\n        this.i(this.a);\n    }\n    d() {\n        this.n.forEach(detach);\n    }\n}\nfunction attribute_to_object(attributes) {\n    const result = {};\n    for (const attribute of attributes) {\n        result[attribute.name] = attribute.value;\n    }\n    return result;\n}\nfunction get_custom_elements_slots(element) {\n    const result = {};\n    element.childNodes.forEach((node) => {\n        result[node.slot || 'default'] = true;\n    });\n    return result;\n}\n\nconst active_docs = new Set();\nlet active = 0;\n// https://github.com/darkskyapp/string-hash/blob/master/index.js\nfunction hash(str) {\n    let hash = 5381;\n    let i = str.length;\n    while (i--)\n        hash = ((hash << 5) - hash) ^ str.charCodeAt(i);\n    return hash >>> 0;\n}\nfunction create_rule(node, a, b, duration, delay, ease, fn, uid = 0) {\n    const step = 16.666 / duration;\n    let keyframes = '{\\n';\n    for (let p = 0; p <= 1; p += step) {\n        const t = a + (b - a) * ease(p);\n        keyframes += p * 100 + `%{${fn(t, 1 - t)}}\\n`;\n    }\n    const rule = keyframes + `100% {${fn(b, 1 - b)}}\\n}`;\n    const name = `__svelte_${hash(rule)}_${uid}`;\n    const doc = node.ownerDocument;\n    active_docs.add(doc);\n    const stylesheet = doc.__svelte_stylesheet || (doc.__svelte_stylesheet = doc.head.appendChild(element('style')).sheet);\n    const current_rules = doc.__svelte_rules || (doc.__svelte_rules = {});\n    if (!current_rules[name]) {\n        current_rules[name] = true;\n        stylesheet.insertRule(`@keyframes ${name} ${rule}`, stylesheet.cssRules.length);\n    }\n    const animation = node.style.animation || '';\n    node.style.animation = `${animation ? `${animation}, ` : ''}${name} ${duration}ms linear ${delay}ms 1 both`;\n    active += 1;\n    return name;\n}\nfunction delete_rule(node, name) {\n    const previous = (node.style.animation || '').split(', ');\n    const next = previous.filter(name\n        ? anim => anim.indexOf(name) < 0 // remove specific animation\n        : anim => anim.indexOf('__svelte') === -1 // remove all Svelte animations\n    );\n    const deleted = previous.length - next.length;\n    if (deleted) {\n        node.style.animation = next.join(', ');\n        active -= deleted;\n        if (!active)\n            clear_rules();\n    }\n}\nfunction clear_rules() {\n    raf(() => {\n        if (active)\n            return;\n        active_docs.forEach(doc => {\n            const stylesheet = doc.__svelte_stylesheet;\n            let i = stylesheet.cssRules.length;\n            while (i--)\n                stylesheet.deleteRule(i);\n            doc.__svelte_rules = {};\n        });\n        active_docs.clear();\n    });\n}\n\nfunction create_animation(node, from, fn, params) {\n    if (!from)\n        return noop;\n    const to = node.getBoundingClientRect();\n    if (from.left === to.left && from.right === to.right && from.top === to.top && from.bottom === to.bottom)\n        return noop;\n    const { delay = 0, duration = 300, easing = identity, \n    // @ts-ignore todo: should this be separated from destructuring? Or start/end added to public api and documentation?\n    start: start_time = now() + delay, \n    // @ts-ignore todo:\n    end = start_time + duration, tick = noop, css } = fn(node, { from, to }, params);\n    let running = true;\n    let started = false;\n    let name;\n    function start() {\n        if (css) {\n            name = create_rule(node, 0, 1, duration, delay, easing, css);\n        }\n        if (!delay) {\n            started = true;\n        }\n    }\n    function stop() {\n        if (css)\n            delete_rule(node, name);\n        running = false;\n    }\n    loop(now => {\n        if (!started && now >= start_time) {\n            started = true;\n        }\n        if (started && now >= end) {\n            tick(1, 0);\n            stop();\n        }\n        if (!running) {\n            return false;\n        }\n        if (started) {\n            const p = now - start_time;\n            const t = 0 + 1 * easing(p / duration);\n            tick(t, 1 - t);\n        }\n        return true;\n    });\n    start();\n    tick(0, 1);\n    return stop;\n}\nfunction fix_position(node) {\n    const style = getComputedStyle(node);\n    if (style.position !== 'absolute' && style.position !== 'fixed') {\n        const { width, height } = style;\n        const a = node.getBoundingClientRect();\n        node.style.position = 'absolute';\n        node.style.width = width;\n        node.style.height = height;\n        add_transform(node, a);\n    }\n}\nfunction add_transform(node, a) {\n    const b = node.getBoundingClientRect();\n    if (a.left !== b.left || a.top !== b.top) {\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        node.style.transform = `${transform} translate(${a.left - b.left}px, ${a.top - b.top}px)`;\n    }\n}\n\nlet current_component;\nfunction set_current_component(component) {\n    current_component = component;\n}\nfunction get_current_component() {\n    if (!current_component)\n        throw new Error('Function called outside component initialization');\n    return current_component;\n}\nfunction beforeUpdate(fn) {\n    get_current_component().$$.before_update.push(fn);\n}\nfunction onMount(fn) {\n    get_current_component().$$.on_mount.push(fn);\n}\nfunction afterUpdate(fn) {\n    get_current_component().$$.after_update.push(fn);\n}\nfunction onDestroy(fn) {\n    get_current_component().$$.on_destroy.push(fn);\n}\nfunction createEventDispatcher() {\n    const component = get_current_component();\n    return (type, detail) => {\n        const callbacks = component.$$.callbacks[type];\n        if (callbacks) {\n            // TODO are there situations where events could be dispatched\n            // in a server (non-DOM) environment?\n            const event = custom_event(type, detail);\n            callbacks.slice().forEach(fn => {\n                fn.call(component, event);\n            });\n        }\n    };\n}\nfunction setContext(key, context) {\n    get_current_component().$$.context.set(key, context);\n}\nfunction getContext(key) {\n    return get_current_component().$$.context.get(key);\n}\nfunction hasContext(key) {\n    return get_current_component().$$.context.has(key);\n}\n// TODO figure out if we still want to support\n// shorthand events, or if we want to implement\n// a real bubbling mechanism\nfunction bubble(component, event) {\n    const callbacks = component.$$.callbacks[event.type];\n    if (callbacks) {\n        callbacks.slice().forEach(fn => fn(event));\n    }\n}\n\nconst dirty_components = [];\nconst intros = { enabled: false };\nconst binding_callbacks = [];\nconst render_callbacks = [];\nconst flush_callbacks = [];\nconst resolved_promise = Promise.resolve();\nlet update_scheduled = false;\nfunction schedule_update() {\n    if (!update_scheduled) {\n        update_scheduled = true;\n        resolved_promise.then(flush);\n    }\n}\nfunction tick() {\n    schedule_update();\n    return resolved_promise;\n}\nfunction add_render_callback(fn) {\n    render_callbacks.push(fn);\n}\nfunction add_flush_callback(fn) {\n    flush_callbacks.push(fn);\n}\nlet flushing = false;\nconst seen_callbacks = new Set();\nfunction flush() {\n    if (flushing)\n        return;\n    flushing = true;\n    do {\n        // first, call beforeUpdate functions\n        // and update components\n        for (let i = 0; i < dirty_components.length; i += 1) {\n            const component = dirty_components[i];\n            set_current_component(component);\n            update(component.$$);\n        }\n        set_current_component(null);\n        dirty_components.length = 0;\n        while (binding_callbacks.length)\n            binding_callbacks.pop()();\n        // then, once components are updated, call\n        // afterUpdate functions. This may cause\n        // subsequent updates...\n        for (let i = 0; i < render_callbacks.length; i += 1) {\n            const callback = render_callbacks[i];\n            if (!seen_callbacks.has(callback)) {\n                // ...so guard against infinite loops\n                seen_callbacks.add(callback);\n                callback();\n            }\n        }\n        render_callbacks.length = 0;\n    } while (dirty_components.length);\n    while (flush_callbacks.length) {\n        flush_callbacks.pop()();\n    }\n    update_scheduled = false;\n    flushing = false;\n    seen_callbacks.clear();\n}\nfunction update($$) {\n    if ($$.fragment !== null) {\n        $$.update();\n        run_all($$.before_update);\n        const dirty = $$.dirty;\n        $$.dirty = [-1];\n        $$.fragment && $$.fragment.p($$.ctx, dirty);\n        $$.after_update.forEach(add_render_callback);\n    }\n}\n\nlet promise;\nfunction wait() {\n    if (!promise) {\n        promise = Promise.resolve();\n        promise.then(() => {\n            promise = null;\n        });\n    }\n    return promise;\n}\nfunction dispatch(node, direction, kind) {\n    node.dispatchEvent(custom_event(`${direction ? 'intro' : 'outro'}${kind}`));\n}\nconst outroing = new Set();\nlet outros;\nfunction group_outros() {\n    outros = {\n        r: 0,\n        c: [],\n        p: outros // parent group\n    };\n}\nfunction check_outros() {\n    if (!outros.r) {\n        run_all(outros.c);\n    }\n    outros = outros.p;\n}\nfunction transition_in(block, local) {\n    if (block && block.i) {\n        outroing.delete(block);\n        block.i(local);\n    }\n}\nfunction transition_out(block, local, detach, callback) {\n    if (block && block.o) {\n        if (outroing.has(block))\n            return;\n        outroing.add(block);\n        outros.c.push(() => {\n            outroing.delete(block);\n            if (callback) {\n                if (detach)\n                    block.d(1);\n                callback();\n            }\n        });\n        block.o(local);\n    }\n}\nconst null_transition = { duration: 0 };\nfunction create_in_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = false;\n    let animation_name;\n    let task;\n    let uid = 0;\n    function cleanup() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 0, 1, duration, delay, easing, css, uid++);\n        tick(0, 1);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        if (task)\n            task.abort();\n        running = true;\n        add_render_callback(() => dispatch(node, true, 'start'));\n        task = loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(1, 0);\n                    dispatch(node, true, 'end');\n                    cleanup();\n                    return running = false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(t, 1 - t);\n                }\n            }\n            return running;\n        });\n    }\n    let started = false;\n    return {\n        start() {\n            if (started)\n                return;\n            delete_rule(node);\n            if (is_function(config)) {\n                config = config();\n                wait().then(go);\n            }\n            else {\n                go();\n            }\n        },\n        invalidate() {\n            started = false;\n        },\n        end() {\n            if (running) {\n                cleanup();\n                running = false;\n            }\n        }\n    };\n}\nfunction create_out_transition(node, fn, params) {\n    let config = fn(node, params);\n    let running = true;\n    let animation_name;\n    const group = outros;\n    group.r += 1;\n    function go() {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        if (css)\n            animation_name = create_rule(node, 1, 0, duration, delay, easing, css);\n        const start_time = now() + delay;\n        const end_time = start_time + duration;\n        add_render_callback(() => dispatch(node, false, 'start'));\n        loop(now => {\n            if (running) {\n                if (now >= end_time) {\n                    tick(0, 1);\n                    dispatch(node, false, 'end');\n                    if (!--group.r) {\n                        // this will result in `end()` being called,\n                        // so we don't need to clean up here\n                        run_all(group.c);\n                    }\n                    return false;\n                }\n                if (now >= start_time) {\n                    const t = easing((now - start_time) / duration);\n                    tick(1 - t, t);\n                }\n            }\n            return running;\n        });\n    }\n    if (is_function(config)) {\n        wait().then(() => {\n            // @ts-ignore\n            config = config();\n            go();\n        });\n    }\n    else {\n        go();\n    }\n    return {\n        end(reset) {\n            if (reset && config.tick) {\n                config.tick(1, 0);\n            }\n            if (running) {\n                if (animation_name)\n                    delete_rule(node, animation_name);\n                running = false;\n            }\n        }\n    };\n}\nfunction create_bidirectional_transition(node, fn, params, intro) {\n    let config = fn(node, params);\n    let t = intro ? 0 : 1;\n    let running_program = null;\n    let pending_program = null;\n    let animation_name = null;\n    function clear_animation() {\n        if (animation_name)\n            delete_rule(node, animation_name);\n    }\n    function init(program, duration) {\n        const d = program.b - t;\n        duration *= Math.abs(d);\n        return {\n            a: t,\n            b: program.b,\n            d,\n            duration,\n            start: program.start,\n            end: program.start + duration,\n            group: program.group\n        };\n    }\n    function go(b) {\n        const { delay = 0, duration = 300, easing = identity, tick = noop, css } = config || null_transition;\n        const program = {\n            start: now() + delay,\n            b\n        };\n        if (!b) {\n            // @ts-ignore todo: improve typings\n            program.group = outros;\n            outros.r += 1;\n        }\n        if (running_program || pending_program) {\n            pending_program = program;\n        }\n        else {\n            // if this is an intro, and there's a delay, we need to do\n            // an initial tick and/or apply CSS animation immediately\n            if (css) {\n                clear_animation();\n                animation_name = create_rule(node, t, b, duration, delay, easing, css);\n            }\n            if (b)\n                tick(0, 1);\n            running_program = init(program, duration);\n            add_render_callback(() => dispatch(node, b, 'start'));\n            loop(now => {\n                if (pending_program && now > pending_program.start) {\n                    running_program = init(pending_program, duration);\n                    pending_program = null;\n                    dispatch(node, running_program.b, 'start');\n                    if (css) {\n                        clear_animation();\n                        animation_name = create_rule(node, t, running_program.b, running_program.duration, 0, easing, config.css);\n                    }\n                }\n                if (running_program) {\n                    if (now >= running_program.end) {\n                        tick(t = running_program.b, 1 - t);\n                        dispatch(node, running_program.b, 'end');\n                        if (!pending_program) {\n                            // we're done\n                            if (running_program.b) {\n                                // intro — we can tidy up immediately\n                                clear_animation();\n                            }\n                            else {\n                                // outro — needs to be coordinated\n                                if (!--running_program.group.r)\n                                    run_all(running_program.group.c);\n                            }\n                        }\n                        running_program = null;\n                    }\n                    else if (now >= running_program.start) {\n                        const p = now - running_program.start;\n                        t = running_program.a + running_program.d * easing(p / running_program.duration);\n                        tick(t, 1 - t);\n                    }\n                }\n                return !!(running_program || pending_program);\n            });\n        }\n    }\n    return {\n        run(b) {\n            if (is_function(config)) {\n                wait().then(() => {\n                    // @ts-ignore\n                    config = config();\n                    go(b);\n                });\n            }\n            else {\n                go(b);\n            }\n        },\n        end() {\n            clear_animation();\n            running_program = pending_program = null;\n        }\n    };\n}\n\nfunction handle_promise(promise, info) {\n    const token = info.token = {};\n    function update(type, index, key, value) {\n        if (info.token !== token)\n            return;\n        info.resolved = value;\n        let child_ctx = info.ctx;\n        if (key !== undefined) {\n            child_ctx = child_ctx.slice();\n            child_ctx[key] = value;\n        }\n        const block = type && (info.current = type)(child_ctx);\n        let needs_flush = false;\n        if (info.block) {\n            if (info.blocks) {\n                info.blocks.forEach((block, i) => {\n                    if (i !== index && block) {\n                        group_outros();\n                        transition_out(block, 1, 1, () => {\n                            info.blocks[i] = null;\n                        });\n                        check_outros();\n                    }\n                });\n            }\n            else {\n                info.block.d(1);\n            }\n            block.c();\n            transition_in(block, 1);\n            block.m(info.mount(), info.anchor);\n            needs_flush = true;\n        }\n        info.block = block;\n        if (info.blocks)\n            info.blocks[index] = block;\n        if (needs_flush) {\n            flush();\n        }\n    }\n    if (is_promise(promise)) {\n        const current_component = get_current_component();\n        promise.then(value => {\n            set_current_component(current_component);\n            update(info.then, 1, info.value, value);\n            set_current_component(null);\n        }, error => {\n            set_current_component(current_component);\n            update(info.catch, 2, info.error, error);\n            set_current_component(null);\n            if (!info.hasCatch) {\n                throw error;\n            }\n        });\n        // if we previously had a then/catch block, destroy it\n        if (info.current !== info.pending) {\n            update(info.pending, 0);\n            return true;\n        }\n    }\n    else {\n        if (info.current !== info.then) {\n            update(info.then, 1, info.value, promise);\n            return true;\n        }\n        info.resolved = promise;\n    }\n}\n\nconst globals = (typeof window !== 'undefined'\n    ? window\n    : typeof globalThis !== 'undefined'\n        ? globalThis\n        : global);\n\nfunction destroy_block(block, lookup) {\n    block.d(1);\n    lookup.delete(block.key);\n}\nfunction outro_and_destroy_block(block, lookup) {\n    transition_out(block, 1, 1, () => {\n        lookup.delete(block.key);\n    });\n}\nfunction fix_and_destroy_block(block, lookup) {\n    block.f();\n    destroy_block(block, lookup);\n}\nfunction fix_and_outro_and_destroy_block(block, lookup) {\n    block.f();\n    outro_and_destroy_block(block, lookup);\n}\nfunction update_keyed_each(old_blocks, dirty, get_key, dynamic, ctx, list, lookup, node, destroy, create_each_block, next, get_context) {\n    let o = old_blocks.length;\n    let n = list.length;\n    let i = o;\n    const old_indexes = {};\n    while (i--)\n        old_indexes[old_blocks[i].key] = i;\n    const new_blocks = [];\n    const new_lookup = new Map();\n    const deltas = new Map();\n    i = n;\n    while (i--) {\n        const child_ctx = get_context(ctx, list, i);\n        const key = get_key(child_ctx);\n        let block = lookup.get(key);\n        if (!block) {\n            block = create_each_block(key, child_ctx);\n            block.c();\n        }\n        else if (dynamic) {\n            block.p(child_ctx, dirty);\n        }\n        new_lookup.set(key, new_blocks[i] = block);\n        if (key in old_indexes)\n            deltas.set(key, Math.abs(i - old_indexes[key]));\n    }\n    const will_move = new Set();\n    const did_move = new Set();\n    function insert(block) {\n        transition_in(block, 1);\n        block.m(node, next);\n        lookup.set(block.key, block);\n        next = block.first;\n        n--;\n    }\n    while (o && n) {\n        const new_block = new_blocks[n - 1];\n        const old_block = old_blocks[o - 1];\n        const new_key = new_block.key;\n        const old_key = old_block.key;\n        if (new_block === old_block) {\n            // do nothing\n            next = new_block.first;\n            o--;\n            n--;\n        }\n        else if (!new_lookup.has(old_key)) {\n            // remove old block\n            destroy(old_block, lookup);\n            o--;\n        }\n        else if (!lookup.has(new_key) || will_move.has(new_key)) {\n            insert(new_block);\n        }\n        else if (did_move.has(old_key)) {\n            o--;\n        }\n        else if (deltas.get(new_key) > deltas.get(old_key)) {\n            did_move.add(new_key);\n            insert(new_block);\n        }\n        else {\n            will_move.add(old_key);\n            o--;\n        }\n    }\n    while (o--) {\n        const old_block = old_blocks[o];\n        if (!new_lookup.has(old_block.key))\n            destroy(old_block, lookup);\n    }\n    while (n)\n        insert(new_blocks[n - 1]);\n    return new_blocks;\n}\nfunction validate_each_keys(ctx, list, get_context, get_key) {\n    const keys = new Set();\n    for (let i = 0; i < list.length; i++) {\n        const key = get_key(get_context(ctx, list, i));\n        if (keys.has(key)) {\n            throw new Error('Cannot have duplicate keys in a keyed each');\n        }\n        keys.add(key);\n    }\n}\n\nfunction get_spread_update(levels, updates) {\n    const update = {};\n    const to_null_out = {};\n    const accounted_for = { $$scope: 1 };\n    let i = levels.length;\n    while (i--) {\n        const o = levels[i];\n        const n = updates[i];\n        if (n) {\n            for (const key in o) {\n                if (!(key in n))\n                    to_null_out[key] = 1;\n            }\n            for (const key in n) {\n                if (!accounted_for[key]) {\n                    update[key] = n[key];\n                    accounted_for[key] = 1;\n                }\n            }\n            levels[i] = n;\n        }\n        else {\n            for (const key in o) {\n                accounted_for[key] = 1;\n            }\n        }\n    }\n    for (const key in to_null_out) {\n        if (!(key in update))\n            update[key] = undefined;\n    }\n    return update;\n}\nfunction get_spread_object(spread_props) {\n    return typeof spread_props === 'object' && spread_props !== null ? spread_props : {};\n}\n\n// source: https://html.spec.whatwg.org/multipage/indices.html\nconst boolean_attributes = new Set([\n    'allowfullscreen',\n    'allowpaymentrequest',\n    'async',\n    'autofocus',\n    'autoplay',\n    'checked',\n    'controls',\n    'default',\n    'defer',\n    'disabled',\n    'formnovalidate',\n    'hidden',\n    'ismap',\n    'loop',\n    'multiple',\n    'muted',\n    'nomodule',\n    'novalidate',\n    'open',\n    'playsinline',\n    'readonly',\n    'required',\n    'reversed',\n    'selected'\n]);\n\nconst invalid_attribute_name_character = /[\\s'\">/=\\u{FDD0}-\\u{FDEF}\\u{FFFE}\\u{FFFF}\\u{1FFFE}\\u{1FFFF}\\u{2FFFE}\\u{2FFFF}\\u{3FFFE}\\u{3FFFF}\\u{4FFFE}\\u{4FFFF}\\u{5FFFE}\\u{5FFFF}\\u{6FFFE}\\u{6FFFF}\\u{7FFFE}\\u{7FFFF}\\u{8FFFE}\\u{8FFFF}\\u{9FFFE}\\u{9FFFF}\\u{AFFFE}\\u{AFFFF}\\u{BFFFE}\\u{BFFFF}\\u{CFFFE}\\u{CFFFF}\\u{DFFFE}\\u{DFFFF}\\u{EFFFE}\\u{EFFFF}\\u{FFFFE}\\u{FFFFF}\\u{10FFFE}\\u{10FFFF}]/u;\n// https://html.spec.whatwg.org/multipage/syntax.html#attributes-2\n// https://infra.spec.whatwg.org/#noncharacter\nfunction spread(args, classes_to_add) {\n    const attributes = Object.assign({}, ...args);\n    if (classes_to_add) {\n        if (attributes.class == null) {\n            attributes.class = classes_to_add;\n        }\n        else {\n            attributes.class += ' ' + classes_to_add;\n        }\n    }\n    let str = '';\n    Object.keys(attributes).forEach(name => {\n        if (invalid_attribute_name_character.test(name))\n            return;\n        const value = attributes[name];\n        if (value === true)\n            str += ' ' + name;\n        else if (boolean_attributes.has(name.toLowerCase())) {\n            if (value)\n                str += ' ' + name;\n        }\n        else if (value != null) {\n            str += ` ${name}=\"${String(value).replace(/\"/g, '&#34;').replace(/'/g, '&#39;')}\"`;\n        }\n    });\n    return str;\n}\nconst escaped = {\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;'\n};\nfunction escape(html) {\n    return String(html).replace(/[\"'&<>]/g, match => escaped[match]);\n}\nfunction each(items, fn) {\n    let str = '';\n    for (let i = 0; i < items.length; i += 1) {\n        str += fn(items[i], i);\n    }\n    return str;\n}\nconst missing_component = {\n    $$render: () => ''\n};\nfunction validate_component(component, name) {\n    if (!component || !component.$$render) {\n        if (name === 'svelte:component')\n            name += ' this={...}';\n        throw new Error(`<${name}> is not a valid SSR component. You may need to review your build config to ensure that dependencies are compiled, rather than imported as pre-compiled modules`);\n    }\n    return component;\n}\nfunction debug(file, line, column, values) {\n    console.log(`{@debug} ${file ? file + ' ' : ''}(${line}:${column})`); // eslint-disable-line no-console\n    console.log(values); // eslint-disable-line no-console\n    return '';\n}\nlet on_destroy;\nfunction create_ssr_component(fn) {\n    function $$render(result, props, bindings, slots) {\n        const parent_component = current_component;\n        const $$ = {\n            on_destroy,\n            context: new Map(parent_component ? parent_component.$$.context : []),\n            // these will be immediately discarded\n            on_mount: [],\n            before_update: [],\n            after_update: [],\n            callbacks: blank_object()\n        };\n        set_current_component({ $$ });\n        const html = fn(result, props, bindings, slots);\n        set_current_component(parent_component);\n        return html;\n    }\n    return {\n        render: (props = {}, options = {}) => {\n            on_destroy = [];\n            const result = { title: '', head: '', css: new Set() };\n            const html = $$render(result, props, {}, options);\n            run_all(on_destroy);\n            return {\n                html,\n                css: {\n                    code: Array.from(result.css).map(css => css.code).join('\\n'),\n                    map: null // TODO\n                },\n                head: result.title + result.head\n            };\n        },\n        $$render\n    };\n}\nfunction add_attribute(name, value, boolean) {\n    if (value == null || (boolean && !value))\n        return '';\n    return ` ${name}${value === true ? '' : `=${typeof value === 'string' ? JSON.stringify(escape(value)) : `\"${value}\"`}`}`;\n}\nfunction add_classes(classes) {\n    return classes ? ` class=\"${classes}\"` : '';\n}\n\nfunction bind(component, name, callback) {\n    const index = component.$$.props[name];\n    if (index !== undefined) {\n        component.$$.bound[index] = callback;\n        callback(component.$$.ctx[index]);\n    }\n}\nfunction create_component(block) {\n    block && block.c();\n}\nfunction claim_component(block, parent_nodes) {\n    block && block.l(parent_nodes);\n}\nfunction mount_component(component, target, anchor) {\n    const { fragment, on_mount, on_destroy, after_update } = component.$$;\n    fragment && fragment.m(target, anchor);\n    // onMount happens before the initial afterUpdate\n    add_render_callback(() => {\n        const new_on_destroy = on_mount.map(run).filter(is_function);\n        if (on_destroy) {\n            on_destroy.push(...new_on_destroy);\n        }\n        else {\n            // Edge case - component was destroyed immediately,\n            // most likely as a result of a binding initialising\n            run_all(new_on_destroy);\n        }\n        component.$$.on_mount = [];\n    });\n    after_update.forEach(add_render_callback);\n}\nfunction destroy_component(component, detaching) {\n    const $$ = component.$$;\n    if ($$.fragment !== null) {\n        run_all($$.on_destroy);\n        $$.fragment && $$.fragment.d(detaching);\n        // TODO null out other refs, including component.$$ (but need to\n        // preserve final state?)\n        $$.on_destroy = $$.fragment = null;\n        $$.ctx = [];\n    }\n}\nfunction make_dirty(component, i) {\n    if (component.$$.dirty[0] === -1) {\n        dirty_components.push(component);\n        schedule_update();\n        component.$$.dirty.fill(0);\n    }\n    component.$$.dirty[(i / 31) | 0] |= (1 << (i % 31));\n}\nfunction init(component, options, instance, create_fragment, not_equal, props, dirty = [-1]) {\n    const parent_component = current_component;\n    set_current_component(component);\n    const prop_values = options.props || {};\n    const $$ = component.$$ = {\n        fragment: null,\n        ctx: null,\n        // state\n        props,\n        update: noop,\n        not_equal,\n        bound: blank_object(),\n        // lifecycle\n        on_mount: [],\n        on_destroy: [],\n        before_update: [],\n        after_update: [],\n        context: new Map(parent_component ? parent_component.$$.context : []),\n        // everything else\n        callbacks: blank_object(),\n        dirty,\n        skip_bound: false\n    };\n    let ready = false;\n    $$.ctx = instance\n        ? instance(component, prop_values, (i, ret, ...rest) => {\n            const value = rest.length ? rest[0] : ret;\n            if ($$.ctx && not_equal($$.ctx[i], $$.ctx[i] = value)) {\n                if (!$$.skip_bound && $$.bound[i])\n                    $$.bound[i](value);\n                if (ready)\n                    make_dirty(component, i);\n            }\n            return ret;\n        })\n        : [];\n    $$.update();\n    ready = true;\n    run_all($$.before_update);\n    // `false` as a special case of no DOM component\n    $$.fragment = create_fragment ? create_fragment($$.ctx) : false;\n    if (options.target) {\n        if (options.hydrate) {\n            const nodes = children(options.target);\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.l(nodes);\n            nodes.forEach(detach);\n        }\n        else {\n            // eslint-disable-next-line @typescript-eslint/no-non-null-assertion\n            $$.fragment && $$.fragment.c();\n        }\n        if (options.intro)\n            transition_in(component.$$.fragment);\n        mount_component(component, options.target, options.anchor);\n        flush();\n    }\n    set_current_component(parent_component);\n}\nlet SvelteElement;\nif (typeof HTMLElement === 'function') {\n    SvelteElement = class extends HTMLElement {\n        constructor() {\n            super();\n            this.attachShadow({ mode: 'open' });\n        }\n        connectedCallback() {\n            // @ts-ignore todo: improve typings\n            for (const key in this.$$.slotted) {\n                // @ts-ignore todo: improve typings\n                this.appendChild(this.$$.slotted[key]);\n            }\n        }\n        attributeChangedCallback(attr, _oldValue, newValue) {\n            this[attr] = newValue;\n        }\n        $destroy() {\n            destroy_component(this, 1);\n            this.$destroy = noop;\n        }\n        $on(type, callback) {\n            // TODO should this delegate to addEventListener?\n            const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n            callbacks.push(callback);\n            return () => {\n                const index = callbacks.indexOf(callback);\n                if (index !== -1)\n                    callbacks.splice(index, 1);\n            };\n        }\n        $set($$props) {\n            if (this.$$set && !is_empty($$props)) {\n                this.$$.skip_bound = true;\n                this.$$set($$props);\n                this.$$.skip_bound = false;\n            }\n        }\n    };\n}\n/**\n * Base class for Svelte components. Used when dev=false.\n */\nclass SvelteComponent {\n    $destroy() {\n        destroy_component(this, 1);\n        this.$destroy = noop;\n    }\n    $on(type, callback) {\n        const callbacks = (this.$$.callbacks[type] || (this.$$.callbacks[type] = []));\n        callbacks.push(callback);\n        return () => {\n            const index = callbacks.indexOf(callback);\n            if (index !== -1)\n                callbacks.splice(index, 1);\n        };\n    }\n    $set($$props) {\n        if (this.$$set && !is_empty($$props)) {\n            this.$$.skip_bound = true;\n            this.$$set($$props);\n            this.$$.skip_bound = false;\n        }\n    }\n}\n\nfunction dispatch_dev(type, detail) {\n    document.dispatchEvent(custom_event(type, Object.assign({ version: '3.31.0' }, detail)));\n}\nfunction append_dev(target, node) {\n    dispatch_dev('SvelteDOMInsert', { target, node });\n    append(target, node);\n}\nfunction insert_dev(target, node, anchor) {\n    dispatch_dev('SvelteDOMInsert', { target, node, anchor });\n    insert(target, node, anchor);\n}\nfunction detach_dev(node) {\n    dispatch_dev('SvelteDOMRemove', { node });\n    detach(node);\n}\nfunction detach_between_dev(before, after) {\n    while (before.nextSibling && before.nextSibling !== after) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction detach_before_dev(after) {\n    while (after.previousSibling) {\n        detach_dev(after.previousSibling);\n    }\n}\nfunction detach_after_dev(before) {\n    while (before.nextSibling) {\n        detach_dev(before.nextSibling);\n    }\n}\nfunction listen_dev(node, event, handler, options, has_prevent_default, has_stop_propagation) {\n    const modifiers = options === true ? ['capture'] : options ? Array.from(Object.keys(options)) : [];\n    if (has_prevent_default)\n        modifiers.push('preventDefault');\n    if (has_stop_propagation)\n        modifiers.push('stopPropagation');\n    dispatch_dev('SvelteDOMAddEventListener', { node, event, handler, modifiers });\n    const dispose = listen(node, event, handler, options);\n    return () => {\n        dispatch_dev('SvelteDOMRemoveEventListener', { node, event, handler, modifiers });\n        dispose();\n    };\n}\nfunction attr_dev(node, attribute, value) {\n    attr(node, attribute, value);\n    if (value == null)\n        dispatch_dev('SvelteDOMRemoveAttribute', { node, attribute });\n    else\n        dispatch_dev('SvelteDOMSetAttribute', { node, attribute, value });\n}\nfunction prop_dev(node, property, value) {\n    node[property] = value;\n    dispatch_dev('SvelteDOMSetProperty', { node, property, value });\n}\nfunction dataset_dev(node, property, value) {\n    node.dataset[property] = value;\n    dispatch_dev('SvelteDOMSetDataset', { node, property, value });\n}\nfunction set_data_dev(text, data) {\n    data = '' + data;\n    if (text.wholeText === data)\n        return;\n    dispatch_dev('SvelteDOMSetData', { node: text, data });\n    text.data = data;\n}\nfunction validate_each_argument(arg) {\n    if (typeof arg !== 'string' && !(arg && typeof arg === 'object' && 'length' in arg)) {\n        let msg = '{#each} only iterates over array-like objects.';\n        if (typeof Symbol === 'function' && arg && Symbol.iterator in arg) {\n            msg += ' You can use a spread to convert this iterable into an array.';\n        }\n        throw new Error(msg);\n    }\n}\nfunction validate_slots(name, slot, keys) {\n    for (const slot_key of Object.keys(slot)) {\n        if (!~keys.indexOf(slot_key)) {\n            console.warn(`<${name}> received an unexpected slot \"${slot_key}\".`);\n        }\n    }\n}\n/**\n * Base class for Svelte components with some minor dev-enhancements. Used when dev=true.\n */\nclass SvelteComponentDev extends SvelteComponent {\n    constructor(options) {\n        if (!options || (!options.target && !options.$$inline)) {\n            throw new Error(\"'target' is a required option\");\n        }\n        super();\n    }\n    $destroy() {\n        super.$destroy();\n        this.$destroy = () => {\n            console.warn('Component was already destroyed'); // eslint-disable-line no-console\n        };\n    }\n    $capture_state() { }\n    $inject_state() { }\n}\n/**\n * Base class to create strongly typed Svelte components.\n * This only exists for typing purposes and should be used in `.d.ts` files.\n *\n * ### Example:\n *\n * You have component library on npm called `component-library`, from which\n * you export a component called `MyComponent`. For Svelte+TypeScript users,\n * you want to provide typings. Therefore you create a `index.d.ts`:\n * ```ts\n * import { SvelteComponentTyped } from \"svelte\";\n * export class MyComponent extends SvelteComponentTyped<{foo: string}> {}\n * ```\n * Typing this makes it possible for IDEs like VS Code with the Svelte extension\n * to provide intellisense and to use the component like this in a Svelte file\n * with TypeScript:\n * ```svelte\n * <script lang=\"ts\">\n * \timport { MyComponent } from \"component-library\";\n * </script>\n * <MyComponent foo={'bar'} />\n * ```\n *\n * #### Why not make this part of `SvelteComponent(Dev)`?\n * Because\n * ```ts\n * class ASubclassOfSvelteComponent extends SvelteComponent<{foo: string}> {}\n * const component: typeof SvelteComponent = ASubclassOfSvelteComponent;\n * ```\n * will throw a type error, so we need to seperate the more strictly typed class.\n */\nclass SvelteComponentTyped extends SvelteComponentDev {\n    constructor(options) {\n        super(options);\n    }\n}\nfunction loop_guard(timeout) {\n    const start = Date.now();\n    return () => {\n        if (Date.now() - start > timeout) {\n            throw new Error('Infinite loop detected');\n        }\n    };\n}\n\nexport { HtmlTag, SvelteComponent, SvelteComponentDev, SvelteComponentTyped, SvelteElement, action_destroyer, add_attribute, add_classes, add_flush_callback, add_location, add_render_callback, add_resize_listener, add_transform, afterUpdate, append, append_dev, assign, attr, attr_dev, attribute_to_object, beforeUpdate, bind, binding_callbacks, blank_object, bubble, check_outros, children, claim_component, claim_element, claim_space, claim_text, clear_loops, component_subscribe, compute_rest_props, compute_slots, createEventDispatcher, create_animation, create_bidirectional_transition, create_component, create_in_transition, create_out_transition, create_slot, create_ssr_component, current_component, custom_event, dataset_dev, debug, destroy_block, destroy_component, destroy_each, detach, detach_after_dev, detach_before_dev, detach_between_dev, detach_dev, dirty_components, dispatch_dev, each, element, element_is, empty, escape, escaped, exclude_internal_props, fix_and_destroy_block, fix_and_outro_and_destroy_block, fix_position, flush, getContext, get_binding_group_value, get_current_component, get_custom_elements_slots, get_slot_changes, get_slot_context, get_spread_object, get_spread_update, get_store_value, globals, group_outros, handle_promise, hasContext, has_prop, identity, init, insert, insert_dev, intros, invalid_attribute_name_character, is_client, is_crossorigin, is_empty, is_function, is_promise, listen, listen_dev, loop, loop_guard, missing_component, mount_component, noop, not_equal, now, null_to_empty, object_without_properties, onDestroy, onMount, once, outro_and_destroy_block, prevent_default, prop_dev, query_selector_all, raf, run, run_all, safe_not_equal, schedule_update, select_multiple_value, select_option, select_options, select_value, self, setContext, set_attributes, set_current_component, set_custom_element_data, set_data, set_data_dev, set_input_type, set_input_value, set_now, set_raf, set_store_value, set_style, set_svg_attributes, space, spread, stop_propagation, subscribe, svg_element, text, tick, time_ranges_to_array, to_number, toggle_class, transition_in, transition_out, update_keyed_each, update_slot, update_slot_spread, validate_component, validate_each_argument, validate_each_keys, validate_slots, validate_store, xlink_attr };\n","<script>\n  //https://www.jayfreestone.com/writing/bulletproof-flag\n  // style props: \"\", \"large-icon\", \"large-title\"; \"large-icon; large-title\"\n  export let style = 'large-icon';\n  const styles = style.split().map(v => v.trim());\n  export let title;\n</script>\n\n<div class=\"flag\">{#if false}<slot />{/if}\n    <div\n        class=\"flag__signifier\"\n        class:flag--large-icon={styles.includes('large-icon')}\n        class:flag--no-title={!title}\n        class:flag--large-title={title && styles.includes('large-title')}>\n        <slot name=\"icon\"></slot>\n    </div>\n    <div class=\"flag__title\">\n        <h2>{title}</h2>\n    </div>\n    <div class=\"flag__content\">\n        <slot name=\"content\"></slot>\n    </div>\n</div>\n\n<style>\n\n:global(.flag + .flag) {\n    margin-top: 3rem;\n}\n:global(.flag) {\n    display: grid;\n    grid-column-gap: var(--flag-gap, 1em);\n    grid-template-columns: auto 1fr;\n    grid-template-rows: repeat(3, minmax(min-content, max-content)) 1fr;\n    grid-template-areas: \"signifier .\" \"signifier title\" \"signifier content\" \". content\";\n}\n:global(.flag__title) {\n    grid-area: title;\n    align-self: center;\n    display: flex;\n    align-items: center;\n}\n:global(.flag__title:empty) {\n  grid-column: 1;\n  grid-row: 2;\n}\n:global(.flag__title:empty:after) {\n    content: \"x\";\n    visibility: hidden;\n}\n:global(.flag__title:empty ~ .flag__content) {\n    grid-row-start: 2;\n}\n:global(.flag__signifier) {\n    grid-area: signifier;\n    display: flex;\n    align-self: center;\n}\n:global(.flag__content) {\n    grid-area: content;\n}\n:global(.flag--large-icon svg) {\n    width: 4rem;\n    height: 4rem;\n}\n:global(.flag--no-title) {\n  font-size: 1.1rem;\n}\n:global(.flag--no-title p) {\n  margin: 0;\n}\n:global(.flag--large-title) h2 {\n  font-size: 2.8rem;\n}\n</style>","<script>\n    let props = Object.fromEntries(Object.entries($$props).filter(([k,]) => !k.startsWith('$$')));\n    const isExternal = props.href && !props.href.startsWith('#');\n    if (isExternal) {\n        props = Object.assign({rel: \"noreferrer\", target: \"_blank\"}, props);\n    }\n</script>\n<!-- svelte-ignore a11y-missing-attribute -->\n<a {...props}><slot></slot></a>","export class Deferred {\n    constructor() {\n        this.promise = new Promise((resolve, reject)=> {\n            this.reject = reject\n            this.resolve = resolve\n        })\n    }\n}\nexport const htmlLogo = '<span class=\"logo\">Fly<span>Tax</span></span>';\nexport const navigatorLocale = (typeof navigator !== \"undefined\" && navigator.languages) ? Intl.DateTimeFormat.supportedLocalesOf(Intl.NumberFormat.supportedLocalesOf(navigator.languages)).shift() : undefined;\nexport const months = ['01', '02', '03', '04', '05', '06', '07', '08', '09', '10', '11', '12'];\nexport const months14 = ['00', ...months, '13'];\nexport const monthsfr = ['Janvier', 'Février', 'Mars', 'Avril', 'Mai', 'Juin', 'Juillet', 'Août', 'Septembre', 'Octobre', 'Novembre', 'Décembre'];\nexport const localeFormat = (numberOrString, options={}) => {\n    if (navigatorLocale !== undefined) {\n        return new Intl.NumberFormat(navigatorLocale, options).format(numberOrString);\n    } else {\n        const numberValue = (numberOrString.toFixed) ? numberOrString : parseFloat(numberOrString);\n        if (options.style==='currency') {\n            return numberValue.toFixed(options.maximumFractionDigits||2) + \" \" + options.currency;\n        }else{\n            return (options.maximumFractionDigits===undefined || options.maximumFractionDigits !==  options.minimumFractionDigits) ? numberValue.toString(): numberValue.toFixed(options.maximumFractionDigits);\n        }\n    }\n}\nexport const localeCurrency = (value) => localeFormat(value, {\"style\": \"currency\", \"currency\": \"EUR\", \"minimumFractionDigits\": 2});\nexport const localeRate = (value) => localeFormat(value, {\"style\": \"decimal\", \"minimumFractionDigits\": 4, \"maximumFractionDigits\": 4});\nexport const localeDateFormat = (isoString, options={}) => {\n    if (navigatorLocale !== undefined) {\n        const fakeUTCDate = new Date(Date.parse(isoString.substring(0, 10) + \"T00:00Z\"));\n        const opts = Object.assign({\"timezone\": \"UTC\"}, options);\n        return new Intl.DateTimeFormat(navigatorLocale, opts).format(fakeUTCDate);\n    } else {\n        return isoString.substring(0, 10);\n    }\n}\n","export { identity as linear } from '../internal/index.mjs';\n\n/*\nAdapted from https://github.com/mattdesl\nDistributed under MIT License https://github.com/mattdesl/eases/blob/master/LICENSE.md\n*/\nfunction backInOut(t) {\n    const s = 1.70158 * 1.525;\n    if ((t *= 2) < 1)\n        return 0.5 * (t * t * ((s + 1) * t - s));\n    return 0.5 * ((t -= 2) * t * ((s + 1) * t + s) + 2);\n}\nfunction backIn(t) {\n    const s = 1.70158;\n    return t * t * ((s + 1) * t - s);\n}\nfunction backOut(t) {\n    const s = 1.70158;\n    return --t * t * ((s + 1) * t + s) + 1;\n}\nfunction bounceOut(t) {\n    const a = 4.0 / 11.0;\n    const b = 8.0 / 11.0;\n    const c = 9.0 / 10.0;\n    const ca = 4356.0 / 361.0;\n    const cb = 35442.0 / 1805.0;\n    const cc = 16061.0 / 1805.0;\n    const t2 = t * t;\n    return t < a\n        ? 7.5625 * t2\n        : t < b\n            ? 9.075 * t2 - 9.9 * t + 3.4\n            : t < c\n                ? ca * t2 - cb * t + cc\n                : 10.8 * t * t - 20.52 * t + 10.72;\n}\nfunction bounceInOut(t) {\n    return t < 0.5\n        ? 0.5 * (1.0 - bounceOut(1.0 - t * 2.0))\n        : 0.5 * bounceOut(t * 2.0 - 1.0) + 0.5;\n}\nfunction bounceIn(t) {\n    return 1.0 - bounceOut(1.0 - t);\n}\nfunction circInOut(t) {\n    if ((t *= 2) < 1)\n        return -0.5 * (Math.sqrt(1 - t * t) - 1);\n    return 0.5 * (Math.sqrt(1 - (t -= 2) * t) + 1);\n}\nfunction circIn(t) {\n    return 1.0 - Math.sqrt(1.0 - t * t);\n}\nfunction circOut(t) {\n    return Math.sqrt(1 - --t * t);\n}\nfunction cubicInOut(t) {\n    return t < 0.5 ? 4.0 * t * t * t : 0.5 * Math.pow(2.0 * t - 2.0, 3.0) + 1.0;\n}\nfunction cubicIn(t) {\n    return t * t * t;\n}\nfunction cubicOut(t) {\n    const f = t - 1.0;\n    return f * f * f + 1.0;\n}\nfunction elasticInOut(t) {\n    return t < 0.5\n        ? 0.5 *\n            Math.sin(((+13.0 * Math.PI) / 2) * 2.0 * t) *\n            Math.pow(2.0, 10.0 * (2.0 * t - 1.0))\n        : 0.5 *\n            Math.sin(((-13.0 * Math.PI) / 2) * (2.0 * t - 1.0 + 1.0)) *\n            Math.pow(2.0, -10.0 * (2.0 * t - 1.0)) +\n            1.0;\n}\nfunction elasticIn(t) {\n    return Math.sin((13.0 * t * Math.PI) / 2) * Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction elasticOut(t) {\n    return (Math.sin((-13.0 * (t + 1.0) * Math.PI) / 2) * Math.pow(2.0, -10.0 * t) + 1.0);\n}\nfunction expoInOut(t) {\n    return t === 0.0 || t === 1.0\n        ? t\n        : t < 0.5\n            ? +0.5 * Math.pow(2.0, 20.0 * t - 10.0)\n            : -0.5 * Math.pow(2.0, 10.0 - t * 20.0) + 1.0;\n}\nfunction expoIn(t) {\n    return t === 0.0 ? t : Math.pow(2.0, 10.0 * (t - 1.0));\n}\nfunction expoOut(t) {\n    return t === 1.0 ? t : 1.0 - Math.pow(2.0, -10.0 * t);\n}\nfunction quadInOut(t) {\n    t /= 0.5;\n    if (t < 1)\n        return 0.5 * t * t;\n    t--;\n    return -0.5 * (t * (t - 2) - 1);\n}\nfunction quadIn(t) {\n    return t * t;\n}\nfunction quadOut(t) {\n    return -t * (t - 2.0);\n}\nfunction quartInOut(t) {\n    return t < 0.5\n        ? +8.0 * Math.pow(t, 4.0)\n        : -8.0 * Math.pow(t - 1.0, 4.0) + 1.0;\n}\nfunction quartIn(t) {\n    return Math.pow(t, 4.0);\n}\nfunction quartOut(t) {\n    return Math.pow(t - 1.0, 3.0) * (1.0 - t) + 1.0;\n}\nfunction quintInOut(t) {\n    if ((t *= 2) < 1)\n        return 0.5 * t * t * t * t * t;\n    return 0.5 * ((t -= 2) * t * t * t * t + 2);\n}\nfunction quintIn(t) {\n    return t * t * t * t * t;\n}\nfunction quintOut(t) {\n    return --t * t * t * t * t + 1;\n}\nfunction sineInOut(t) {\n    return -0.5 * (Math.cos(Math.PI * t) - 1);\n}\nfunction sineIn(t) {\n    const v = Math.cos(t * Math.PI * 0.5);\n    if (Math.abs(v) < 1e-14)\n        return 1;\n    else\n        return 1 - v;\n}\nfunction sineOut(t) {\n    return Math.sin((t * Math.PI) / 2);\n}\n\nexport { backIn, backInOut, backOut, bounceIn, bounceInOut, bounceOut, circIn, circInOut, circOut, cubicIn, cubicInOut, cubicOut, elasticIn, elasticInOut, elasticOut, expoIn, expoInOut, expoOut, quadIn, quadInOut, quadOut, quartIn, quartInOut, quartOut, quintIn, quintInOut, quintOut, sineIn, sineInOut, sineOut };\n","import { cubicInOut, linear, cubicOut } from '../easing/index.mjs';\nimport { is_function, assign } from '../internal/index.mjs';\n\n/*! *****************************************************************************\r\nCopyright (c) Microsoft Corporation. All rights reserved.\r\nLicensed under the Apache License, Version 2.0 (the \"License\"); you may not use\r\nthis file except in compliance with the License. You may obtain a copy of the\r\nLicense at http://www.apache.org/licenses/LICENSE-2.0\r\n\r\nTHIS CODE IS PROVIDED ON AN *AS IS* BASIS, WITHOUT WARRANTIES OR CONDITIONS OF ANY\r\nKIND, EITHER EXPRESS OR IMPLIED, INCLUDING WITHOUT LIMITATION ANY IMPLIED\r\nWARRANTIES OR CONDITIONS OF TITLE, FITNESS FOR A PARTICULAR PURPOSE,\r\nMERCHANTABLITY OR NON-INFRINGEMENT.\r\n\r\nSee the Apache Version 2.0 License for specific language governing permissions\r\nand limitations under the License.\r\n***************************************************************************** */\r\n\r\nfunction __rest(s, e) {\r\n    var t = {};\r\n    for (var p in s) if (Object.prototype.hasOwnProperty.call(s, p) && e.indexOf(p) < 0)\r\n        t[p] = s[p];\r\n    if (s != null && typeof Object.getOwnPropertySymbols === \"function\")\r\n        for (var i = 0, p = Object.getOwnPropertySymbols(s); i < p.length; i++) {\r\n            if (e.indexOf(p[i]) < 0 && Object.prototype.propertyIsEnumerable.call(s, p[i]))\r\n                t[p[i]] = s[p[i]];\r\n        }\r\n    return t;\r\n}\n\nfunction blur(node, { delay = 0, duration = 400, easing = cubicInOut, amount = 5, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const f = style.filter === 'none' ? '' : style.filter;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `opacity: ${target_opacity - (od * u)}; filter: ${f} blur(${u * amount}px);`\n    };\n}\nfunction fade(node, { delay = 0, duration = 400, easing = linear }) {\n    const o = +getComputedStyle(node).opacity;\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => `opacity: ${t * o}`\n    };\n}\nfunction fly(node, { delay = 0, duration = 400, easing = cubicOut, x = 0, y = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `\n\t\t\ttransform: ${transform} translate(${(1 - t) * x}px, ${(1 - t) * y}px);\n\t\t\topacity: ${target_opacity - (od * u)}`\n    };\n}\nfunction slide(node, { delay = 0, duration = 400, easing = cubicOut }) {\n    const style = getComputedStyle(node);\n    const opacity = +style.opacity;\n    const height = parseFloat(style.height);\n    const padding_top = parseFloat(style.paddingTop);\n    const padding_bottom = parseFloat(style.paddingBottom);\n    const margin_top = parseFloat(style.marginTop);\n    const margin_bottom = parseFloat(style.marginBottom);\n    const border_top_width = parseFloat(style.borderTopWidth);\n    const border_bottom_width = parseFloat(style.borderBottomWidth);\n    return {\n        delay,\n        duration,\n        easing,\n        css: t => 'overflow: hidden;' +\n            `opacity: ${Math.min(t * 20, 1) * opacity};` +\n            `height: ${t * height}px;` +\n            `padding-top: ${t * padding_top}px;` +\n            `padding-bottom: ${t * padding_bottom}px;` +\n            `margin-top: ${t * margin_top}px;` +\n            `margin-bottom: ${t * margin_bottom}px;` +\n            `border-top-width: ${t * border_top_width}px;` +\n            `border-bottom-width: ${t * border_bottom_width}px;`\n    };\n}\nfunction scale(node, { delay = 0, duration = 400, easing = cubicOut, start = 0, opacity = 0 }) {\n    const style = getComputedStyle(node);\n    const target_opacity = +style.opacity;\n    const transform = style.transform === 'none' ? '' : style.transform;\n    const sd = 1 - start;\n    const od = target_opacity * (1 - opacity);\n    return {\n        delay,\n        duration,\n        easing,\n        css: (_t, u) => `\n\t\t\ttransform: ${transform} scale(${1 - (sd * u)});\n\t\t\topacity: ${target_opacity - (od * u)}\n\t\t`\n    };\n}\nfunction draw(node, { delay = 0, speed, duration, easing = cubicInOut }) {\n    const len = node.getTotalLength();\n    if (duration === undefined) {\n        if (speed === undefined) {\n            duration = 800;\n        }\n        else {\n            duration = len / speed;\n        }\n    }\n    else if (typeof duration === 'function') {\n        duration = duration(len);\n    }\n    return {\n        delay,\n        duration,\n        easing,\n        css: (t, u) => `stroke-dasharray: ${t * len} ${u * len}`\n    };\n}\nfunction crossfade(_a) {\n    var { fallback } = _a, defaults = __rest(_a, [\"fallback\"]);\n    const to_receive = new Map();\n    const to_send = new Map();\n    function crossfade(from, node, params) {\n        const { delay = 0, duration = d => Math.sqrt(d) * 30, easing = cubicOut } = assign(assign({}, defaults), params);\n        const to = node.getBoundingClientRect();\n        const dx = from.left - to.left;\n        const dy = from.top - to.top;\n        const dw = from.width / to.width;\n        const dh = from.height / to.height;\n        const d = Math.sqrt(dx * dx + dy * dy);\n        const style = getComputedStyle(node);\n        const transform = style.transform === 'none' ? '' : style.transform;\n        const opacity = +style.opacity;\n        return {\n            delay,\n            duration: is_function(duration) ? duration(d) : duration,\n            easing,\n            css: (t, u) => `\n\t\t\t\topacity: ${t * opacity};\n\t\t\t\ttransform-origin: top left;\n\t\t\t\ttransform: ${transform} translate(${u * dx}px,${u * dy}px) scale(${t + (1 - t) * dw}, ${t + (1 - t) * dh});\n\t\t\t`\n        };\n    }\n    function transition(items, counterparts, intro) {\n        return (node, params) => {\n            items.set(params.key, {\n                rect: node.getBoundingClientRect()\n            });\n            return () => {\n                if (counterparts.has(params.key)) {\n                    const { rect } = counterparts.get(params.key);\n                    counterparts.delete(params.key);\n                    return crossfade(rect, node, params);\n                }\n                // if the node is disappearing altogether\n                // (i.e. wasn't claimed by the other list)\n                // then we need to supply an outro\n                items.delete(params.key);\n                return fallback && fallback(node, params, intro);\n            };\n        };\n    }\n    return [\n        transition(to_send, to_receive, false),\n        transition(to_receive, to_send, true)\n    ];\n}\n\nexport { blur, crossfade, draw, fade, fly, scale, slide };\n","import { noop, safe_not_equal, subscribe, run_all, is_function } from '../internal/index.mjs';\nexport { get_store_value as get } from '../internal/index.mjs';\n\nconst subscriber_queue = [];\n/**\n * Creates a `Readable` store that allows reading by subscription.\n * @param value initial value\n * @param {StartStopNotifier}start start and stop notifications for subscriptions\n */\nfunction readable(value, start) {\n    return {\n        subscribe: writable(value, start).subscribe\n    };\n}\n/**\n * Create a `Writable` store that allows both updating and reading by subscription.\n * @param {*=}value initial value\n * @param {StartStopNotifier=}start start and stop notifications for subscriptions\n */\nfunction writable(value, start = noop) {\n    let stop;\n    const subscribers = [];\n    function set(new_value) {\n        if (safe_not_equal(value, new_value)) {\n            value = new_value;\n            if (stop) { // store is ready\n                const run_queue = !subscriber_queue.length;\n                for (let i = 0; i < subscribers.length; i += 1) {\n                    const s = subscribers[i];\n                    s[1]();\n                    subscriber_queue.push(s, value);\n                }\n                if (run_queue) {\n                    for (let i = 0; i < subscriber_queue.length; i += 2) {\n                        subscriber_queue[i][0](subscriber_queue[i + 1]);\n                    }\n                    subscriber_queue.length = 0;\n                }\n            }\n        }\n    }\n    function update(fn) {\n        set(fn(value));\n    }\n    function subscribe(run, invalidate = noop) {\n        const subscriber = [run, invalidate];\n        subscribers.push(subscriber);\n        if (subscribers.length === 1) {\n            stop = start(set) || noop;\n        }\n        run(value);\n        return () => {\n            const index = subscribers.indexOf(subscriber);\n            if (index !== -1) {\n                subscribers.splice(index, 1);\n            }\n            if (subscribers.length === 0) {\n                stop();\n                stop = null;\n            }\n        };\n    }\n    return { set, update, subscribe };\n}\nfunction derived(stores, fn, initial_value) {\n    const single = !Array.isArray(stores);\n    const stores_array = single\n        ? [stores]\n        : stores;\n    const auto = fn.length < 2;\n    return readable(initial_value, (set) => {\n        let inited = false;\n        const values = [];\n        let pending = 0;\n        let cleanup = noop;\n        const sync = () => {\n            if (pending) {\n                return;\n            }\n            cleanup();\n            const result = fn(single ? values[0] : values, set);\n            if (auto) {\n                set(result);\n            }\n            else {\n                cleanup = is_function(result) ? result : noop;\n            }\n        };\n        const unsubscribers = stores_array.map((store, i) => subscribe(store, (value) => {\n            values[i] = value;\n            pending &= ~(1 << i);\n            if (inited) {\n                sync();\n            }\n        }, () => {\n            pending |= (1 << i);\n        }));\n        inited = true;\n        sync();\n        return function stop() {\n            run_all(unsubscribers);\n            cleanup();\n        };\n    });\n}\n\nexport { derived, readable, writable };\n","import airportsData from \"../../data/airports.json\";\nimport {localeFormat, months14} from \"../components/utils\";\n\nexport const WITHIN_BASE_TEXT = \"rotation sur base\";\nexport const NIGHT_OVERFLOW_TEXT = \"Erreur: nuitées > nb de jours\";\nexport const CONTINUATION_MARK = \"...\";\nexport const REFNOTE1 = \" ¹\";\nexport const FORMULA_ERROR = \"!ERREUR!\"\n//months as written in EP5\nconst EP5MONTHS = ['JANVIER', 'FEVRIER', 'MARS', 'AVRIL', 'MAI', 'JUIN', 'JUILLET', 'AOUT', 'SEPTEMBRE', 'OCTOBRE', 'NOVEMBRE', 'DECEMBRE'];\n\n//converts EP5 time hh,dd to hh:mmZ\n//returns a string\nexport const ep5Time2iso = (text) => {\n    const [hours, cs] = text.split(\",\");\n    const minutes = (parseFloat(cs) * 0.6).toFixed(0).padStart(2, '0');\n    return `${hours}:${minutes}Z`;\n}\n\n//https://stackoverflow.com/questions/222309/calculate-last-day-of-month-in-javascript\n//months must be 1 based (1->12)\nconst getDaysInMonth = (m, y) => {\n    return m===2 ? y & 3 || !(y%25) && y & 15 ? 28 : 29 : 30 + (m+(m>>3)&1);\n}\n\nexport const lastDayInMonthISO = (mString, yString) => {\n    const day = getDaysInMonth(parseInt(mString, 10), parseInt(yString, 10));\n    // 28<=day<=31, so no paddding needed\n    return `${yString}-${mString}-${day}`;\n}\n\n//return intervals between to ISO dates, in hours and in days\nexport const numberOfDays = (startISO, endISO) => {\n    const diff = Date.parse(endISO.replace(\"24:00\", \"23:59\")) - Date.parse(startISO.replace(/\\d\\d:\\d\\d/, \"00:00\"));\n    return Math.floor(diff/ 86400000);\n};\nexport const diffHours = (startISO, endISO) => {\n    return (Date.parse(endISO) - Date.parse(startISO)) / 3600000;\n};\n\n// Converts timezone\n// 2020-11-01T00:00Z -> 2020-11-01+01:00 for \"Europe/Paris\"\n// 2020-11-01T00:00+01:00 -> 2020-11-01+01:00 for \"Europe/Paris\"\nexport const iso2TZ = (timeZone, isoString, deltaDays=0) => {\n    if (isoString === undefined) return timeZone; // This is used in buildRots to check browser compatibility\n    let event = new Date(Date.parse(isoString));\n    if (deltaDays) event.setUTCDate(event.getUTCDate() + deltaDays);\n    // British English uses day/month/year order and 24-hour time without AM/PM\n    const loc = event.toLocaleString(\"en-GB\", {timeZone});\n    const re = /(\\d\\d)\\/(\\d\\d)\\/(\\d\\d\\d\\d), (\\d\\d):(\\d\\d):\\d\\d/\n    let match;\n    if (null !== (match = re.exec(loc))) {\n        const [, day, month, year, hour, minute] = match;\n        let baseIsoString = `${year}-${month}-${day}T${hour}:${minute}`;\n        const baseEvent = new Date(Date.parse(baseIsoString + \"Z\"));\n        const delta = (baseEvent - event)/3600000;\n        let tzOffset = Math.trunc(delta);\n        let minutes = Math.round((Math.abs(delta) - Math.abs(tzOffset))*60/100);\n        if (tzOffset === 0) {\n            return baseIsoString + \"Z\";\n        }\n        baseIsoString += (tzOffset >= 0) ? '+' : '-';\n        baseIsoString += Math.abs(tzOffset).toString().padStart(2, \"0\") + \":\" + minutes.toString().padStart(2, \"0\");\n        return baseIsoString;\n    } else {\n        throw new Error(`Can not convert ${isoString} to timeZone ${timeZone}`);\n    }\n}\nexport const iso2FR = iso2TZ.bind(null, \"Europe/Paris\");\n\nconst rotSummary = (rot) => {\n    // construct a summary (nights not repeated)\n    // [YVR, YVR, PPT, PPT, YVR, YVR] => [YVR, PPT, YVR]\n    const stopovers = rot.nights.reduce((accumulator, current) => {\n        if (current !== accumulator[accumulator.length - 1]) {\n            accumulator.push(current); // add a new entry\n        }\n        return accumulator;\n    }, []);\n    return [rot.dep, ...stopovers, rot.arr].join('-')\n            .replace('-'+ CONTINUATION_MARK, CONTINUATION_MARK)\n            .replace(CONTINUATION_MARK +'-', CONTINUATION_MARK);\n}\n\nexport const buildRots = (flights, {tzConverter, base, iataMap}) => {\n    // Using parsed flights build up rots & places of stay\n    \n    //verify browser compatibility\n    const converterTZ = tzConverter();\n    try {\n        new Date().toLocaleString(\"en-GB\", {\"timeZone\": converterTZ, \"timeZoneName\": \"short\"});\n    } catch (e) {\n        throw new Error(`Date.toLocaleString(\"en-GB\", {\"timeZone\": \"${converterTZ}\"}) not supported`);\n    }\n    const isBase = (iata) => (base.indexOf(iata)!== -1);\n    let rots = [];\n    let rot = null;\n    let rotFlights;\n    let rotStays;\n    \n    for (const [i, flightGMT] of flights.entries()) {\n        const year = flightGMT.start.substring(0,4);\n        const month = flightGMT.start.substring(5, 7);\n        const flight = Object.assign({}, flightGMT);\n        if (tzConverter) {\n            Object.assign(flight, {\"start\": tzConverter(flightGMT.start), \"end\": tzConverter(flightGMT.end)});\n        }\n        if (rot === null) { //reset to a new rot\n            rotFlights = [];\n            rotStays = [];\n            rot = {\"isComplete\": \"<>\", \"nights\": [], \"start\": flight.start};\n        }\n        if (i === 0 && ((isBase(flight.dep) && flight.stop === \"0,00\") || !isBase(flight.dep))) {\n            rot.isComplete = '>';\n            rot.start = `${year}-${month}-01T00:00Z`;\n            if (tzConverter) rot.start = tzConverter(rot.start);\n            const days = numberOfDays(rot.start, flight.start) + 1;\n            if (!isBase(flight.dep)) { //stopovers from first day of month\n                for (let j=0; j<days-1; j++) {\n                    rot.nights.push(flight.dep);\n                    rotStays.push(flight.dep)\n                }\n            }\n            // extra stopover for the flight\n            if (isBase(flight.dep)) {\n                // do not push flight.arr (already counted on previous month)\n            }else if (isBase(flight.arr)) {\n                rot.nights.push(flight.dep);\n            }else if (numberOfDays(flight.start, flight.end)>0){\n                rot.nights.push(flight.dep);\n            }\n            //other cases will be covered below\n        }\n        const nextFlight = (flights[i + 1]) ? Object.assign({}, flights[i + 1]) : undefined;\n        if(tzConverter && nextFlight) {\n            Object.assign(nextFlight, {\"start\": tzConverter(flights[i + 1].start), \"end\": tzConverter(flights[i + 1].end)});\n        }\n        if (nextFlight !== undefined) {\n            const standbyHours = diffHours(flight.end, nextFlight.start);\n            // on compte une nuit par jour civil en escale\n            let standbyDays = 0;\n            //First line was needed by 10 ON YVR PPT YVR in rots.test\n            //To check if isBase test was needed, added 7ON SVO in straddling.test and it is.\n            standbyDays += (numberOfDays(rot.start, flight.start) === 0 && isBase(flight.dep)) ? numberOfDays(flight.start, flight.end) : 0; // for flights straddling day on first day\n            standbyDays += numberOfDays(flight.end, nextFlight.start);\n            standbyDays += numberOfDays(nextFlight.start, nextFlight.end); // for flights like LAX-PPT\n            standbyDays = Math.max(standbyDays, 1); // for single day rot\n            if (standbyHours >= 7 && !isBase(flight.arr)) {\n                //console.log(numberOfDays(flight.end, nextFlight.start), standbyHours, localDays, flight.arr);\n                //escale hors base de plus de 7h\n                for (let j=0; j<standbyDays; j++) {\n                    rot.nights.push(flight.arr);\n                }\n                for (let j=0; j <numberOfDays(flight.end, nextFlight.start); j++){\n                    rotStays.push(flight.arr);\n                }\n                rotFlights.push(flight);\n                continue; //do not push new rot yet\n            } else if (isBase(flight.arr) && isBase(nextFlight.dep) && standbyHours >= 12) {\n                // Arrivée base, départ Base avec standby > 12h\n                // will push new rot\n            } else {\n                rotFlights.push(flight);\n                continue; //do not push new rot yet\n            }\n        } else {\n            // last flight of the month\n            if (isBase(flight.arr)) {\n                if (flight.end.substring(11) === \"24:00Z\") {\n                    // uncomplete rot ending at Base\n                    rot.isComplete = '<';\n                    rot.end = flight.end;\n                } else if (flight.end.substring(5,7) !== month) {\n                    // flight is accross civil month\n                    if (flightGMT.end.substring(11) === \"24:00Z\") {\n                        // uncomplete rot not ending at Base\n                        rot.isComplete = '<';\n                        // if flight continues after 24z, next day will be counted next month\n                        // so we need to adjust nights\n                        // otherwise next month will not show it and we must count it\n                        rot.days = numberOfDays(rot.start, flight.end);\n                        // also adjust night count if start is also next month\n                        if (flight.start.substring(5,7) !== month) {\n                            rot.nights.pop();\n                            rotStays.pop(); // TODO check this\n                        }\n                    }\n                }\n                // last flight, will push new rot\n            } else {\n                // uncomplete rot not ending at Base\n                rot.isComplete = '<';\n                const lastDay = lastDayInMonthISO(month, year) + \"T24:00Z\";\n                if (tzConverter) {\n                    rot.end = tzConverter(lastDay);\n                } else {\n                    rot.end = lastDay;\n                }\n                const days = numberOfDays(flight.end, rot.end) + 1;\n                for (let j=0; j<days; j++) {\n                    rot.nights.push(flight.arr);\n                    rotStays.push(flight.arr);\n                }\n                if (rot.end.substring(5,7) !== month) {\n                    // also adjust night count if flight.end is on current month\n                    if (flight.end.substring(5,7) === month){\n                        rot.nights.pop();\n                        rotStays.pop();\n                    }\n                    rot.days = numberOfDays(rot.start, rot.end);\n                }\n                // last flight, will push new rot\n            }\n        }\n        rotFlights.push(flight);\n        // rot.flights = rotFlights; // not needed for now\n        \n        // some defaults if not already set\n        // a ||= b; only is ES2021 and node 15 <=> a || (a = b);\n        rot.end || (rot.end = flight.end);\n        rot.days|| (rot.days = numberOfDays(rot.start, rot.end) + 1); // 0 days <=> 1ON\n\n        // construct a summary (nights not repeated)\n        let dep = base[0];\n        let arr = base[0];\n        if (!rot.isComplete.startsWith('<')) {\n            dep = CONTINUATION_MARK;\n        } else if (rotFlights.length > 0) {\n            dep = rotFlights[0].dep;\n        }\n        if (!rot.isComplete.endsWith('>')) {\n            arr = CONTINUATION_MARK;\n        } else if (rotFlights.length > 0) {\n            arr = rotFlights[rotFlights.length - 1].arr;\n        }\n        rot.dep = dep;\n        rot.arr = arr;\n        rot.summary = rotSummary(rot);\n\n        // adjust number of nights to match number of days\n        const nightsCount = rot.nights.length;\n        const missing = rot.days - nightsCount;\n        const fillingNight = (rot.nights.length > 0) ? rot.nights[nightsCount - 1] : (dep !== CONTINUATION_MARK) ? dep : (arr !== CONTINUATION_MARK) ? arr : base[0];\n        for (let j=0; j<missing; j++) {\n            rot.nights.push(fillingNight);\n        }\n        const nightInFlight = (numberOfDays(flight.start, flight.end) === 1 || flightGMT.start.endsWith('T00:00Z'));\n        const mayNeedOptimization = (missing === 1 && nightInFlight);\n        if (mayNeedOptimization && rot.isComplete === '<>') {\n            // We have to check if we can have a better night repartition\n            [rot.nights,] = optimizeNightsRepartition(rot, rotStays);\n        } else if (nightInFlight && rot.isComplete === '>') {\n            //adds data to optimize at merge time\n            rot.stays = rotStays;\n        } else if(rot.isComplete === '<'){\n            //always adds data, mergeRots will use it if needed.\n            rot.stays = rotStays;\n        }\n        \n        //outOfBase is > 0 if rot have at least one stopover out of base\n        //If not outOfBase, indemnities are zero so we reset nights\n        const outOfBase = rotFlights.reduce((a, c) => a + ((!isBase(c.dep) || !isBase(c.arr)) ? 1 : 0), 0);\n        if (outOfBase === 0) rot.nights = [];\n\n        // add countries\n        if (iataMap) rot.countries = rot.nights.map((iata) => iataMap(iata));\n        //push rot and continue\n        rots.push(rot);\n        rot = null;\n    }\n    return rots\n};\n\nexport const optimizeNightsRepartition = (rot, stays) => {\n    const nights = rot.nights;\n    const countries = rot.countries; // optional\n    if (Array.isArray(stays)) {\n        const stayTuples = stays.reduce((accumulator, current) => {\n            const index = accumulator.length - 1;\n            if (index > -1 && current === accumulator[index][0]) {\n                accumulator[index][1] += 1;\n            }else{\n                accumulator.push([current, 1]); // add a new entry\n            }\n            return accumulator;\n        }, []);\n        const nightTuples = nights.reduce((accumulator, current) => {\n            const index = accumulator.length - 1;\n            if (index > -1 && current === accumulator[index][0]) {\n                accumulator[index][1] += 1;\n            }else{\n                accumulator.push([current, 1]); // add a new entry\n            }\n            return accumulator;\n        }, []);\n        // We look for rots with 2 stays and with indentical stay length\n        // and with a diff of two nights\n        if (stayTuples.length === 2 && stayTuples[0][1] === stayTuples[1][1] && nightTuples.length === 2 && (nightTuples[1][1] - nightTuples[0][1] === 2)){\n            const optimized = [].concat(nights[0], ...nights.slice(0,-1));\n            let optimizedCountries = countries; \n            if (countries!== undefined) {\n                optimizedCountries = [].concat(countries[0], ...countries.slice(0,-1));\n            }\n            console.log(`Optimisation des nuits sur ${rot.summary} du ${rot.start.substring(0,10).split('-').reverse().join('/')}\\n(conformément à l'exemple 13 du mémento fiscal)\\n${nights} -> ${optimized}`);\n            return [optimized, optimizedCountries];\n        }\n    }\n    return [nights, countries];   \n};\n\nexport const iata2country = (iata) => {\n    const index = airportsData.indexOf(iata + ':');\n    return (index >= 0) ? airportsData.substring(index + 4, index + 6): iata;\n}\n\n// Also we ensure at build time there is no possible errors\n// due to inconsistency between airportsData, countriesData and exrData,\n// we are still handling AmountError in findAmount* functions.\nclass AmountError extends Error {};\n\nexport const findAmountEuros = (countryData, isoDate, exrData) => {\n    const [amount, currency] = findAmount(countryData, isoDate);\n    const exr = exrData[currency];\n    if (exr) {\n        const rate = parseFloat(exr[2]);\n        const euros = parseFloat((parseFloat(amount) / rate).toFixed(2));\n        return euros;\n    } else {\n        throw new AmountError(`Taux de change inconnu pour ${currency}`);\n    }\n};\n\nexport const findAmount = (countryData, isoDate) => {\n    for (const [date, currency, amount] of countryData.a) {\n        if (date.localeCompare(isoDate) <= 0) {\n            return [amount, currency];\n        }\n    }\n    if (countryData) {\n        throw new AmountError(`Pas d'indemnité définie pour ${countryData.n} au ${isoDate}`);\n    } else {\n        throw new AmountError(`Indemnité manquante`);\n    }\n};\n\nexport const addIndemnities = (taxYear, rots, taxData, tzConverter) => {\n    const results = [];\n    const countriesData = taxData.countries;\n    const exrData = taxData.exr;\n    const MC_REMOVAL = 0.5;\n    const nextYear = (parseInt(taxYear, 10) + 1).toString();\n    const previousYear = (parseInt(taxYear, 10) - 1).toString();\n    let hasError = false;\n    for (const rot of rots) {\n        const indemnities = [];\n        // check if we count all nights of if we have to substract 0.5\n        let toRemove = MC_REMOVAL; // by default remove 0.5 night\n\n        // Sum up the indemnities day by day in the rot\n        let total = 0; // default is zero if it fails\n\n        if (rot.nights.length === 0) {\n            rot.formula = WITHIN_BASE_TEXT;\n        } else if  (rot.nights.length > rot.days || rot.countries.length > rot.days) {\n            rot.formula = NIGHT_OVERFLOW_TEXT;\n            hasError = true;\n        } else {\n            // if at least one of the stopover is LC, count all nights\n            for (const country of rot.countries) {\n                const data = countriesData[country];\n                if (data && data.z !== 1) {\n                    toRemove = 0;\n                    break;\n                }\n            }\n            let taxStopCount = rot.countries.length; // taxStopCount is used to detect fiscal year truncate\n            const taxStops = rot.countries.reduce((accumulator, current) => {\n                const index = accumulator.length - 1;\n                if (index > -1 && current === accumulator[index][1]) {\n                    accumulator[index][0] += 1; // increase previous count\n                }else{\n                    accumulator.push([1, current]); // add a new entry\n                }\n                return accumulator;\n            }, []);\n            let validTaxStops = []; // used to recompute the formula after filtering stops to the current taxYear\n            let validTaxStopCount = 0; // validTaxStopCount is compared at the end with taxStopCount\n            // Apply removal to taxStops if needed\n            if (toRemove !== 0 && taxStops.length > 0){\n                taxStops[taxStops.length - 1][0] -= toRemove; //performs removal\n                taxStopCount -= toRemove;\n            }\n\n            // we need to find the date for each day of the rot\n            // to cover the case where daily tax amount change\n            let deltaDays = 0;\n            for (const [count, country] of taxStops) {\n                let validCount = count;\n                let data = countriesData[country];\n                if (data && data.f === 1) data = countriesData[\"EU\"]\n                let amount = 0; // default is zero in case of error\n                const countryIndemnities = []; // contains the extended formula with euro amounts\n                if(data) {\n                    try {\n                        const stopIndemnities = []; // we need to reverse them after the loop\n                        // detects if we need to apply MC_REMOVAL (3 > 2.5)\n                        const doRemove = Math.ceil(count) > count;\n                        //The forloop is constructed so that when i=0 we are on the last days\n                        //This is simpler to filter data for taxYear\n                        for (let i=0; i<Math.ceil(count); i++){\n                            const delta = (deltaDays - i) + Math.ceil(count) - i - 1;\n                            const isoDate = tzConverter(rot.start, delta);\n                            const year = isoDate.substring(0,4);\n                            if (year === taxYear) {\n                                const euros = findAmountEuros(data, isoDate.substring(0, 10), exrData);\n                                amount += (i===0 && doRemove) ? MC_REMOVAL * euros : euros;\n                                stopIndemnities.push([(i===0 && doRemove) ? MC_REMOVAL : 1, findAmount(data, isoDate.substring(0, 10)).join('')]);\n                            }else if (year === nextYear && rot.isComplete === '>') {\n                                //pass\n                            }else if (year === previousYear && rot.isComplete === '<') {\n                                //pass\n                            }else{\n                                validCount -= (i===0 && doRemove) ? MC_REMOVAL : 1;\n                            }\n                            deltaDays += 1;\n                        }\n                        validTaxStopCount += validCount;\n                        if (validCount >= 0) validTaxStops.push([validCount, country]);\n                        if(stopIndemnities.length > 0) countryIndemnities.push(...stopIndemnities.reverse());\n                    } catch (err) {\n                        hasError = true;\n                        if (err instanceof AmountError) {\n                            console.error(err.message);\n                        } else {\n                            console.error(err);\n                        }\n                    }\n                } else {\n                    hasError = true;\n                    if (country.length === 2) {\n                        console.error(`Données pays manquantes pour ${country}`);\n                    } else {\n                        console.error(`Code IATA inconnu ${country}`);\n                    }\n                }\n                if(countryIndemnities.length > 0) {\n                    indemnities.push(countryIndemnities.reduce((accumulator, current) => {\n                        const index = accumulator.length - 1;\n                        if (index > -1 && current[1] === accumulator[index][1]) {\n                            accumulator[index][0] += current[0]; // increase previous count\n                        }else{\n                            accumulator.push(current); // add a new entry\n                        }\n                        return accumulator;\n                    }, []));\n                }\n                total += amount;\n            }\n            validTaxStops = validTaxStops.reduce((a, c) => {\n                if (c[0] > 0) {\n                    return a.concat([[localeFormat(c[0], {\"style\": \"decimal\", \"minFractionDigits\": 0, \"maxFractionDigits\": 1}), c[1]]]);\n                }\n                return a;\n            }, []);\n            rot.formula = validTaxStops.map(a => a.join(\" x \")).join(' + ');\n            rot.formula += (!hasError && taxStopCount !== validTaxStopCount) ? REFNOTE1 : \"\";\n            rot.formula += (hasError || taxStopCount < rot.days -MC_REMOVAL ) ? ` ${FORMULA_ERROR}` : \"\";\n            //rot.currencyFormula = indemnities.map(a => `(${a.map(b =>b.join(' x ')).join(' + ')})`).join(' + ').replace(/\\./g, ',');\n            // indemnities = [[[times, amount1Stop1],[times, amount2Stop1]], [[times, amount1Stop2]])\n            const stops = [];\n            for (const stop of indemnities) {\n                const stopLocalized = stop.reduce((a, c) => {\n                    return a.concat([[localeFormat(c[0], {\"style\": \"decimal\", \"minFractionDigits\": 0, \"maxFractionDigits\": 1}), c[1]]]);\n                }, []);\n                const stopFormula = stopLocalized.map(a => a.join(' x ')).join(' + ');\n                (stop.length > 1) ? stops.push(`(${stopFormula})`) : stops.push(stopFormula);\n            }\n            rot.currencyFormula = stops.join(' + ');\n            if(validTaxStops.length <= 0 && taxStops.length !== 0 && !hasError) continue; // taxStops=0 => indemnity=0 and is valid for base only rots\n        }\n        rot.indemnity = (hasError) ? 0 : parseFloat(total.toFixed(2));\n        rot.error = hasError;\n        results.push(rot);\n    }\n    return results;\n}\n// ep5 iterable\nexport function* ep5Iterator(data){\n    for (const m of months14) {\n        const monthData = data[m];\n        if (monthData) {\n            yield* monthData.rots;\n        }\n    }\n};\n// in tests we use array to pass rots\nexport function* testIterator(data) {\n    for (const a of data) {\n        yield* a;\n    }\n};\n\n//merge Rot without needing to copy the EP5 structure\nexport const mergeRots = (data, taxYear, taxData, tzConverter) => {\n    const currentIt = Array.isArray(data) ? testIterator(data) : ep5Iterator(data);\n    const nextIt = Array.isArray(data) ? testIterator(data) : ep5Iterator(data);\n    nextIt.next();\n    const mergedRots = [];\n    for (const rot of currentIt) {\n        const next = nextIt.next().value;\n        if (next && rot.isComplete === '<' && next.isComplete === '>' && rot.end.substring(0, 7) === next.end.substring(0, 7)) {\n            const merged = {...rot}; // clone\n            merged.isComplete = '<>';\n            merged.nights = rot.nights.concat(next.nights);\n            // countries is optional in buildRots\n            merged.countries = (rot.countries && next.countries) ? rot.countries.concat(next.countries): undefined;\n            merged.end = `${next.end}`;\n            merged.days += next.days;\n            merged.arr = `${next.arr}`;\n            if(next.stays && rot.stays) {\n                [merged.nights, merged.countries] = optimizeNightsRepartition(merged, rot.stays.concat(next.stays));\n            }\n            if ('stays' in merged) delete merged.stays;\n            merged.summary = rotSummary(merged);\n            const [mergedWithIndemnities] = addIndemnities(taxYear,[merged], taxData, tzConverter);\n            mergedRots.push(mergedWithIndemnities);\n            // skip next\n            currentIt.next();\n            nextIt.next();\n        } else {\n            mergedRots.push(rot);\n        }\n    } \n    return mergedRots;\n};\n\nexport const ep5Parser = (text, fileName, fileOrder, taxYear, taxData, base, tzConverter) => {\n    const result = {\"type\": \"ep5\", fileName, fileOrder};\n    const previousTaxYear = (parseInt(taxYear, 10) - 1).toString();\n    const nextTaxYear = (parseInt(taxYear, 10) + 1).toString();\n    let match;\n    let pattern;\n    let month;\n    let year;\n    // search EP5 Date like JANVIER 2020\n    pattern = /\\s(\\S+?)\\s+?(20\\d{2})/;\n    if (null !== (match = pattern.exec(text))) {\n        const monthIndex = EP5MONTHS.indexOf(match[1]);\n        if ( monthIndex !== -1) {\n            month = (monthIndex + 1).toString(10).padStart(2, '0');\n            year = match[2];\n        } else {\n            throw new Error('EP5 parser: Invalid month ' + match[1] + `in ${fileName}`);\n        }\n    }else{\n        throw new Error(`EP5 parser:  Date not found in ${fileName}`);\n    }\n    \n    //search EP5 for flights\n    if (month === \"01\" && year === nextTaxYear) {\n        result.date = `${taxYear}-13`;\n    }else if (month === \"12\" && year === previousTaxYear) {\n        result.date = `${taxYear}-00`;\n    } else {\n        result.date = `${year}-${month}`;\n    }\n\n    //0,00 T-77W  GSQY 0 PEK  01 00,00 CDG  01 04,03\n    //Ce pattern ne prend pas les simus\n    //1 : temps d'arrêt précédent 0,00 si à cheval sur mois precedent\n    //2 : type avion ou espace si mep\n    //3 : immatriculation\n    //4 : type activité (0)\n    //5 : escale départ\n    //6 : jour départ\n    //7 : heure decimale tu départ (00,00 si début de mois)\n    //8 : escale arrivée\n    //9 : jour arrivée\n    //10: heure decimale tu arrivée  (24,00 si fin de mois et à cheval)\n    pattern = /([0-9,]+)\\s(?:.{5})\\s{2}(?:\\S{4})\\s(?:.+?)\\s(\\S{3})\\s+(\\d+)\\s+([0-9,]+)\\s+(\\S{3})\\s+(\\d+)\\s+([0-9,]+)/g;\n    const flights = [];\n    while (null !== (match = pattern.exec(text))) {\n        const [, stop, dep, depDay, depTime, arr, arrDay, arrTime] = match;\n        flights.push({stop, dep, \"start\": `${year}-${month}-${depDay}T${ep5Time2iso(depTime)}`, arr, \"end\": `${year}-${month}-${arrDay}T${ep5Time2iso(arrTime)}`});\n    }\n    // in case of multiple EP5 pages, ensure flights are sorted by start date\n    const sortedFlights = flights.sort((a, b) => a.start.localeCompare(b.start))\n    let rots = buildRots(sortedFlights, {base, tzConverter, \"iataMap\": iata2country});\n    rots = addIndemnities(taxYear, rots, taxData, tzConverter);\n    result.rots = rots;\n    return result;\n};","import { writable, readable, derived} from 'svelte/store';\nimport {iso2FR, mergeRots} from './parsers/ep5Parser';\n\nexport const BASES = [\n    {label: \"Marseille\", selected: false, value: ['MRS'], tzConverter: iso2FR},\n    {label: \"Nice\", selected: false, value: ['NCE'], tzConverter: iso2FR},\n    {label: \"Paris\", selected: true, value: ['CDG', 'ORY'], tzConverter: iso2FR},\n    {label: \"Toulouse\", selected: false, value: ['TLS'], tzConverter: iso2FR}\n].sort((a, b) => (a.label.localeCompare(b.label)));\n\nexport const DATASET = [\n    {label: \"2021\", selected: false, url: \"./data/data2020.json\"},\n    {label: \"2020\", selected: true, url: \"./data/data2020.json\"},\n    {label: \"2019\", selected: false, url: \"./data/data2019.json\"},\n    {label: \"2018\", selected: false, url: \"./data/data2018.json\"}\n].sort((a, b) => (b.label.localeCompare(a.label)));\n\nconst defaultYear = DATASET.filter(option => option.selected).pop().label;\n\nexport const base = writable(BASES.filter(option => option.selected).pop().value);\nexport const tzConverter = writable(BASES.filter(option => option.selected).pop().tzConverter);\n\nfunction resettable(resetValue) {\n    const { subscribe, set, update } = writable(resetValue);\n    return {\n        subscribe,\n        set,\n        update,\n        reset: () => set((typeof resetValue === 'object') ? {...resetValue} : Array.isArray(resetValue) ? [...resetValue] : resetValue)\n    };\n}\n\nconst patchLog = () => {\n    const { subscribe, set, update } = writable(new Array());\n    const push = (store, type, values) => store.push({type, values });\n    let nativeConsoleLog, nativeConsoleError;\n    if (typeof window !== \"undefined\" && console) { // patch only in browser\n        nativeConsoleLog = console.log;\n        nativeConsoleError = console.error;\n    }\n    const newConsoleLog = function () {\n        update((theStore) => {\n            push(theStore, 'log', [...arguments]);\n            return theStore;\n        });\n        if (nativeConsoleLog && console) nativeConsoleLog.apply(console, arguments);\n    };\n    const newConsoleError = function () {\n        update((theStore) => {\n            push(theStore, 'error', [...arguments]);\n            return theStore;\n        });\n        if (nativeConsoleError && console) nativeConsoleError.apply(console, arguments);\n    };\n    if (typeof window !== \"undefined\" && console) {\n        console.log = newConsoleLog;\n        console.error = newConsoleError;\n    }\n    return {\n        subscribe,\n        'log': newConsoleLog,\n        'error': newConsoleError,\n        'reset': () => set(new Array())\n    }\n}\n\nexport const log = patchLog();\nexport const ep5 = resettable({type: \"ep5\"});\nexport const paySlips = resettable({type: \"pay\"});\n\nconst empty = () => {\n    ep5.reset();\n    paySlips.reset();\n    log.reset();\n}\n\nexport const taxYear = writable(defaultYear);\nexport const taxData = derived(taxYear, ($taxYear, set) => {\n    //set(undefined);\n    empty();\n    fetch(DATASET.filter(option => option.label === $taxYear).pop().url)\n    .then(res => res.json())\n    .then(data => set(data));\n}, undefined);\n\nexport const pairings = derived(\n    [ep5, taxYear, taxData, tzConverter],\n    ([$ep5, $taxYear, $taxData, $tzConverter]) => {\n        if ($taxData === undefined) return [];\n        return mergeRots($ep5, $taxYear, $taxData, $tzConverter);\n    }\n);\n\nexport const online = readable({}, set => {\n    const update_network_status = () => {\n        set(navigator.onLine);\n    };\n\n    if (\n        (typeof navigator !== \"undefined\") &&\n        'onLine' in navigator\n    ) {\n        update_network_status();\n        window.addEventListener('offline', update_network_status);\n        window.addEventListener('online', update_network_status);\n    } else {\n        set(undefined);\n    }\n\n    return () => {\n        if (\n            (typeof navigator !== \"undefined\") &&\n            'onLine' in navigator\n        ) {\n            window.removeEventListener('offline', update_network_status);\n            window.removeEventListener('online', update_network_status);\n        }\n    };\n});\n\nexport const route = readable(null, set => {\n    const hashchange = (e) => {\n        set(window.location.hash.substr(1) || \"/\");\n    };\n    hashchange();\n    window.addEventListener('hashchange', hashchange);\n\n    return () => {\n        window.removeEventListener('hashchange', hashchange);\n    };\n});\n\n","<script context=\"module\">\n    import {writable} from 'svelte/store';\n    export const viewLog = writable(false);\n</script>\n\n<script>\n    import { log } from \"../stores\";\n\n    const text2html = (text) => text.replace(/\\n/g, \"<br/>\");\n    const renderText = (text) => `<p>${text2html(text)}</p>`;\n    const renderStyledText = (logEvent) => {\n        const styles = logEvent.values.slice(1);\n        const message = logEvent.values[0];\n        const markerCount = message.match(/%c/g).length;\n        styles.length = markerCount;\n        const results = [];\n        const changeStyleColor = (text) => {\n            return text\n                .replace('color: darkorange;', 'color: var(--maximum-yellow-red);')\n                .replace('color: red;', 'color: var(--redaf);')\n                .replace('color: black;', 'color: var(--blueaf);')\n        }\n        for (const [i, text] of Object.entries(message.split(\"%c\"))) {\n            if (i > 0)\n                results.push(\n                    `<span style=\"${changeStyleColor(styles[i - 1])}\">${text2html(text)}</span>`\n                );\n        }\n        return `<p>${results.join(\"\")}</p>`;\n    };\n    const describe = (value) => {\n        if (value instanceof Error) {\n            return value.message;\n        } else if (\n            Object.prototype.toString.call(value) === \"[object String]\"\n        ) {\n            return value.toString();\n        } else if (value.toString) {\n            return value.toString();\n        } else {\n            return \"alerte visible dans la console du navigateur\";\n        }\n    };\n    const renderLogEvent = (logEvent) => {\n        try {\n            const results = [];\n            if (!Array.isArray(logEvent.values) || logEvent.values.lenght === 0)\n                return \"\";\n            if (Object.prototype.toString.call(logEvent.values[0]) === \"[object String]\" && logEvent.values[0].includes(\"%c\")) {\n                results.push(renderStyledText(logEvent));\n            } else {\n                for (const value of logEvent.values) {\n                    results.push(renderText(describe(value)));\n                }\n            }\n            return `<li class=\"${logEvent.type}\">${results.join(\"\")}</li>`;\n        } catch (err) {\n            return `<li class=\"error\"><p>Erreur dans la console: ${err.message}</p></li>`;\n        }\n    };\n    const clear = () => {\n        log.reset();\n        $viewLog = false;\n    };\n    const scrollToBottom = (node) => {\n        node.scrollTop = node.scrollHeight;\n    };\n\n</script>\n\n<style>\n    .window-wrapper {\n        width: 60ch;\n        max-width: 100%;\n        height: 50%;\n        position: fixed;\n        right: 0px;\n        z-index: 15;\n    }\n    .window {\n        height: 100%;\n        background: var(--background-color);\n        border: 3px solid var(--blueaf);\n        border-top: none;\n        flex: 1;\n        display: flex;\n        flex-direction: column;\n        overflow: auto;\n        border-bottom-left-radius: 5px;\n        border-bottom-right-radius: 5px;\n    }\n    .head {\n        background: var(--blueaf);\n        color: var(--background-color);\n        display: flex;\n        flex: 0 0 auto;\n        align-items: center;\n        padding: 5px 3px 5px 12px;\n        border-top-left-radius: 5px;\n        border-top-right-radius: 5px;\n    }\n    .head button {\n        margin: 0 0 0 20px;\n        padding: 0.2em 0.3em;\n    }\n\n    :global(.console) {\n        font-family: monospace;\n        font-size: small;\n        display: flex;\n        flex-direction: column;\n        min-height: min-content; /* needs vendor prefixes */\n    }\n    :global(.console ol){\n        list-style: none;\n        counter-reset: console-counter;\n        padding-inline-start: 0px;\n    }\n    :global(.console ol li) {\n        counter-increment: console-counter;\n        position: relative;\n    }\n    :global(.console ol li::before) {\n        content: counter(console-counter);\n        font-weight: bold;\n        font-size: 1rem;\n        right: 7px;\n        position: absolute;\n        top: 0;\n        color: rgba(var(--blueaf_rgb), 0.1);\n    }\n    :global(.console p, .console ol) {\n        margin-block-end: 0px;\n        margin-block-start: 0px;\n    }\n    :global(.console li) {\n        /* log & error */\n        padding: 5px 10px;\n        border-bottom: 1px solid #eee;\n    }\n    :global(.console .error) {\n        background-color: #ff000008;\n        color: var(--redaf);\n    }\n</style>\n{#if $viewLog}\n<div class=\"window-wrapper\">\n    <div class=\"head\">\n        <div>Alertes reçues</div>\n        <button on:click={clear}>Effacer</button>\n        <span class=\"flexspace\" />\n        <button on:click={() => ($viewLog = false)}><b>Ｘ</b></button>\n    </div>\n    <div class=\"window\" use:scrollToBottom>\n        <div class=\"console\"><ol>\n            {#each $log as logEvent}\n                {@html renderLogEvent(logEvent)}\n            {/each}\n        </ol></div>\n    </div>\n</div>\n{/if}","<script>\n    import FlagSignifier from '../components/FlagSignifier.svelte';\n    import Link from '../components/Link.svelte';\n    import {htmlLogo, Deferred} from '../components/utils';\n    const fontObserver = (document.fonts) ? document.fonts.load(\"3em Abril Fatface\") : (new Deferred()).resolve(true);\n    import { fly } from 'svelte/transition';\n    import { viewLog } from '../components/LogWindow.svelte';\n</script>\n\n<main>\n    <div class=\"blockquote-wrapper\">\n        <div class=\"logo\">{@html htmlLogo}</div>\n        {#await fontObserver then value}\n        <div class=\"blockquote\" in:fly={{ x: ($viewLog) ? 0 : 600, duration: ($viewLog) ? 0 : 1000 }}>\n            <h1>\n                Simplifier <span style=\"color:var(--blueaf)\">les impôts des pilotes</span> en respectant <span style=\"color:var(--blueaf)\">la confidentialité.</span>\n            </h1>\n            <h4>&mdash;@flyingeek<br><em>pilote de ligne</em></h4>\n        </div>\n        {/await}\n    </div>\n\n    <section>\n        <FlagSignifier title=\"Un outil simple et rapide\">\n            <svg slot=\"icon\" width=\"47px\" height=\"47px\" viewBox=\"0 0 512 512\">\n                <rect x=\"27.689\" y=\"181\" width=\"58.8\" height=\"30\"/>\n                <rect x=\"27.689\" y=\"301\" width=\"58.8\" height=\"30\"/>\n                <rect y=\"241\" width=\"86.49\" height=\"30\"/>\n                <path d=\"M314.244,58.245c-109.042,0-197.755,88.713-197.755,197.755s88.712,197.755,197.755,197.755S512,365.042,512,256\n                    S423.287,58.245,314.244,58.245z M314.244,423.755c-92.5,0-167.755-75.255-167.755-167.755S221.744,88.245,314.244,88.245\n                    C406.745,88.245,482,163.5,482,256S406.745,423.755,314.244,423.755z\"/>\n                <polygon points=\"323.93,263.454 323.93,166.557 293.93,166.557 293.93,279.313 371.238,331.996 388.133,307.205\"/>\n            </svg>\n\n            <ol slot=\"content\">\n                <li>Récupérez vos EP4/EP5 et vos bulletins de salaire sur <Link href=\"https://www.mypeopledoc.com\">MyPeopleDoc</Link></li>\n                <li>Choisissez l'année en haut à droite sur <b>{@html htmlLogo}</b></li>\n                <li>Déposez vos fichiers dans <a href=\"#/mission\" >Frais de Mission</a>\n                    ou dans <a href=\"#/pay\" >Salaire</a></li>\n            </ol>\n\n        </FlagSignifier>\n        <FlagSignifier title=\"Une confidentialité préservée\">\n            <svg slot=\"icon\" width=\"47px\" height=\"47px\" viewBox=\"0 0 47 47\">\n                <path d=\"M34.451,18.851v-7.893C34.451,4.915,29.539,0,23.497,0c-6.04,0-10.952,4.915-10.952,10.958v7.893H7.471V47h32.059V18.851\n                H34.451z M18.026,10.958c0-3.023,2.452-5.481,5.47-5.481s5.47,2.458,5.47,5.481v7.893h-10.94V10.958z M21.817,41.934l-10.171-7.216\n                l3.188-5.985l7.277,6.119l10.479-10.27l2.761,4.82L21.817,41.934z\"/>\n            </svg>\n            <p slot=\"content\">Inutile de partager son calendrier ou d'envoyer des données sur Internet: <b>{@html htmlLogo}</b> \n                fonctionne directement dans votre navigateur, aucun fichier n'est transmis sur le réseau, aucune donnée n'est collectée. </p>\n        </FlagSignifier>\n        <FlagSignifier title=\"Des sources fiables\">\n            <svg slot=\"icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\">\n                <ellipse cx=\"12\" cy=\"5\" rx=\"9\" ry=\"3\"></ellipse>\n                <path d=\"M21 12c0 1.66-4 3-9 3s-9-1.34-9-3\"></path>\n                <path d=\"M3 5v14c0 1.66 4 3 9 3s9-1.34 9-3V5\"></path>\n            </svg>\n            <div slot=\"content\">\n                <p>Chaque année <b>{@html htmlLogo}</b> récupère les données à la source: le montant des indemnités provient du\n                    <strong>Ministère de l'Économie</strong>, les taux de change sont ceux de la <strong>Banque de France</strong>,\n                    le forfait Euro est calculé en fonction des dernières informations de <strong>l'URSSAF</strong>.</p>\n                <p>Le programme en lui même inclus des tests permettant de fiabiliser les résultats \n                    et les erreurs détectées sont clairement affichées. Les exemples du <strong>Mémento fiscal du SNPL</strong>\n                    ont été utilisés pour tester et valider les résultats de l'application.</p>\n            </div>\n        </FlagSignifier>\n    </section>\n</main>\n\n<style>\n    /* For screen > 700px */\n    @media all and (min-width: 770px) {\n        .blockquote h1 {\n            font-size: 3rem;\n            line-height: 1.2;\n        }\n        .blockquote-wrapper {\n            flex-wrap: nowrap;\n            max-width: 1000px;\n            margin-left: auto;\n            margin-right: auto;\n            justify-content: left;\n        }\n        .logo {\n            margin-right: 30px; /* to emulate column gap*/\n            margin-top: 60px;\n            margin-left: 40px;\n        }\n        section {\n                padding: 0 40px;\n        }\n    }\n    div.logo {\n        font-size: 4em;\n        font-weight: 800;\n    }\n    section {\n        margin: 80px auto 0 auto;\n        max-width: 1000px;\n        text-align: justify;\n    }\n    section a {\n        white-space: nowrap;\n    }\n\n    ol {\n        list-style: none;\n        counter-reset: my-awesome-counter;\n        margin: 0;\n        padding: 0;\n    }\n    ol li {\n        counter-increment: my-awesome-counter;\n        margin-bottom: 0.5rem;\n    }\n    ol li::before {\n        content: counter(my-awesome-counter);\n        font-weight: bold;\n        font-size: 2rem;\n        margin-right: 0.5rem;\n        line-height: 2rem;\n        position: relative;\n        top: 0.3rem;\n    }\n/* center the blockquote in the page */\n:global(.blockquote-wrapper) {\n   display: flex;\n   flex-wrap: wrap;\n   /* column-gap: 30px; */ /* not yes supported by safari */\n   padding: 0 20px;\n   justify-content: center;\n}\n\n/* Blockquote main style */\n:global(.blockquote) {\n    position: relative;\n    /*font-family: 'Barlow Condensed', sans-serif;*/\n    max-width: 620px;\n    margin: 10px;\n    align-self: center;\n}\n\n/* Blockquote header */\n:global(.blockquote h1) {\n    font-family: 'Abril Fatface';\n    position: relative; /* for pseudos */\n    color: var(--redaf);\n    font-size: 2.8rem;\n    font-weight: normal;\n    line-height: 1;\n    margin: 0;\n    border: solid 2px;\n    border-color: var(--blueaf);\n    border-radius:20px;\n    padding: 25px;\n    text-transform: none;\n    text-align: left;\n}\n\n/* Blockquote right double quotes */\n:global(.blockquote h1:after) {\n    content:\"\";\n    position: absolute;\n    border: 2px solid var(--blueaf);\n    border-radius: 0 50px 0 0;\n    width: 60px;\n    height: 60px;\n    bottom: -62px;\n    left: 50px;\n    border-bottom: none;\n    border-left: none;\n    z-index: 3; \n\n}\n\n:global(.blockquote h1:before) {\n    content:\"\";\n    position: absolute;\n    width: 80px;\n    border: 6px solid var(--background-color);\n    bottom: -3px;\n    left: 50px;\n    z-index: 2;\n}\n\n/* Blockquote subheader */\n:global(.blockquote h4) {\n    position: relative;\n    color:var(--blueaf);\n    font-size: 1.3rem;\n    font-weight: 300;\n    line-height: 1.2;\n    margin: 0;\n    padding-top: 15px;\n    z-index: 1;\n    margin-left:150px;\n    padding-left:12px;\n    text-align: left;\n}\n\n:global(.blockquote h4:first-letter) {\n  margin-left:-12px;\n}\n</style>\n","export default function (urls, test, callback) {\n    let remaining = urls.length\n  \n    function maybeCallback () {\n      remaining = --remaining\n      if (remaining < 1) {\n        callback()\n      }\n    }\n  \n    if (!test()) {\n      urls.forEach(({ type, url, options = { async: true, defer: true }}) => {\n        const isScript = type === 'script'\n        const tag = document.createElement(isScript ? 'script': 'link')\n        if (url.startsWith('http') || url.startsWith('//')){\n          tag.crossOrigin = \"anonymous\";\n        }\n        let onload = true\n        if (isScript) {\n          tag.src = url\n          tag.async = options.async\n          tag.defer = options.defer\n        } else {\n            tag.href = url\n            if ('prefetch' in options){\n                tag.rel = \"prefetch\"\n                remaining -= 1\n                onload = false\n            } else if ('preload' in options) {\n                tag.rel = 'preload'\n                remaining -= 1\n                onload = false\n            } else {\n                tag.rel = 'stylesheet'\n                remaining -= 1\n                onload = false\n            }\n        }\n        if (onload) tag.onload = maybeCallback\n        document.body.appendChild(tag)\n      })\n    } else {\n      callback()\n    }\n  }","\n// decimal is text string representing a float number with two decimals like \"123.45\"\n//\n// cents is a number used to compute sum of decimals without rounding problems\n// decimal \"123.45\" is cents 12345\n//\n\n// convert a text number to a decimal (accepts \"12345,67 or 12345.67 or 12 345.67)\n// forces 2 precision digits\n// returns a string \nexport const decimal = (text) => {\n    const number = text.replace(',', '.').replace(' ', '');\n    const [left, right] = number.split(\".\");\n    return left + '.' + (right||\"00\").padEnd(2, \"0\");\n}\n// decimal to cents\n// returns a number\nexport const decimal2cents = (decimal) => {\n    const [left, right] = decimal.split(\".\");\n    return parseInt(left + (right||\"00\"), 10);\n}\n\n// cents to decimal\n// returns a string\nexport const cents2decimal = (cents) => {\n    const centsString = cents.toString(10);\n    const length = centsString.length;\n    switch (length) {\n        case 2:\n            return '0.' + centsString;\n        case 1:\n            return '0.0' + centsString;\n        default:\n            return centsString.slice(0, -2) + '.' + centsString.slice(-2);\n    }\n}\n\n// collect first group of all matches\n// returns Array of \"decimal\"\nconst matchAll = (text, re, bydefault) => {\n    const results = [];\n    let match;\n    while(null !== (match = re.exec(text))) {\n        results.push(decimal(match[1]));\n    }\n    const found = results.length;\n    if (found > 0) {\n        return results;\n    } else if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return [bydefault];\n    }\n};\n\n// returns first group of first match\n// Throws if no match found\n// returns string\nconst matchFirst = (text, re, bydefault) => {\n    let match;\n    if (null !== (match = re.exec(text))) {\n        return match[1];\n    }\n    if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return bydefault;\n    }\n};\n\n// returns first group of last match\n// Throws if no match found\n// returns string\nconst matchLast = (text, re, bydefault) => {\n    let match;\n    let lastMatch;\n    while (null !== (match = re.exec(text))) {\n        lastMatch = match;\n    }\n    if (lastMatch) return lastMatch[1];\n    if (bydefault === undefined) {\n        throw new Error(`No match found for ${re}`);\n    } else {\n        return bydefault;\n    }\n};\n\nconst sum = (decimals) => cents2decimal(decimals.map(decimal2cents).reduce((a, b) => a + b));\n// Parse PaySlip\nexport const payParser = (text, fileName, fileOrder) => {\n    //console.log(text);\n    let result = {\"type\": \"pay\", fileName, fileOrder, errors: []};\n    let re = /(?:IND\\.REPAS_+|INDEMNITE REPAS_+)([\\-0-9, ]+)/g;\n    result.repas = matchAll(text, re, \"0\").map(decimal);\n    re = /(?:IND\\. TRANSPORT_+|FRAIS REELS TRANSP_+)([\\-0-9, ]+)/g;\n    result.transport = matchAll(text, re, \"0\").map(decimal);\n    re = /(?:_I.DECOUCHERS F.PRO_+)([\\-0-9, ]+)/g;\n    result.decouchers_fpro = matchAll(text, re, \"0\").map(decimal);\n    try {\n        const net = matchAll(text, /_Mensuel_[\\-0-9, ]+_{1,2}([\\-0-9, ]+)_/g);\n        result.imposable = sum(net.map(decimal));\n        if (net.length > 1) result.errors.push({\"type\": \"warning\", \"message\":\"Plusieurs bulletins de salaire trouvés\"});\n    } catch (err) {\n        result.errors.push({\"type\": \"error\", \"message\":\"Net imposable non trouvé\"});\n        result.imposable = \"0\";\n    }\n    try {\n        result.cumul = decimal(matchLast(text, /_Annuel_[\\-0-9, ]+_{1,2}([\\-0-9, ]+)_/g));\n    } catch (err) {\n        result.errors.push({\"type\": \"error\", \"msg\":\"Cumul Net imposable non trouvé\"});\n        result.cumul = \"0\";\n    }\n    try {\n        result.date = matchLast(text, /PERIODE DU \\d{2}\\/(\\d{2}\\/\\d{4})/g).split('/').reverse().join('-');\n        if(result.date.endsWith(\"00\")) throw new Error(`Date invalide: ${result.date}`);\n    } catch (err) {\n        throw new Error(`Date non trouvée`);\n    }\n    return result;\n}","import {payParser} from \"./payParser\";\nimport {ep5Parser} from \"./ep5Parser\";\n\n// Based on PDF text content, performs task(s)\n// Return array of result\nexport const router = (text, fileName, fileOrder, taxYear, taxData, base, tzConverter) => {\n    const results = [];\n    if (text.match(/BULLETIN DE PAIE_(AIR FRANCE|BASE)/)) {\n        try  {\n            const result = payParser(text, fileName, fileOrder);\n            if (result.errors) {\n                for (const error of result.errors) {\n                    results.push({\"type\": error.type, \"msg\": error.message, fileName, fileOrder, \"content\": text});\n                }\n            }\n            results.push(result);\n        } catch (err) {\n            results.push({\"type\": \"error\", \"msg\":`${err.message}`, fileName, fileOrder, \"content\": err});\n        }\n    }else if(text.indexOf('CARNET _DE _VOL _- _EP _5')!== -1) {\n        results.push(ep5Parser(text, fileName, fileOrder, taxYear, taxData, base, tzConverter));\n    }\n    if (results.length === 0) {\n        results.push({\"type\": \"error\", \"msg\":\"fichier non reconnu\", fileName, fileOrder, \"content\": text});\n    }\n    return results;\n}\n","<script context=\"module\">\n    import loader from \"./async-script-loader.js\";\n    import { Deferred } from \"./utils.js\";\n    import { onMount} from \"svelte\";\n    const pdfjsWorkerSrc = \"CONF_PDFJS_WORKER_JS\";\n    let pdfWorker;\n    let seqOrder = 0;\n    const preloadFiles = [\n        { type: \"script\", url: \"CONF_PDFJS_JS\" }\n    ];\n\n    const getPageText = async (pdf, pageNo, separator = \"\") => {\n        const page = await pdf.getPage(pageNo);\n        const tokenizedText = await page.getTextContent();\n        return tokenizedText.items.map((token) => token.str).join(separator);\n    };\n\n    const getPDFText = async (source, separator = \"\") => {\n        const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n        const pdfPages = [];\n        const pdf = await pdfjsLib.getDocument(source).promise;\n        const maxPages = pdf.numPages;\n        for (let pageNo = 1; pageNo <= maxPages; pageNo += 1) {\n            const pageText = await getPageText(pdf, pageNo, separator);\n            pdfPages.push(pageText);\n        }\n        return pdfPages.join(\"\\n\");\n    };\n</script>\n\n<script>\n    import {taxYear, taxData, base, tzConverter, ep5, paySlips} from '../stores';\n    import {router} from '../parsers/router';\n    const acceptedType = 'application/pdf'; \n    let disabled = false; // locally during file processing\n    let ready = new Deferred();\n    let name = \"file\";\n    let dropzoneHasFocus = false;\n\n    function preload() {\n        loader(\n            preloadFiles,\n            () => !!window[\"pdfjs-dist/build/pdf\"],\n            () => {\n                const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n                pdfjsLib.GlobalWorkerOptions.workerSrc = pdfjsWorkerSrc;\n                if (!pdfWorker || pdfWorker.destroyed) {\n                    pdfWorker = new pdfjsLib.PDFWorker({verbosity: 0});\n                }\n                ready.resolve(true);\n            }\n        );\n    }\n    class Warning extends Error {};\n\n    const getPDF = (file, fileName) => {\n        const reader = new FileReader();\n        return new Promise((resolve, reject) => {\n            reader.onload = (ev) => {\n                if (!pdfWorker || pdfWorker.destroyed) {\n                    const pdfjsLib = window[\"pdfjs-dist/build/pdf\"];\n                    pdfWorker = new pdfjsLib.PDFWorker({verbosity: 0});\n                }\n                getPDFText({ data: ev.target.result , verbosity: 0, worker: pdfWorker}, \"_\").then(\n                    (text) => {\n                        if (text) {\n                            resolve(text);\n                        } else {\n                            const err = new Warning(`%c${fileName}\\n%cabsence de texte dans le PDF`);\n                            reject(err);\n                        }\n                    },\n                    (err) => reject(err)\n                );\n            };\n            reader.onerror = (err) => {\n                reject(new Warning(`%c${fileName}\\n%cfichier illisible !`));\n            };\n            reader.readAsArrayBuffer(file);\n        });\n    };\n    async function processFiles(files, target) {\n        disabled = true;\n        await ready.promise.then(() => {\n            const promises = [];\n            const basename = (file) => file.name.split(/([\\\\/])/g).pop();\n            let batchPaySlips = {};\n            let batchEp5 = {};\n            for (let i = 0; i < files.length; i++) {\n                const file = files[i];\n                if (file) {\n                    const fileName = basename(file);\n                    promises.push(\n                        getPDF(file, fileName).then((text) => {\n                            const results = router(text, fileName, i + seqOrder, $taxYear, $taxData, $base, $tzConverter);\n                            results.forEach(result => {\n                                if (result.type === 'error') {\n                                    console.log(`%c${fileName}\\n%c${result.msg}`, 'font-family: monospace;', 'color: red;');\n                                    //console.log(result);\n                                    return;\n                                } else if (result.type === 'warning') {\n                                    console.log(`%c${fileName}\\n%c${result.msg}`, 'font-family: monospace;', 'color: darkorange;');\n                                    return;\n                                } else {\n                                    const [year, month] = result.date.split('-');\n                                    if (year !== $taxYear) {\n                                        console.log(`%c${fileName}\\n%ctype [${result.type}] %cannée ${year} iso ${$taxYear}`, 'font-family: monospace;', 'color: black;', 'color: darkorange;');\n                                        return;\n                                    }\n                                    if (result.type === \"pay\") {\n                                        Object.assign(batchPaySlips, {[month]: result}); // this method of saving result does not refresh svelte\n                                    }else if (result.type === \"ep5\") {\n                                        Object.assign(batchEp5, {[month]: result}); // this method of saving result does not refresh svelte\n                                    }\n                                }\n                            });\n                        }).catch((err) => (err instanceof Warning) ? console.log(err.message, 'font-family: monospace;', 'color: red;') : console.error(err))\n                    );\n                }\n            }\n            seqOrder += files.length;\n            const afterLoad = () => {\n                disabled = false;\n                if (target) target.value = null; // reset file input\n                paySlips.update((theStore) => {\n                    return Object.assign(theStore, batchPaySlips);\n                });\n                batchPaySlips = {};\n                ep5.update((theStore) => {\n                    return Object.assign(theStore, batchEp5);\n                });\n                batchEp5 = {};\n            };\n            Promise.all(promises)\n                .then(() => {\n                    afterLoad();\n                }).catch((err) => {\n                    //should never be there but...\n                    afterLoad();\n                    console.error(err);\n                });\n        });\n    }\n    async function processChange(event) {\n        processFiles(event.target.files, event.target);\n    }\n\n    async function processDrop(event) {\n        dropzoneHasFocus = false;\n        disabled = true;\n        const files = [];\n        async function* getEntriesAsAsyncIterator(dirEntry) {\n            const reader = dirEntry.createReader();\n            const getNextBatch = () =>\n                new Promise((resolve, reject) => {\n                    reader.readEntries(resolve, reject);\n                });\n            let entries;  \n            do {\n                entries = await getNextBatch();\n                for (const entry of entries) {\n                    if (entry.isFile) yield entry;\n                }\n            } while (entries.length > 0);\n        }\n        async function fileAsPromise(entry) {\n            return new Promise((resolve, reject) => {\n                entry.file(resolve, reject);\n            });\n        }\n        const entries = [...event.dataTransfer.items].map(item => item.webkitGetAsEntry());\n        for (const entry of entries) {\n            if (entry.isDirectory) {\n                for await (const e of getEntriesAsAsyncIterator(entry)) {\n                    const file = await fileAsPromise(e);\n                    files.push(file);\n                }\n            } else {\n                const file = await fileAsPromise(entry);\n                files.push(file);\n            }\n        }\n        if ((acceptedType !== undefined && acceptedType !== null)) {\n            processFiles(files.filter(f => f.type === acceptedType));\n        } else {\n            processFiles(files);\n        }\n    }\n    onMount(async () => preload())\n</script>\n\n<!-- <svelte:window on:load={preload}/> -->\n<style>\n\n:global(.dropzone) {\n  border: 2px dashed var(--blueaf);\n  border-radius: 5px;\n  background: var(--dropzone-background-color);\n  width: 80%;\n  margin: 0 auto 2em auto;\n  position: relative;\n}\n:global(.dropzone figure) {\n    width: 60px;\n    height: 60px;\n    display: block;\n    margin: 0 auto;\n}\n:global(.dropzone figure svg) {\n    width: 100%;\n    height: 100%;\n    opacity: 0.5;\n}\n:global(.dropzone figure svg use) {\n    width: 100%;\n    height: 100%;\n}\n:global(.dropzone input[type=file]) {\n    opacity: 0;\n    overflow: hidden;\n    position: absolute;\n    width: 100%;\n    height: 100%;\n    left: 0;\n    top: 0;\n    z-index: 1;\n}\n:global(.dropzone label) {\n    z-index: -1;\n}\n:global(.dropzone.focus){\n    border-color: var(--green);\n}\n:global(.dropzone.focus svg){\n    fill:var(--green);\n    opacity: 1;\n}\n:global(.dropzone.focus input[type=file]:disabled + label svg) {\n    fill:var(--redaf);\n    opacity: 1;\n}\n:global(.dropzone input[type=file]:hover) {\n    cursor: pointer;\n}\n:global(.dropzone input[type=file]:disabled) {\n    cursor: not-allowed;\n}\n:global( .dropzone div[slot]) {\n    padding: 20px\n}\n:global(.dropzone div[slot=top]) {\n    text-transform: uppercase;\n    font-weight: 200;\n    font-size: 1.5rem;\n}\n:global(.dropzone div[slot=top] strong) {\n    font-weight: 200;\n}\n</style>\n<div class=\"dropzone\" class:focus={dropzoneHasFocus}>\n    {#if false}<slot />{/if}\n    <input\n    id={name}\n    {name}\n    type=\"file\"\n    multiple\n    accept=\"application/pdf\"\n    disabled={disabled || !$taxData}\n    on:change={processChange}\n    on:click|once={preload}\n    on:drop|preventDefault={processDrop}\n    on:dragenter={() => dropzoneHasFocus = true}\n    on:dragleave={() => dropzoneHasFocus = false}\n    />\n    <label for={name}>\n        <slot name=\"top\"></slot>\n        <figure>\n            <svg><use xlink:href=\"#upload\"/></svg>\n        </figure>\n        <slot name=\"bottom\"></slot>\n    </label>\n\n</div>\n","<script>\n    import {months, monthsfr} from \"./utils\";\n    import {taxYear, tzConverter} from '../stores';\n    export let data = [];\n    export let name = \"Mois\";\n    let nameLabel;\n    const label = (month) => {\n        switch(month) {\n            case \"13\":\n                return \"01\"\n            case \"00\":\n                return \"12\"\n            default:\n                return month;\n        }\n    };\n    const computeNameLabel = (requested) => {\n        const year = $taxYear;\n        if (!year) return name;\n        if (data.type===\"ep5\") {\n            const prev = (parseInt(year, 10) -1).toString();\n            const next = (parseInt(year, 10) +1).toString();\n            return `${name} de ${monthsfr[11]} ${prev} à ${(requested.length>13) ? monthsfr[0] + ' ' + next : monthsfr[11] + ' ' + year}`;\n        } else {\n            return `${name} de ${monthsfr[0]} ${year} à ${monthsfr[11]} ${year}`;\n        }\n    }\n    const computeRequestedMonths = (dat) => {\n        if (dat.type===\"ep5\") {\n            const tz = ($tzConverter)  ? $tzConverter(\"2020-11-01T00:00Z\").slice(-6) : \"+01:00\";\n            let requestedMonthsDefault;\n            if (tz === \"+00:00\") {\n                requestedMonthsDefault = months.map(m => [m, true]);\n            }else if (tz[0] === '+'){\n                requestedMonthsDefault = ['00', ...months].map(m => [m, true]); // TODO this is the only one working in the logic below\n            }else {\n                requestedMonthsDefault = [...months, '13'].map(m => [m, true]);\n            }\n            let requested = [];\n            if (Object.keys(dat).length === 1) { //key type is always present\n                requested = [...requestedMonthsDefault];\n            }else{\n                for (let i=0; i < 14; i++) {\n                    const m = i.toString().padStart(2, '0');\n                    const n = (i + 1).toString().padStart(2, '0');\n                    const p = (i - 1).toString().padStart(2, '0');\n                    if (dat[n]&& dat[n].rots && dat[n].rots.length > 0 && dat[n].rots[0].isComplete===\">\"){\n                        requested.push([m, false]);\n                    }else if (dat[p] && dat[p].rots && dat[p].rots.length > 0 && dat[p].rots[dat[p].rots.length - 1].isComplete===\"<\"){\n                        requested.push([m, false]);\n                    }else if (i!==13){\n                        requested.push([m, true]);\n                    }else if (i===13 && dat[m] !== undefined){\n                        requested.push([m, true]); \n                    }\n                }\n            }\n            nameLabel = computeNameLabel(requested);\n            return requested;\n        }else{\n            nameLabel = computeNameLabel();\n            return months.map(m => [m, false]);\n        }\n    };\n    $: requestedMonths = computeRequestedMonths(data);\n</script>\n<div>\n    <div>{nameLabel}</div>\n    <ul>\n    {#each requestedMonths as [month, optional]}\n    <li class:loaded=\"{data[month] !== undefined}\" class:optional=\"{optional === true}\">{label(month)}</li>\n    {/each}\n    </ul>\n</div>\n\n<style>\n    ul {\n        display: block;\n        margin: 0.5em 0 0 0;\n        padding: 0;\n    }\n    li {\n        --size: 2em;\n        display: inline-block;\n        border-radius: 5px; /*50%;*/\n        width: var(--size);\n        height: var(--size);\n        line-height: var(--size);\n        text-align: center;\n        background-color:var(--redaf);\n        color: var(--white);\n        margin: 2px 5px;\n    }\n    li.loaded {\n        background-color: var(--green) !important;\n    }\n    li.optional {\n        background-color: var(--color);/*orange;*/\n    }\n</style>","<script>\n    import {localeRate, localeDateFormat, localeCurrency} from './utils';\n    import {taxData, pairings} from '../stores';\n    export let tableId = \"Indemnities\";\n\n    function* getCountriesData(dat){\n        const list = [\"EU\"]; // add forfait EU\n        for (const rot of dat) {\n            list.push(...rot.countries);\n        }\n        const sortedList = Array.from(new Set(list)).sort((a, b) => a.localeCompare(b));\n        for (const key of sortedList) {\n            for (const countryData of getData(key)){\n                yield countryData;\n            }\n        };\n    };\n\n    function* getData(key) {\n        const value = $taxData.countries[key];\n        const amounts = (value.f === 1) ? $taxData.countries[\"EU\"].a : value.a;\n        for (const [validity, currency, amount] of amounts) {\n            const [startRate, endRate, averageRate] = $taxData.exr[currency];\n            yield {\n                \"name\": (key === \"EU\") ? value.n + \"¹\" : value.n,\n                \"code\": key,\n                validity,\n                amount,\n                currency,\n                startRate,\n                endRate,\n                averageRate,\n                \"euros\": (parseFloat(amount) / averageRate).toFixed(2),\n                \"zone\": (key === \"EU\") ? \"\" : (value.z === 1) ? \"Moyen\": \"Long\"\n            };\n        } \n\n    };\n    $: countriesData = ($taxData) ? [...getCountriesData($pairings)] : [];\n</script>\n\n{#if countriesData.length > 1}\n<table id={tableId} class=\"data\">\n    <thead>\n        <tr><th colspan=\"9\">Indemnités par pays {$taxData.year} </th></tr>\n        <tr><th colspan=\"2\">Pays</th><th>Validité</th><th>Montant</th><th>Taux</th><th>Taux</th><th>Taux moyen</th><th>Montant €</th><th>Zone</th></tr>\n        <tr><td colspan=\"2\"></td><td>(à compter du)</td><td></td><td>31/12/{parseInt($taxData.year, 10) - 1}</td><td>31/12/{$taxData.year}</td><td></td><td></td><td></td></tr>\n    </thead>\n    <tbody>\n        {#each countriesData as c}\n            <tr>\n                <td>{c.code}</td>\n                <td>{(c.name.length <= 21) ? c.name : c.name.substring(0, 20) + '…'}</td>\n                <td>{localeDateFormat(c.validity)}</td>\n                <td>{`${c.amount} ${c.currency}`}</td>\n                <td>{localeRate(c.startRate)}</td>\n                <td>{localeRate(c.endRate)}</td>\n                <td>{localeRate(c.averageRate)}</td>\n                <td>{localeCurrency(c.euros)}</td>\n                <td>{c.zone}</td></tr>\n        {/each}\n    </tbody>\n    <tfoot>\n        <tr><td colspan=\"9\">1. Le forfait Euro est appliqué dans ces pays: {$taxData.zoneForfaitEuro.join(', ')}</td></tr>\n    </tfoot>\n</table>\n{/if}\n\n<style>\n\n/* Hides Taux début, Taux fin in portrait mode on iPad */\n@media (max-width: 1024px) {\n    thead th:nth-child(4), thead th:nth-child(5),\n    td:nth-child(5), td:nth-child(6) {\n        display: none;\n    }\n}\nth, td {\n    text-align: right;\n}\nthead tr:nth-child(2) th {\n    border-bottom: none;\n    padding-top: 0.5em;\n    padding-bottom: 0;\n}\nthead td {\n    border-top: none;\n    font-weight: normal;\n    font-size: x-small;\n}\nthead tr:nth-child(3) {\n    height: 0.7em;\n    line-height: 0.1em;\n    padding-top: 0;\n    padding-bottom: 0;\n}\nthead tr:nth-child(2) th:nth-child(1), tbody td:nth-child(2), td:nth-child(1) {\n    text-align: left;\n}\n</style>","<script context=\"module\">\n    import loader from \"./async-script-loader.js\";\n    import { Deferred } from \"./utils.js\";\n    const preloadFiles = [\n        { type: \"script\", url: \"CONF_JSPDF_JS\" , async: false, defer: false }\n    ];\n    const preloadFiles2 = [\n        { type: \"script\", url: \"CONF_JSPDF_TABLE_JS\", async: false, defer: false }\n    ];\n</script>\n<script>\n    import { onMount} from 'svelte';\n    let ready = new Deferred();\n    let disabled = false;\n    export let label = \"Télécharger en PDF\";\n    export let filename = \"table.pdf\";\n    export let tableIds = ['#my-table'];\n    function preload() {\n        loader(\n            preloadFiles,\n            () => !!window[\"jspdf\"],\n            () => {\n                loader(preloadFiles2, () => !!window['jspdfext'], () => {\n                    window['jspdfext'] = \"autotable\";\n                    const fontName = \"CONF_JSPDF_FONT_TTF\".split('/').pop();\n                    if (!window['jspdffont']) {\n                        fetch(\"CONF_JSPDF_FONT_TTF\")\n                        .then( async (res) => {\n                            if (res.ok) {\n                                try{ \n                                    const blob = await res.blob();\n                                    const reader = new FileReader();\n                                    reader.onload = function(event){\n                                        window['jspdffont'] = event.target.result;\n                                        const callAddFont = function () {\n                                            this.addFileToVFS(fontName, window['jspdffont']);\n                                            this.addFont(fontName, fontName.split('.').shift(), 'normal');\n                                        };\n                                        window[\"jspdf\"].jsPDF.API.events.push(['addFonts', callAddFont]);\n                                        disabled = false;\n                                        ready.resolve(true);\n                                    };\n                                    reader.onerror = () => {\n                                        disabled = true;\n                                        ready.reject(`failed to read the downloaded font ${fontName}`);\n                                    }\n                                    reader.readAsBinaryString(blob);\n                                } catch (err) {\n                                    disabled = true;\n                                    ready.reject(err);\n                                }\n                            } else {\n                                disabled = true;\n                                ready.reject(`error loading ${fontName}: ${res.statusText}`);\n                            }\n                        }, err => { /* handles fetch error like no network */\n                            disabled = true;\n                            ready.reject(err);\n                        });\n                    }else{\n                        disabled = false;\n                        ready.resolve(true);\n                    }\n                });\n            }\n        );\n    }\n\n    const download = async (e) => {\n        if (disabled) {\n            e.preventDefault();\n            e.stopPropagation();\n            return false;\n        }\n        disabled = true;\n        try {\n            await ready.promise;\n            if (tableIds.includes('MissionTable')) {\n                const table = document.getElementById(`MissionTable`);\n                const elements = table.querySelectorAll(`summary`);\n                elements.forEach(e => {\n                    e.parentNode.parentNode.innerText = e.innerText;\n                });\n            }\n            for (const tableId of tableIds) {\n                const table = document.getElementById(tableId);\n                table.classList.add(\"print\");\n            }\n            const doc = new jspdf.jsPDF({orientation: \"landscape\"});\n            for (const [i, tableId] of tableIds.entries()) {\n                doc.autoTable({ \n                    html: '#' + tableId,\n                    styles: { font: 'HelveticaUTF8'},\n                    useCss: true, showHead: 'firstPage',\n                    showFoot: 'lastPage',\n                    pageBreak: (i === 0) ? 'auto': 'avoid',\n                    includeHiddenHtml: true\n                });\n            }\n            // doc.save(e.target.download);\n            // only \"application/octet-stream\" works on ipad\n            const filename = e.target.download;\n            const blob = new Blob( [doc.output('arraybuffer', {filename})], { type: \"application/octet-stream\" });\n            if (e.target.href.startsWith('blob:')) URL.revokeObjectURL(e.target.href);\n            e.target.href = URL.createObjectURL(blob);\n            if (tableIds.includes('MissionTable')) {\n                const table = document.getElementById(`MissionTable`);\n                const elements = table.querySelectorAll(`td[title]`);\n                elements.forEach(e => {\n                    e.innerHTML = `<details><summary>${e.innerText}</summary>${e.title}</details>`;\n                });\n            }\n            for (const tableId of tableIds) {\n                const table = document.getElementById(tableId);\n                table.classList.remove(\"print\");\n            }\n        }catch(err){\n            console.error(err);\n        }\n        disabled = false;\n    };\n    onMount(async () => {\n        preload();\n    });\n</script>\n<a href=\".\" class:disabled on:click={download} download={filename}>{label}</a>\n\n<style>\n    :global(a[download]) {\n        padding: 10px;\n        background-color: var(--blueaf);\n        display: inline-block;\n        color: var(--white);\n        border-radius: 5px;\n        text-decoration: none;\n    }\n    a[download].disabled {\n        display: none;\n    }\n</style>","<script>\n    import {localeCurrency} from './utils';\n    import MissionCountries from \"./MissionCountries.svelte\";\n    import DownloadTablePDF from './DownloadTablePDF.svelte';\n    import {taxYear, taxData, pairings} from '../stores';\n\n    export let tableId = \"MissionTable\";\n    const tableIndemnitiesId = tableId + \"Indemnities\";\n\n    $: total = Object.values($pairings).reduce((a, c) => a + c.indemnity, 0).toFixed(0);\n\n</script>\n\n{#if $pairings.length > 0}\n    <DownloadTablePDF tableIds={[tableId, tableIndemnitiesId]} filename={`fraisdemission${$taxYear}.pdf`}/>\n    <table id=\"{tableId}\" class=\"data\">\n        <thead>\n            <tr><th colspan=\"5\">Frais de Mission {$taxYear} : <strong>{total} €</strong></th></tr>\n            {#if $taxYear !== $taxData.year}\n                <tr class=\"warning\"><th colspan=\"5\">Attention les montants sont basés sur les données fiscales de {$taxData.year}</th></tr>\n            {/if}\n            <tr><th>Date</th><th>Type</th><th>Description</th><th>Formule</th><th>Montant</th></tr>\n        </thead>\n        <tbody>\n            {#each $pairings as rot}\n                <tr>\n                    <td>{rot.start.substring(8,10)}/{rot.start.substring(5,7)}</td>\n                    <td>{rot.days.toString().padStart(2, ' ')} ON</td>\n                    <td>{rot.summary}</td>\n                    <!-- Do not change markup below without editing DownloadTablePDF.svelte -->\n                    <td title=\"{rot.currencyFormula}\"><details><summary>{rot.formula}</summary>{rot.currencyFormula}</details></td>\n                    <td>{localeCurrency(rot.indemnity)}</td>\n                </tr>\n            {/each}\n        </tbody>\n        <tfoot>\n            {#if $pairings.reduce((a,c) => a | c.formula.includes(\"¹\"), false)}\n                <tr><td colspan=\"5\">1. formule tronquée pour respecter l'année fiscale</td></tr>\n            {/if}\n        </tfoot>\n    </table>\n    <MissionCountries tableId={tableIndemnitiesId}/>\n{/if}\n\n\n<style>\ntd:nth-child(5), th:nth-child(5){\n    text-align: right;\n    white-space: nowrap;\n}\ntr.warning th{\n    color: white;\n    background-color: var(--red-af);\n    text-align: center;\n}\ndetails[open] summary{\n    margin-bottom: 2px;\n}\n/* Table title*/\n:global(table.data thead tr:nth-child(1) th) {\n    text-align: center;\n    font-size: large;\n    border: none;\n    text-transform: uppercase;\n    font-weight: 300;\n    background-color: var(--table-background-color);\n}\n:global(table.data tfoot tr, tfoot td){\n    border: none;\n    font-size: small;\n}\n:global(table.data tbody td) {\n    font-family: monospace;\n    font-size: 1.3rem;\n}\n:global(table.data) {\n    margin-top: 3em;\n    color: var(--table-color);\n}\n:global(table.data th, table.data td) {\n    border-color: var(--table-border-color);\n}\n\n:global( tbody tr:nth-child(even), thead tr:nth-child(2), thead tr:nth-child(3)) {\n    background-color: var(--table-highlight-color);\n}\n:global(tbody tr:nth-child(odd)) {\n    background-color: var(--table-background-color);\n}\n:global(summary:focus){\n    outline: none;\n}\n:global(table.data.print) {\n    color: black;\n}\n:global(table.data.print tfoot tr) {\n    background-color: white;\n}\n:global(table.data.print thead tr:nth-child(1) th) {\n    background-color: white;\n}\n:global(table.data.print tbody tr:nth-child(odd)) {\n    background-color: white;\n}\n:global(table.data.print tbody tr:nth-child(even), table.data.print thead tr:nth-child(2), table.data.print thead tr:nth-child(3)) {\n    background-color: var(--light-grey);\n}\n:global(table.data.print th, table.data.print td) {\n    border-color: #ccc;\n}\n</style>\n","<script>\n    import DropZone from '../components/DropZone.svelte';\n    import MonthStatus from \"../components/MonthStatus.svelte\";\n    import MissionActivities from '../components/MissionActivities.svelte';\n    import {ep5, base, tzConverter, BASES} from '../stores';\n\n    const baseChange = (e) => {\n        // we can change base on a month to month basis, so do not empty\n        const option = BASES.filter(option => option.label === e.target.value).pop();\n        $base = option.value;\n        $tzConverter = option.tzConverter;\n    };\n</script>\n<main>\n    <div class='header'>\n        <label class=\"select\">Indiquez votre base\n            <!-- svelte-ignore a11y-no-onchange -->\n            <select on:change={baseChange}>\n                {#each Object.values(BASES) as option}\n                    <option value={option.label} selected={$base.join('') === option.value.join('')}>{option.label}</option>\n                {/each}\n            </select>\n        </label>\n    </div>\n    \n    <DropZone>\n        <div slot=\"top\">\n            Déposez vos <strong>EP5</strong> dans la zone ou Cliquez\n        </div>\n        <div slot=\"bottom\">\n        <MonthStatus data={$ep5} name=\"EP5\" />\n        </div>\n    </DropZone>\n    <MissionActivities />\n</main>\n<style>\n    .header{min-height: 50px}\n</style>","<script>\n    import {decimal2cents, cents2decimal} from '../parsers/payParser';\n    import { taxYear } from '../stores';\n    import {months, monthsfr, localeCurrency} from './utils';\n    import DownloadTablePDF from './DownloadTablePDF.svelte';\n\n    export let data;\n    export let tableId=\"PayTable\";\n    const computeTotalImposable = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? decimal2cents(data[month].imposable) : 0;\n        }\n        return cents2decimal(total);\n    };\n    const computeTotalFrais = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? sumFrais(month) : 0;\n        }\n        return cents2decimal(total);\n    };\n    const computeTotalDecouchersFPRO = (data) => {\n        let total = 0;\n        for (const month of months) {\n            total += (data[month]) ? data[month].decouchers_fpro.map(decimal2cents).reduce((a, b) => a + b): 0;\n        }\n        return cents2decimal(total);\n    };\n    $: totalFrais = computeTotalFrais(data);\n    const sumFrais = (month) => {\n        return data[month].repas.concat(data[month].transport).map(decimal2cents).reduce((a, b) => a + b);\n    };\n    $: totalImposable = computeTotalImposable(data);\n    $: cumulImposable12 = (data[\"12\"] && data[\"12\"].cumul !== \"0\") ? cents2decimal(decimal2cents(data[\"12\"].cumul)) : undefined;\n    $: totalDecouchersFPRO = computeTotalDecouchersFPRO(data);\n\n</script>\n{#if Object.keys(data).length > 1}\n<DownloadTablePDF tableIds={[tableId]} filename={`revenus${$taxYear}.pdf`}/>\n<table class=\"data\" id={tableId}>\n    <thead>\n        <tr><th colspan=\"5\">Détails des salaires {$taxYear}</th></tr>\n        <tr><th>Mois</th><th>Montant imposable</th><th>Cumul imposable</th><th>Frais d'emploi ¹</th><th>Découchers F PRO ²</th></tr>\n    </thead>\n    <tbody>\n        {#each months as month, i}\n            <tr>\n                <td>{monthsfr[i]}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].imposable) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].cumul) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(cents2decimal(sumFrais(month))) : \"\"}</td>\n                <td>{(data[month]) ? localeCurrency(data[month].decouchers_fpro) : \"\"}</td>\n            </tr>\n        {/each}\n        <tr>\n            <th>Total</th>\n            <th>{localeCurrency(totalImposable)}</th>\n            <th></th>\n            <th>{localeCurrency(totalFrais)}</th>\n            <th>{localeCurrency(totalDecouchersFPRO)}</th>\n        </tr>\n    </tbody>\n    <tfoot>\n        <tr>\n            <td colspan=\"5\">1. Les Frais d'emploi commprennent les lignes IND.REPAS, INDEMNITE REPAS, IND. TRANSPORT, FRAIS REELS TRANSP du bulletin de paye.</td>\n        </tr>\n        <tr>\n            <td colspan=\"5\">2. Cette colonne doit être substituée par le décompte des frais réels engagés par AF pour les nuitées.</td>\n        </tr>\n    </tfoot>\n</table>\n{/if}\n\n<style>\n    tbody th { /* Total bottom line */\n        font-family: monospace;\n        font-size: 1.3rem;\n    }\n    td:not(:nth-child(1)), th:not(:nth-child(1)){\n        text-align: right;\n    }\n    td:not(:nth-child(1)) {\n        white-space: nowrap;\n    }\n    tbody > tr:nth-child(12) > td:nth-child(3){ /*cumul mois 12 */\n        font-weight: bold;\n    } \n</style>","<script>\n    import DropZone from '../components/DropZone.svelte';\n    import MonthStatus from \"../components/MonthStatus.svelte\";\n    import PayTable from '../components/PayTable.svelte';\n    import {paySlips} from '../stores';\n</script>\n<main>\n    <div class=\"header\"></div>\n    <DropZone>\n        <div slot=\"top\">\n            Déposez vos <strong>bulletins</strong> dans la zone ou Cliquez\n        </div>\n        <div slot=\"bottom\">\n            <MonthStatus data={$paySlips} name=\"Bulletins de salaire\"/>\n        </div>\n    </DropZone>\n    <PayTable data={$paySlips}/>\n</main>\n<style>\n    .header{min-height: 50px}\n</style>","<script>\n    //import {online} from '../stores';\n    import Link from '../components/Link.svelte'\n    import { htmlLogo } from '../components/utils';\n    const version = \"APP_VERSION\";\n</script>\n<main>\n    <!-- {#if $online !== undefined}<p>Browser is {($online) ? 'online': 'offline'}</p>{/if} -->\n    <p>La page d'assistance arrive bientôt !</p>\n\n    <p>{@html htmlLogo} v{version}</p>\n\n    <div class=\"footer\">\n        <p>Alert Icon via <Link href=\"https://commons.wikimedia.org/wiki/File:OOjs_UI_icon_alert_destructive.svg\">Wikimedia Commons</Link></p>\n        <p>Other Icons made by <Link href=\"https://www.flaticon.com/authors/freepik\" title=\"Freepik\">Freepik</Link> from <Link href=\"https://www.flaticon.com/\" title=\"Flaticon\">www.flaticon.com</Link></p>\n    </div>\n</main>\n\n<style>\n    div.footer{\n        font-size: xx-small;\n        margin-top: 2rem;\n    }\n</style>","<script>\n    import {taxYear, DATASET, taxData} from \"../stores\";\n    const change = () => $taxData; //force preload\n</script>\n<label class=\"select\">\n<!-- svelte-ignore a11y-no-onchange -->\n<select bind:value={$taxYear} on:change|preventDefault={change}>\n    {#each Object.values(DATASET) as option}\n        <option value={option.label} selected={$taxYear === option.label}>{option.label}</option>\n    {/each}\n</select>\n</label>","<script>\n    import {route, log} from '../stores';\n    import {viewLog} from '../components/LogWindow.svelte';\n    import {htmlLogo} from '../components/utils';\n    import TaxYearSelect from '../components/TaxYearSelect.svelte';\n</script>\n<nav>\n    <a href=\"#/\" class:active={$route=='/'}>{@html htmlLogo}<sup>beta</sup></a>\n    <a href=\"#/mission\" class:active={$route=='/mission'}>Frais De Mission</a>\n    <a href=\"#/pay\" class:active={$route=='/pay'}>Salaire</a>\n    <a href=\"#/help\" class:active={$route=='/help'}>Aide</a>\n    <span class=\"flexspace\"></span>\n    {#if $log.length > 0}\n        <a href=\"#/log\" on:click|preventDefault={() => $viewLog = !$viewLog}>\n            <svg><use xlink:href=\"#alert\"/></svg><sup>{$log.length}</sup>\n        </a>\n    {/if}\n    <TaxYearSelect/>\n</nav>\n\n<style>\n    sup {\n        background-color: var(--redaf);\n        color: var(--background-color);\n        padding: 1px 3px;\n        border-radius: 3px;\n        font-weight: normal;\n        margin-left: 4px;\n        font-size: xx-small;\n    }\n    nav {\n        display: flex;\n        /* justify-content: flex-end; */\n        position: -webkit-sticky;\n        position: sticky;\n        top: 0;\n        background-color: var(--navbar-background-color);\n        --item-color: rgba(var(--blueaf_rgb), 0.5);\n        --active-color: rgba(var(--blueaf_rgb), 0.9);\n        z-index: 10;\n    }\n    a {\n        display: block;\n        padding: 10px;\n        color: var(--item-color);\n        text-decoration: none;\n    }\n    a.active {\n        color: var(--active-color);\n        border-bottom: 2px solid var(--redaf);\n    }\n\n    a:hover {\n        text-decoration: none;\n    }\n\n    a:visited {\n        color: var(--item-color);\n    }\n    a[href=\"#/\"] {\n        margin-right: 0;\n        font-weight: 700;\n    }\n    a[href=\"#/log\"] {\n        padding-right: 2px;\n        padding-top: 8px;\n        padding-bottom: 0;\n    }\n    :global(.flexspace) {\n        display: inline-block;\n        flex: 1;\n    }\n    :global(nav .select) {\n        display: flex;\n        align-items: center;\n        margin-right: 10px;\n    }\n    :global(nav .select select) {\n        background-color: var(--navbar-background-color);\n        border: none;\n    }\n    a[href=\"#/log\"] sup {\n        top: -1em;\n        position: relative;\n        left: -0.5em;\n    }\n    svg{\n        fill:var(--redaf);\n        opacity: 1;\n        width: 24px;\n        height: 24px;\n    }\n</style>","<script>\n    import { fade } from 'svelte/transition';\n    let installLabel = 'Installer';\n    let dismiss = false;\n    const install = (reg) => {\n        let refreshing;\n        navigator.serviceWorker.addEventListener('controllerchange', () => {\n            if (refreshing) return;\n            refreshing = true;\n            window.location.reload();\n        });\n        installLabel = \"En cours...\"\n        reg.waiting.postMessage('SKIP_WAITING');\n    }\n</script>\n\n{#await window.isSWUpdateAvailable.promise then registration}\n{#if registration && !dismiss}\n<div class=\"toast\" transition:fade style=\"position: absolute; top: 0; right: 0;\">   \n    <div class=\"toast-header\">\n        <strong><span>👨🏻‍✈️</span>Mise à jour disponible</strong>\n        <button type=\"button\" class=\"close\" aria-label=\"Close\" on:click={() => dismiss=true}>\n            <span aria-hidden=\"true\">&times;</span>\n        </button>\n    </div>\n    <div class=\"toast-body\">\n        <button on:click|once={() => install(registration)}>{installLabel}</button>\n    </div>\n</div>\n{/if}\n{/await}\n<style>\n    .toast {\n        opacity: 1;\n        z-index: 20;\n        max-width: 350px;\n        overflow: hidden;\n        font-size: .875rem;\n        background-color: rgba(255,255,255,.85);\n        background-clip: padding-box;\n        border: 1px solid rgba(0,0,0,.1);\n        box-shadow: 0 .25rem .75rem rgba(0,0,0,.1);\n        -webkit-backdrop-filter: blur(10px);\n        backdrop-filter: blur(10px);\n        border-radius: .25rem;\n    }\n    .toast-header {\n        display: -ms-flexbox;\n        display: flex;\n        -ms-flex-align: center;\n        align-items: center;\n        padding: .25rem .75rem;\n        color: #6c757d;\n        background-color: rgba(255,255,255,.85);\n        background-clip: padding-box;\n        border-bottom: 1px solid rgba(0,0,0,.05);\n    }\n    .toast-header strong {\n        margin-right: auto;\n    }\n    .toast-body {\n        padding: .75rem;\n        text-align: center;\n    }\n    .toast-body button{\n        color: var(--background-color);\n        background-color: var(--blueaf);\n        border-radius: 3px;\n    }\n    button.close {\n        float: right;\n        font-size: 1.5rem;\n        font-weight: 700;\n        line-height: 1;\n        color: #000;\n        text-shadow: 0 1px 0 #fff;\n        opacity: .5;\n        padding: 0;\n        background-color: transparent;\n        border: 0;\n        -webkit-appearance: none;\n        -moz-appearance: none;\n        appearance: none;\n        margin-bottom: .25rem;\n        margin-left: 0.5rem;\n    }\n    strong>span {\n        padding-right: 1em;\n    }\n\n</style>","<script>\n    import HomePage from './pages/HomePage.svelte';\n    import MissionPage from './pages/MissionPage.svelte';\n    import PayPage from './pages/PayPage.svelte';\n    import HelpPage from './pages/HelpPage.svelte';\n    import LogWindow from './components/LogWindow.svelte';\n    import {route} from './stores';\n    import NavBar from './components/Navbar.svelte';\n    import SWUpdate from './components/SWUpdate.svelte';\n\n</script>\n\n<SWUpdate/>\n<NavBar/>\n<LogWindow />\n\n{#if $route === '/'}\n<HomePage/>\n{:else if $route === '/mission'}\n<MissionPage/>\n{:else if $route === '/pay'}\n<PayPage/>\n{:else if $route === '/help'}\n<HelpPage/>\n{:else}\n<!-- redirect -->\n{ window.location.hash = '#/'}\n{/if}\n\n<style>\n    :global(html, body) {\n        height: 100%;\n        min-height: 100%;\n        width: 100%;\n        position: relative;\n        --blueaf: #002157; /* --royal-blue-dark */\n        --blueaf_rgb: 9,34,84; /* rgba(var(--blueaf_rgb), 0.5) is valid */\n        --redaf:#FA3C35; /* --tart-orange */\n        --blood-red: #6B0504;\n        --green: #2CA58D; /* #28a745 */;\n        --snow: #FFFBFF;\n        --minion-yellow: #ECD444;\n        --light-grey: #eee; /* used to print tables */\n        --maximum-yellow-red: #FCBF49;\n        /*--light-blue: rgb(213,226,242);/*#4EA5D9*/\n        /* --pink: #e83e8c; */\n        /*--white: #ffFBff;*/\n        /* Other colors found on coolors.co */\n        /*--bisque: #F1DABF;*/\n        /*--maximum-yellow-red: #FCBF49;*/\n        /*--saffron: #EAC435;*/\n        /*--mustard: #FFE156;*/\n        /*--orange-yellow: #F3B700;*/\n        /*--bitter-lemon: #C2E812;*/\n        /*--june-bud: #C5D86D;*/\n        /*--emerald: #23CE6B;*/\n        /*--electric-blue: #87F1FF;*/\n        /*--dark-turquoise: #52DEE5;*/\n        /*--medium-turquoise: #75C9C8;*/\n        /*--star-command-blue: #0077B6;*/\n        /*--light-slate-gray: #698996;*/\n        /*--sea-green-crayola: #00FDDC;*/\n        --color: var(--blueaf);\n        --white: white; /* for button like label */\n        --background-color: var(--snow);\n        --navbar-background-color: var(--minion-yellow);\n        --dropzone-background-color: var(--background-color);\n        --table-background-color: var(--background-color);\n        --table-color: var(--color);\n        --table-highlight-color: #00215730; /* blueaf 30% alpha */\n        --table-border-color: #ccc;\n        color: var(--color);\n    }\n    :global(body) {\n        background-color: var(--background-color);\n        margin: 0;\n        box-sizing: border-box;\n        font-family: -apple-system, BlinkMacSystemFont, \"Segoe UI\", Roboto, Oxygen-Sans, Ubuntu, Cantarell, \"Helvetica Neue\", sans-serif;\n    }\n    :global(main) {\n        text-align: center;\n        padding: 1em 1em 40px 1em;\n    }\n\n    /*********/\n    /* LINKS */\n    /*********/\n    :global(a) {\n        color: var(--redaf);\n        text-decoration: none;\n    }\n    :global(a:hover) {\n        text-decoration: underline;\n    }\n    :global(a:visited) {\n        color: var(--blood-red);\n    }\n    :global(a[href^=\"#\"]:visited) {\n        color: var(--redaf);\n    }\n    :global(a[href^=http]::after) {\n        content: \"⬀\";\n    }\n\n    /*********/\n    /* FORMS */\n    /*********/\n    :global(label) {\n        display: block;\n    }\n    :global(input, button, select, textarea) {\n        font-family: inherit;\n        font-size: inherit;\n        -webkit-padding: 0.4em 0;\n        padding: 0.4em;\n        margin: 0 0 0.5em 0;\n        box-sizing: border-box;\n        border: 1px solid #ccc;\n        border-radius: 2px;\n    }\n\n    :global(input:disabled) {\n        color: #ccc;\n    }\n\n    :global(button) {\n        color: #333;\n        background-color: #f4f4f4;\n        outline: none;\n        cursor: pointer;\n    }\n\n    :global(button:disabled) {\n        color: #999;\n        cursor: not-allowed;\n    }\n\n    :global(button:not(:disabled):active ){\n        background-color: #ddd;\n    }\n\n    :global(button:focus) {\n        border-color: #666;\n    }\n    :global(.select select){\n        color: var(--color);\n    }\n    :global(.select) {\n        display: inline-block;\n    }\n    :global(.select select){\n        -webkit-padding: 0.2em 0;\n        padding: 0.2em;\n        margin: 0 0 0 0.2em;\n    }\n    /**********/\n    /* TABLES */\n    /**********/\n    :global(table) {\n        border-collapse: collapse;\n        width: 100%;\n    }\n    :global(th, td) {\n        padding: 0.25rem;\n        text-align: left;\n        border: 1px solid #ccc;\n    }\n    /*******/\n    /* SVG */\n    /*******/\n    :global(svg) {\n        fill: var(--color);\n    }\n\n    :global(svg[fill=none]) {\n        fill: none;\n    }\n    /********/\n    /* LOGO */\n    /********/\n    :global(span.logo){\n        color: var(--blueaf);\n        text-transform: uppercase;\n    }\n    :global(span.logo > span){\n        color: var(--redaf);\n    }\n</style>","import App from './App.svelte';\nconst app = new App({\n    target: document.body,\n    props: {}\n});\n\nexport default app;"],"names":["noop","identity","x","assign","tar","src","k","run","fn","blank_object","Object","create","run_all","fns","forEach","is_function","thing","safe_not_equal","a","b","subscribe","store","callbacks","unsub","unsubscribe","component_subscribe","component","callback","$$","on_destroy","push","create_slot","definition","ctx","$$scope","slot_ctx","get_slot_context","slice","update_slot","slot","slot_definition","dirty","get_slot_changes_fn","get_slot_context_fn","slot_changes","lets","undefined","merged","len","Math","max","length","i","get_slot_changes","slot_context","p","exclude_internal_props","props","result","set_store_value","ret","value","set","is_client","window","now","performance","Date","raf","cb","requestAnimationFrame","tasks","Set","run_tasks","task","c","delete","f","size","loop","promise","Promise","fulfill","add","[object Object]","append","target","node","appendChild","insert","anchor","insertBefore","detach","parentNode","removeChild","destroy_each","iterations","detaching","d","element","name","document","createElement","svg_element","createElementNS","text","data","createTextNode","space","empty","listen","event","handler","options","addEventListener","removeEventListener","prevent_default","preventDefault","call","this","attr","attribute","removeAttribute","getAttribute","setAttribute","set_attributes","attributes","descriptors","getOwnPropertyDescriptors","__proto__","key","style","cssText","set_data","wholeText","set_style","important","setProperty","select_option","select","option","__value","selected","toggle_class","toggle","classList","HtmlTag","e","n","html","nodeName","t","h","innerHTML","Array","from","childNodes","active_docs","current_component","active","create_rule","duration","delay","ease","uid","step","keyframes","rule","str","hash","charCodeAt","doc","ownerDocument","stylesheet","__svelte_stylesheet","head","sheet","current_rules","__svelte_rules","insertRule","cssRules","animation","delete_rule","previous","split","next","filter","anim","indexOf","deleted","join","deleteRule","clear","set_current_component","get_current_component","Error","onMount","on_mount","dirty_components","binding_callbacks","render_callbacks","flush_callbacks","resolved_promise","resolve","update_scheduled","add_render_callback","flushing","seen_callbacks","flush","update","pop","has","fragment","before_update","after_update","wait","then","dispatch","direction","kind","dispatchEvent","type","detail","createEvent","initCustomEvent","custom_event","outroing","outros","group_outros","r","check_outros","transition_in","block","local","transition_out","o","null_transition","create_bidirectional_transition","params","intro","config","running_program","pending_program","animation_name","clear_animation","init","program","abs","start","end","group","go","easing","tick","css","handle_promise","info","token","index","resolved","child_ctx","current","needs_flush","blocks","m","mount","error","catch","hasCatch","pending","create_component","mount_component","new_on_destroy","map","destroy_component","make_dirty","fill","instance","create_fragment","not_equal","parent_component","prop_values","bound","context","Map","skip_bound","ready","rest","hydrate","nodes","children","l","SvelteComponent","$destroy","splice","$$props","obj","$$set","keys","includes","styles","v","trim","title","levels","updates","to_null_out","accounted_for","fromEntries","entries","startsWith","href","rel","Deferred","reject","htmlLogo","navigatorLocale","navigator","languages","Intl","DateTimeFormat","supportedLocalesOf","NumberFormat","shift","months","months14","monthsfr","localeFormat","numberOrString","format","numberValue","parseFloat","toFixed","maximumFractionDigits","currency","minimumFractionDigits","toString","localeCurrency","localeRate","localeDateFormat","isoString","fakeUTCDate","parse","substring","opts","timezone","cubicOut","fade","linear","getComputedStyle","opacity","fly","y","target_opacity","transform","od","u","subscriber_queue","readable","writable","stop","subscribers","new_value","run_queue","s","invalidate","subscriber","derived","stores","initial_value","single","isArray","stores_array","auto","inited","values","cleanup","sync","unsubscribers","CONTINUATION_MARK","EP5MONTHS","ep5Time2iso","hours","cs","padStart","numberOfDays","startISO","endISO","diff","replace","floor","iso2FR","timeZone","deltaDays","setUTCDate","getUTCDate","loc","toLocaleString","match","exec","day","month","year","hour","minute","baseIsoString","delta","tzOffset","trunc","minutes","round","bind","rotSummary","rot","stopovers","nights","reduce","accumulator","dep","arr","optimizeNightsRepartition","stays","countries","stayTuples","nightTuples","optimized","concat","optimizedCountries","console","log","summary","reverse","iata2country","iata","airportsData","AmountError","findAmountEuros","countryData","isoDate","exrData","amount","findAmount","exr","rate","date","localeCompare","addIndemnities","taxYear","rots","taxData","tzConverter","results","countriesData","MC_REMOVAL","nextYear","parseInt","previousYear","hasError","indemnities","toRemove","total","formula","days","country","z","taxStopCount","taxStops","validTaxStops","validTaxStopCount","count","validCount","countryIndemnities","stopIndemnities","doRemove","ceil","euros","isComplete","err","message","minFractionDigits","maxFractionDigits","stops","stopFormula","currencyFormula","indemnity","ep5Iterator","monthData","testIterator","ep5Parser","fileName","fileOrder","base","previousTaxYear","nextTaxYear","pattern","monthIndex","flights","depDay","depTime","arrDay","arrTime","iataMap","converterTZ","timeZoneName","isBase","rotFlights","rotStays","flightGMT","flight","j","nextFlight","standbyHours","standbyDays","lastDay","yString","mString","endsWith","nightsCount","missing","fillingNight","nightInFlight","buildRots","sort","BASES","label","DATASET","url","defaultYear","resettable","resetValue","reset","nativeConsoleLog","nativeConsoleError","newConsoleLog","theStore","arguments","apply","newConsoleError","patchLog","ep5","paySlips","$taxYear","fetch","res","json","pairings","$ep5","$taxData","$tzConverter","currentIt","nextIt","mergedRots","mergedWithIndemnities","mergeRots","route","hashchange","location","substr","action_result","destroy","viewLog","text2html","renderText","describe","prototype","logEvent","lenght","markerCount","changeStyleColor","renderStyledText","$viewLog","scrollTop","scrollHeight","running","start_time","end_time","abort","started","fontObserver","fonts","load","urls","test","remaining","maybeCallback","async","defer","isScript","tag","crossOrigin","onload","body","decimal","number","left","right","padEnd","decimal2cents","cents2decimal","cents","centsString","matchAll","re","bydefault","matchLast","lastMatch","payParser","errors","repas","transport","decouchers_fpro","net","imposable","decimals","cumul","msg","router","content","pdfWorker","seqOrder","preloadFiles","getPageText","pdf","pageNo","separator","page","getPage","getTextContent","items","disabled","dropzoneHasFocus","preload","loader","pdfjsLib","GlobalWorkerOptions","workerSrc","destroyed","PDFWorker","verbosity","Warning","getPDF","file","reader","FileReader","ev","source","pdfPages","getDocument","maxPages","numPages","pageText","getPDFText","worker","onerror","readAsArrayBuffer","processFiles","files","promises","basename","batchPaySlips","batchEp5","$base","afterLoad","all","getEntriesAsAsyncIterator","dirEntry","createReader","readEntries","entry","isFile","fileAsPromise","dataTransfer","item","webkitGetAsEntry","isDirectory","nameLabel","computeNameLabel","requested","prev","requestedMonths","dat","tz","requestedMonthsDefault","computeRequestedMonths","zoneForfaitEuro","code","validity","startRate","endRate","averageRate","zone","tableId","getCountriesData","list","sortedList","getData","amounts","$pairings","preloadFiles2","filename","tableIds","fontName","ok","blob","jsPDF","API","events","addFileToVFS","addFont","readAsBinaryString","statusText","stopPropagation","table","getElementById","querySelectorAll","innerText","jspdf","orientation","autoTable","font","useCss","showHead","showFoot","pageBreak","includeHiddenHtml","download","Blob","output","URL","revokeObjectURL","createObjectURL","remove","tableIndemnitiesId","sumFrais","totalFrais","computeTotalFrais","totalImposable","computeTotalImposable","cumulImposable12","totalDecouchersFPRO","computeTotalDecouchersFPRO","version","selected_option","querySelector","setAttributeNS","isSWUpdateAvailable","installLabel","dismiss","install","reg","refreshing","serviceWorker","reload","waiting","postMessage","registration"],"mappings":"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"}